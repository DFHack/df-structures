{"version":1,"ops":[{"type":1,"author":{"id":"dc07f1dff8eee6d97a060efd0e58b122b9009d24"},"timestamp":1582971173,"metadata":{"github-id":"MDU6SXNzdWU1NzMyNjczMDk=","github-url":"https://github.com/DFHack/df-structures/issues/372","origin":"github"},"title":"Suggestion: \"Export\" is-union and ref-target elements as attributes, plus add discriminant indications","message":"- If the ref-target element on fields would be exported as ref-target elements on the fields of the types (when present), it would be possible for e.g. gui/gm-editor to display what fields reference.\n\n- The suggestion for is-union export is more complex, and depends on whether the value is \"hard coded\" to be boolean. In the best case it's not, in which case it ought to be possible to replace \"true\" with the name of the field containing the discriminant when it's known (a discriminant is a field that determines which of the overloaded interpretations of a union is the correct one to use). In that case the same logic as the one for ref-target above could be used, i.e. an attribute on the compound element of the type that names the field that controls the interpretation.\nIf \"is-union\" is hard coded to a boolean value, it might still be possible to generate a \"discriminant\" attribute for the field with a value of \"nil\" if a \"discriminant\" attribute hasn't been defined manually.\nThe usage for that would be to allow tools to automatically select the correct interpretation based on the discriminant when present.","files":null}]}