{"version":1,"ops":[{"type":1,"author":{"id":"fe9bfa5b3d8f2049fc74c3f55489f1a62726e2cd"},"timestamp":1584026203,"metadata":{"github-id":"MDU6SXNzdWU1ODAwMTI4ODM=","github-url":"https://github.com/DFHack/df-structures/issues/384","origin":"github"},"title":"Some divination research","message":"0.47.04 Win64 build 200309001\n\nDivination dice (the items) each appear to come with a currently unmapped item improvement which is required for them to function as dice, since deleting this improvement also removes the “roll” option when attempting to interact with them in adventurer mode (unmapped in the sense that viewing it on gui/gm-editor shows the generic item improvement instead). Moreover, it is logical that this improvement should contain the ID of the particular divination_set to which the die is linked, as this doesn’t appear to be kept anywhere else.\n\nin `historical_figure_info.T_curse`\n`anon_1` - appears to be used to keep track of dice rolled by the historical figure in question, as it is populated for the adventure mode player figure once a die is rolled, and deleting the contents afterwards makes the game act like you've never rolled this die before\n\nin `divination_set_roll`:\n`result`\nIf this contains, for example, the number 5, then the effect detailed below will take place when you happen to roll a number 5 on the die linked to this divination set.\n\n`effect_type`\n0 = MediumBlessing\n1 = MinorBlessing\n2 = MediumCurse\n3 = MinorCurse\n4 = Fortune\n\n0-3 were identified by observing a clear correlation between the effect_type value and the linked interaction (see below). \"Fortune\" refers to messages like \"look out for a chance encounter\" and \"fulfillment will be yours\". The colour of the announcement obtained when the die is rolled is determined by this.\n\n`effect`\nIf effect_type is 0-3:\nThe ID of the interaction to be carried out.\n\nIf effect_type is 4:\nDetermines which fortune message is received.","files":null}]}