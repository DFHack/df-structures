{"version":1,"ops":[{"type":1,"author":{"id":"dc07f1dff8eee6d97a060efd0e58b122b9009d24"},"timestamp":1498994215,"metadata":{"github-id":"MDU6SXNzdWUyNDAwMDQxNjk=","github-url":"https://github.com/DFHack/df-structures/issues/205","origin":"github"},"title":"df.world.xml:world.unk_59dc4 is probably \"available grasses\"","message":"The \"regions\" field is organized in a 7*7 world tile grid centered on the current embark (like the entries in world.populations). Note that I haven't looked at any embark close to the map edge: numbers in various places may be lower there, to account for non existent world tiles.\nThe \"unk1\" field is currently described as an array of 294 elements, but these elements are actually grouped into groups of 6, where the first one is the surface, followed by the 3 caverns, the magma sea, and the underworld (the latter 5 organized as in the world.world_data.underworld_regions field). Thus, it can be described as an array of 49 elements each consisting of an array of 6 elements.\nthe unk1[index].ref field describes the world tile the unk1[index].unk fields belongs to, with the x/y coordinates of the corresponding world tile, the cave_id in the underground regions array (unless surface) and the depth of that cavern. This part has been described previously, and I don't have any new insight here.\nThe unk1[index].unk field is a list of grass types available for ground cover on that world tile and that cavern (or surface) level. The field could e.g. be called grass_index, or something like that (The indices are the ones in world.raws.plants.all). The odd part is that muddy caverns get empty lists, despite sporting both cave moss and floor fungus just like the Underground Water biome cavern which does list those.\n\nI've run a script over the list to check that all references present are to plants whose flags.GRASS value is true. When printing all entries that weren't grasses it came up empty, which matches the impression of printing the complete list and looking at it manually.\n\nI have previously performed experiments where I've embarked on locations having only bubble bulb as ground cover and then tried to add an additional grass type legal to the region to the region's population list as well as inserting this new entry into the world.populations list at to no effect. I've also replaced bubble bulb with dallisgrass (legal) and manipulated the world.populations list to refers to dallisgrass without effect.\nHowever, by embarking with only bubble bulb as a legal grass type and then adding dallisgrass to the world.unk_59dc4.unk[144].unk list using DFHack the embark started getting both bubble bulb and dallisgrass as ground cover on tiles the embarkees were ordered to channel out (to get bare tiles DF could cover).","files":null}]}