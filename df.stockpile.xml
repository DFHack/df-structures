<data-definition>
    <enum-type type-name='hauler_type'> bay12: not actual enum, based on storage_handlerst
        <enum-item name='Any'/>
        <enum-item name='Stone'/>
        <enum-item name='Wood'/>
        <enum-item name='Item' comment='Burial'/>
        <enum-item name='Bin' comment='Item'/>
        <enum-item name='Body'/>
        <enum-item name='Food'/>
        <enum-item name='Refuse'/>
        <enum-item name='Furniture'/>
        <enum-item name='Animal'/>
    </enum-type>

    <struct-type type-name='hauling_route' original-name='hauling_routest'
                 instance-vector='$global.plotinfo.hauling.routes' key-field='id'>
        <int32_t name='id'/>
        <stl-string name="name"/>
        <stl-vector name="stops" pointer-type='hauling_stop'/>
        <stl-vector name="vehicle_ids">
            <int32_t ref-target='vehicle'/>
        </stl-vector>
        <stl-vector name="vehicle_stops">
            <int32_t refers-to='$$._global.stops[$]'/>
        </stl-vector>
    </struct-type>

    <struct-type type-name='hauling_stop' original-name='hauling_stopst' key-field='id'>
        <int32_t name='id'/>
        <stl-string name='name'/>
        <compound name='pos' type-name='coord'/>

        <compound name='settings' type-name='stockpile_settings'/>

        <stl-vector name='conditions' pointer-type='stop_depart_condition'/>
        <stl-vector name='stockpiles' pointer-type='route_stockpile_link'/>

        <int32_t name='time_waiting'/>
        <int32_t name='cart_id' ref-target='item'/>
    </struct-type>

    <struct-type type-name='stop_depart_condition' original-name='stop_leave_conditionst'>
        <int32_t name='timeout'/>
        <enum base-type='int32_t' name='direction'>
            <enum-item name='North'/>
            <enum-item name='South'/>
            <enum-item name='East'/>
            <enum-item name='West'/>
        </enum>
        <enum base-type='int32_t' name='mode'>
            <enum-item name='Push'/>
            <enum-item name='Ride'/>
            <enum-item name='Guide'/>
        </enum>
        <int32_t name='load_percent'
                 comment='broken display unless 0, 50 or 100'/>
        <bitfield name='flags'>
            <flag-bit name='at_most'/>
            <flag-bit name='desired'/>
        </bitfield>
        <compound name='guide_path' type-name='coord_path'
                  comment='initialized on first run, and saved'/>
    </struct-type>

    <struct-type type-name='route_stockpile_link' original-name='stop_stockpile_linkst'>
        <int32_t name='building_id' ref-target='building'/>
        <bitfield name='mode'>
            <flag-bit name='take'/>
            <flag-bit name='give'/>
        </bitfield>
    </struct-type>

    <struct-type type-name='vehicle' original-name='vehiclest'
                 instance-vector='$global.world.vehicles.all' key-field='id'>
        <int32_t name='id'/>
        <int32_t name='item_id' ref-target='item'/>

        -- Position within tile
        <int32_t name='offset_x' comment='-50000..50000'/>
        <int32_t name='offset_y'/>
        <int32_t name='offset_z'/>

        <int32_t name='speed_x'/>
        <int32_t name='speed_y'/>
        <int32_t name='speed_z'/>

        <int32_t name='fine_x_gain_vel'/>
        <int32_t name='fine_y_gain_vel'/>
        <int32_t name='fine_z_gain_vel'/>
        <bitfield name='flag'>
            <flag-bit name='ON_TRACK'/>
        </bitfield>

        <int32_t name='route_id' ref-target='hauling_route'/>
        <compound name='last_dump' type-name='coord'/>

        <int32_t name='time_stopped' comment='bay12: zero_vel_count; frames, up to 1000'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
