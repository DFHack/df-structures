{"version":1,"ops":[{"type":1,"author":{"id":"93c7dc0cfc5d2e2aecebed0dc8efe29051bcca67"},"timestamp":1462035013,"metadata":{"github-id":"MDU6SXNzdWUxNTIwNDA0NzU=","github-url":"https://github.com/DFHack/df-structures/issues/105","origin":"github"},"title":"Writings: item_flags2[3] and itemimprovement_writingst::anon_1","message":"Couple of things associated with quires and scrolls:\n\nitem_toolst::item_flags2[3], on a quire or scroll, is the flag that indicates if the item is has a writing improvement.  It's used by, among other things, workshops to determine if an object _might_ meet the [HAS_WRITING_IMPROVEMENT] requirement.  The game also checks to see if there actually is an itemimprovement_writingst in the improvements list, but it won't even look if this flag isn't set.\n\nitemimprovement_writingst::anon_1 is a vector of ints, which are the indices into df.global.world.written_contents.all for the things written on a quire, scroll, or codex.  Currently, anon_1 is _really_ hard to access, because it apparently has the same name as a subclass variable that's just an int primitive, which is shadowing it for some reason?  So in the Lua interpreter you have to use the special syntax to access it, and gm-editor can't insert into it because it can't create int32_ts (or any other primitive, I think).","files":null}]}