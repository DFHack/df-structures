{"version":1,"ops":[{"type":6,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587697051,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNzQyODQ3Mjc="},"target":"9656a9412ada115370dd9909c4d565c416329f97a2faf41bff5af78b91f9a262","message":"Tested on linux32 using DFHack/dfhack@e267876 and c0edb62\n\n - [ ] `spoils_report` contains invalid vectors (4 bytes too far?):\n\n```\n(*world.status.spoils_reports[0]).mat_types (0xd636bb3c): invalid vector (Invalid capacity)\nd636bb20\t d636bbe0 d636bbe8 d636bbe8 d636bbf0\nd636bb30\t d636bbf8 d636bbf8 d636bc00 d636bc08\nd636bb40\t d636bc08 d6354fc0 d6354fd0 d6354fd0\nd636bb50\t d636bc10 d636bc20 d636bc20 d636bc30\n(*world.status.spoils_reports[0]).creature_counts (0xd636bb78): invalid vector (Invalid capacity)\nd636bb60\t d636bc38 d636bc38 d636bc40 d636bc48\nd636bb70\t d636bc48 d636bc50 d636bc58 d636bc58\nd636bb80\t 00000000 00000000 00000000 00000055\nd636bb90\t 00000030 00000030 00000000 696f7053\n(*world.status.spoils_reports[1]).creature_counts (0xd636bcc8): invalid vector (Invalid capacity)\nd636bcb0\t d636bd38 d636bd38 d636bd40 d636bd48\nd636bcc0\t d636bd48 d636bd50 d636bd58 d636bd58\nd636bcd0\t 00000000 00000000 00000000 00000055\nd636bce0\t 00000030 00000030 00000000 696f7053\n(*world.status.spoils_reports[2]).creature_counts (0xd636bdc8): invalid vector (Invalid capacity)\nd636bdb0\t d636be84 d636be84 d636be90 d636be94\nd636bdc0\t d636be94 d636bea0 d636bea4 d636bea4\nd636bdd0\t 00000000 00000000 00000000 00000055\nd636bde0\t 00000031 00000031 00000000 696f7053\n```\n\n - [x] `crime.reports` is invalid (no valid vector visible nearby):\n\n```\n(*world.crimes.all[1]).reports (0xdffd2734): invalid vector (Unaligned pointer)\ndffd2720\t ffffffff 00000000 00000000 000000c5\ndffd2730\t 00000002 00000000 0000000a 00000001\ndffd2740\t 00000000 00003bd2 0000fe4f 0000fe4f\n(*world.crimes.all[2]).reports (0xdffd27f4): invalid vector (Unaligned pointer)\ndffd27e0\t ffffffff 00000000 00000000 000000c5\ndffd27f0\t 00000003 00000000 00000001 00000004\ndffd2800\t 00000000 00003d62 ffffffff ffffffff\n(*world.crimes.all[3]).reports (0xdffd28b4): invalid vector (Unaligned pointer)\ndffd28a0\t ffffffff 00000000 00000000 000000c5\ndffd28b0\t 00000004 00000000 00000003 00000001\ndffd28c0\t 00000000 00003bdd 0000fe5a 0000fe5a\n(*world.crimes.all[4]).reports (0xdffd2974): invalid vector (Unaligned pointer)\ndffd2960\t ffffffff 00000000 00000000 000000c5\ndffd2970\t 00000005 00000000 00000005 00000003\ndffd2980\t 00000000 00003c50 0000ff06 0000ff06\n(*world.crimes.all[5]).reports (0xdffd2a34): invalid vector (Unaligned pointer)\ndffd2a20\t ffffffff 00000000 00000000 000000c5\ndffd2a30\t 00000006 00000000 00000005 00000001\ndffd2a40\t 00000000 0000116e 0000cf71 0000cf71\n```","files":null},{"type":6,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587697670,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNzQyODY4MzY="},"target":"9656a9412ada115370dd9909c4d565c416329f97a2faf41bff5af78b91f9a262","message":"Tested on linux32 using DFHack/dfhack@e267876 and c0edb62\n\n - [x] `spoils_report` contains invalid vectors (4 bytes too far?):\n\n```\n(*world.status.spoils_reports[0]).mat_types (0xd636bb3c): invalid vector (Invalid capacity)\nd636bb20\t d636bbe0 d636bbe8 d636bbe8 d636bbf0\nd636bb30\t d636bbf8 d636bbf8 d636bc00 d636bc08\nd636bb40\t d636bc08 d6354fc0 d6354fd0 d6354fd0\nd636bb50\t d636bc10 d636bc20 d636bc20 d636bc30\n(*world.status.spoils_reports[0]).creature_counts (0xd636bb78): invalid vector (Invalid capacity)\nd636bb60\t d636bc38 d636bc38 d636bc40 d636bc48\nd636bb70\t d636bc48 d636bc50 d636bc58 d636bc58\nd636bb80\t 00000000 00000000 00000000 00000055\nd636bb90\t 00000030 00000030 00000000 696f7053\n(*world.status.spoils_reports[1]).creature_counts (0xd636bcc8): invalid vector (Invalid capacity)\nd636bcb0\t d636bd38 d636bd38 d636bd40 d636bd48\nd636bcc0\t d636bd48 d636bd50 d636bd58 d636bd58\nd636bcd0\t 00000000 00000000 00000000 00000055\nd636bce0\t 00000030 00000030 00000000 696f7053\n(*world.status.spoils_reports[2]).creature_counts (0xd636bdc8): invalid vector (Invalid capacity)\nd636bdb0\t d636be84 d636be84 d636be90 d636be94\nd636bdc0\t d636be94 d636bea0 d636bea4 d636bea4\nd636bdd0\t 00000000 00000000 00000000 00000055\nd636bde0\t 00000031 00000031 00000000 696f7053\n```\n\n - [x] `crime.reports` is invalid (no valid vector visible nearby):\n\n```\n(*world.crimes.all[1]).reports (0xdffd2734): invalid vector (Unaligned pointer)\ndffd2720\t ffffffff 00000000 00000000 000000c5\ndffd2730\t 00000002 00000000 0000000a 00000001\ndffd2740\t 00000000 00003bd2 0000fe4f 0000fe4f\n(*world.crimes.all[2]).reports (0xdffd27f4): invalid vector (Unaligned pointer)\ndffd27e0\t ffffffff 00000000 00000000 000000c5\ndffd27f0\t 00000003 00000000 00000001 00000004\ndffd2800\t 00000000 00003d62 ffffffff ffffffff\n(*world.crimes.all[3]).reports (0xdffd28b4): invalid vector (Unaligned pointer)\ndffd28a0\t ffffffff 00000000 00000000 000000c5\ndffd28b0\t 00000004 00000000 00000003 00000001\ndffd28c0\t 00000000 00003bdd 0000fe5a 0000fe5a\n(*world.crimes.all[4]).reports (0xdffd2974): invalid vector (Unaligned pointer)\ndffd2960\t ffffffff 00000000 00000000 000000c5\ndffd2970\t 00000005 00000000 00000005 00000003\ndffd2980\t 00000000 00003c50 0000ff06 0000ff06\n(*world.crimes.all[5]).reports (0xdffd2a34): invalid vector (Unaligned pointer)\ndffd2a20\t ffffffff 00000000 00000000 000000c5\ndffd2a30\t 00000006 00000000 00000005 00000001\ndffd2a40\t 00000000 0000116e 0000cf71 0000cf71\n```","files":null},{"type":5,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1585711744,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxODYwMTk4MDk="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1585711796,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNzAwNjU2NA==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-607006564"},"message":"If you're able to test easily, is this still an issue? (Note that I have no idea if this has been touched since you opened this issue, although I did poke around at the justice screen on linux64 recently in case that's relevant)","files":null},{"type":3,"author":{"id":"b557f89d859694906b6aaad860dfa0f74f23dbaa"},"timestamp":1585733374,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNzE0MTUzOA==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-607141538"},"message":"Yes, it is still happening with fd4b705e36d8b90bf8380849fd074672fd6d6f0d.","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587223964,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxNTg5MDUyMg==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-615890522"},"message":"I don't seem to have a world with spoils handy, but I confirmed the second issue (with crime.reports) as of 8427f518c941f8e5734e98f2ff56648522f1281b.","files":null},{"type":3,"author":{"id":"b557f89d859694906b6aaad860dfa0f74f23dbaa"},"timestamp":1587563669,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxNzc5Mzc1Mg==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-617793752"},"message":"I found this issues using [this save from PatrikLundell](http://www.bay12forums.com/smf/index.php?topic=168411.msg8095923#msg8095923).","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587615996,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxODE2OTc0NA==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-618169744"},"message":"In `crime`, the two integers around the three `convicted_hf*` int32s are actually just padding. This may also be the case around `victim_hf*`. Not sure what the proper layout is, but I will continue experimenting.","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587697336,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxODc3NTIyOA==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-618775228"},"message":"\u003e I found this issues using [this save from PatrikLundell](http://www.bay12forums.com/smf/index.php?topic=168411.msg8095923#msg8095923).\n\nWow, check-structures-sanity is picking up a *lot* of issues in this save. Most of them appear to be minor. I'll just focus on `spoils_report` for now, but this will be useful for testing (thanks @PatrikLundell!).","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587697739,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxODc3Njk3Mg==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-618776972"},"message":"The spoils_report issue was an unknown field that was actually just padding, so it didn't exist on i386: https://github.com/DFHack/df-structures/blame/9bf18dfc6647e1ff51deddac9da042baa1655987/df.world.xml#L329\nThis dates back to 2018, so this was a really old issue - nice catch!","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587700378,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxODc4Njk5Mw==","github-url":"https://github.com/DFHack/df-structures/issues/370#issuecomment-618786993"},"message":"Forgot to link in a106b5e98381184004fa9dfff44072239755e554, but this is fixed now","files":null},{"type":4,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1587700379,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzI2NzcxOTE5Ng=="},"status":2}]}