{"version":1,"ops":[{"type":1,"author":{"id":"dc07f1dff8eee6d97a060efd0e58b122b9009d24"},"timestamp":1526469938,"metadata":{"github-id":"MDU6SXNzdWUzMjM1NzkwOTI=","github-url":"https://github.com/DFHack/df-structures/issues/259","origin":"github"},"title":"Pointers in union go AWOL (at least in gui/gm-editor)","message":"The union in question is df.world.xml:incident.unk_v42_1. When viewed with gui/gm-editor the view is empty, i.e. no trace of t6-t10. I've then tried to find out what's going on:\n- When one of the pointers (t6) is present together with two int16_t fields the integer fields are there, but the pointer does not appear. (The integer fields are just test subjects, not intended to mean anything, and I used only one pointer during the investigation).\n- When I buried the pointer in a \"compound\" nothing changed, i.e. it still didn't appear.\n- When I made an intermediate struct type containing only the pointer and then referenced this type as a compound field of the union it finally did appear...\n\nAs indicated, I don't know if this is some kind of issue with the Lua interface or if it's a deeper issue with the generated code.\nThe issue can be worked around by hiding the pointers inside structs, as mentioned, but that's really just a work around, not a solution.\n\n(What I was trying to do when running into the issue was to find out how thoughts refer to performances, which I believe are the subtype 6 version of the incident type.\nAnd it seems anon_4 of t6 is the id of the written_content object the performance relates to).","files":null}]}