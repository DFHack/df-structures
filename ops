{"version":1,"ops":[{"type":3,"author":{"id":"dc07f1dff8eee6d97a060efd0e58b122b9009d24"},"timestamp":1543575060,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ0MzE2NjUyNw==","github-url":"https://github.com/DFHack/df-structures/issues/299#issuecomment-443166527"},"message":"On my 64 bit version (on Windows 10.1, DF 0.44.12) I find lots of units that have a performance_skills pointer with a nil value. Most of them are animals or invader monsters (trolls, etc), but a number of them have two part names (and I don't think I have that many pets). I believe I've seen the structure being absent on residents earlier (although the memory is not to be relied on). Thus, I suspect this pointer (or, rather, what it should point to) only gets allocated once there is any skill to report.\n\nI agree the current_focus/undistracted_focus pair look like they're shifted in your case, though.","files":null},{"type":3,"author":{"id":"f73a58ab6b398dfac3364d5ae44d2bf9a036703f"},"timestamp":1557627268,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ5MTU1ODQzMA==","github-url":"https://github.com/DFHack/df-structures/issues/299#issuecomment-491558430"},"message":"This appears to have been fixed - unk_v4410_1 was changed from an int32 to a pointer and unk_v4410_2 was removed (which fixed alignment on 32-bit without breaking it on 64-bit).","files":null},{"type":6,"author":{"id":"f73a58ab6b398dfac3364d5ae44d2bf9a036703f"},"timestamp":1557627268,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDIyMTA4NTA3OQ=="},"target":"9604b7893d517fcad2e3b80f9d929acc042277d2417d9e5e29b9cc169d0a9710","message":"This should have been fixed - unk_v4410_1 was changed from an int32 to a pointer and unk_v4410_2 was removed (which fixed alignment on 32-bit without breaking it on 64-bit). Can you verify whether this is still a problem?","files":null},{"type":3,"author":{"id":"7c3935464acdaaae9d6fcb27abcbbe21ec75027f"},"timestamp":1557627758,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ5MTU1ODc2NA==","github-url":"https://github.com/DFHack/df-structures/issues/299#issuecomment-491558764"},"message":"70e75246c04878e77ab037711cc2b0d5cbd62819, for reference","files":null},{"type":3,"author":{"id":"b557f89d859694906b6aaad860dfa0f74f23dbaa"},"timestamp":1557653064,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ5MTU3OTQ0MA==","github-url":"https://github.com/DFHack/df-structures/issues/299#issuecomment-491579440"},"message":"I used a similar change for generating DT memory layouts (and forgot about it) and no issue were reported since (although I am not sure the 32 bits version is much tested). I regenerated them using the latest master instead of my old fix and the only change is the disappearance of OnBreak enum value from the same commit. So yes this is fixed by 70e7524.","files":null},{"type":4,"author":{"id":"b557f89d859694906b6aaad860dfa0f74f23dbaa"},"timestamp":1557653064,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjMzNTE1Njg2OQ=="},"status":2}]}