<data-definition>
    <struct-type type-name='entity_activity_statistics' original-name='reportst'>
        <compound name='food'> not a compound
            <int32_t name='total'/>
            <int32_t name='meat'/>
            <int32_t name='fish'/>
            <int32_t name='other'/>
            <int32_t name='seeds'/>
            <int32_t name='plant'/>
            <int32_t name='drink'/>
        </compound>
        <static-array name='unit_counts' type-name='int16_t' count='152' index-enum='profession'/>
        <int16_t name='population'/>
        <int16_t name='menial_exempt'/>
        <int16_t name='omnivores'/>
        <int16_t name='carnivores'/>
        <int16_t name='trained_animals'/>
        <int16_t name='other_animals'/>
        <int16_t name='potential_soldiers'/>
        <int32_t name='combat_aptitude'/>
        <static-array name='item_counts' type-name='int32_t' count='113' index-enum='item_type'/>
        <stl-vector name='created_weapons' type-name='int32_t' index-refers-to='$global.world.raws.itemdefs.weapons[$]'/>
        <compound name='wealth'> not a compound
            <int32_t name='total'/>
            <int32_t name='weapons'/>
            <int32_t name='armor'/>
            <int32_t name='furniture'/>
            <int32_t name='other'/>
            <int32_t name='architecture'/>
            <int32_t name='displayed'/>
            <int32_t name='held'/>
            <int32_t name='imported'/>
            <int32_t name='offered'/>
            <int32_t name='exported'/>
        </compound>
        <static-array name='recent_jobs' count='7'> creature, all, glass, stone, metal, tree, shrub
            <static-array count='258' type-name='int32_t' index-enum='job_type'/>
        </static-array>
        <int32_t name='excavated_tiles' comment='unhidden, subterranean, and excluding map features'/>
        <static-array count='5' type-name='int32_t' name='death_history'/>
        <static-array count='5' type-name='int32_t' name='insanity_history'/>
        <static-array count='5' type-name='int32_t' name='execution_history'/>
        <static-array count='5' type-name='int32_t' name='noble_death_history'/>
        <int32_t name='total_deaths'/>
        <int32_t name='total_insanities'/>
        <int32_t name='total_executions'/>
        <static-array count='4' type-name='int32_t' name='happiness_number'/>
        <int32_t name='num_artifacts'/>
        <int32_t name='invaders_repelled'/>
        <!-- <compound name='knowledge'> --> bay12: knowledgest
        <stl-vector name='discovered_creature_foods' type-name='bool' index-refers-to='(find-creature $)'/>
        <stl-vector name='discovered_creatures' type-name='bool' index-refers-to='(find-creature $)'/>
        <stl-vector name='discovered_plant_foods' type-name='bool' index-refers-to='(find-plant-raw $)'/>
        <stl-vector name='discovered_plants' type-name='bool' index-refers-to='(find-plant-raw $)' comment='allows planting of seeds'/>
        <!-- </compound> -->
        <int16_t name='discovered_water_features'/>
        <int16_t name='discovered_subterranean_features'/>
        <int16_t name='discovered_chasm_features'/>
        <int16_t name='discovered_magma_features'/>
        <int16_t name='discovered_underworld_features'/>
        <int32_t name='migrant_wave_idx' comment='age_in_years'/>
        <stl-vector name='found_minerals' type-name='int32_t' ref-target='inorganic_raw'
                    comment="Added after 'you have struck' announcement"/>
        <bitfield name='found_misc' base-type='uint32_t'> bay12: REPORT_SITE_FLAG_*
            <flag-bit name='deep_special'/>
        </bitfield>
    </struct-type>

    <struct-type type-name='caravan_state' original-name='plot_merchantst'>
        <compound name='total_capacity' type-name='massst'/>
        <enum name='trade_state' base-type='int8_t' comment='bay12: stage'>
            <enum-item name='None'/>
            <enum-item name='Approaching'/>
            <enum-item name='AtDepot'/>
            <enum-item name='Leaving'/>
            <enum-item name='Stuck'/>
        </enum>
        <int8_t name='depot_notified' comment='bay12: havecomplained; has it warned you that you need a depot'/>
        <int16_t name='time_remaining' comment='bay12: timer'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <compound name='activity_stats' type-name='entity_activity_statistics' comment='bay12: report'/>
        <bitfield name='flags' base-type='uint32_t'> bay12: MERCHANTEVENTFLAG_*
            <flag-bit name='check_cleanup' comment='CHECKANDFINALIZE; set each time a merchant leaves the map or dies'/>
            <flag-bit name='casualty' comment='JUSTSPOILED'/>
            <flag-bit name='hardship' comment='WENTBADLY'/>
            <flag-bit name='communicate' comment='SOMEBODYLIVED; send data to mountainhomes'/>
            <flag-bit name='seized' comment='GOODSSEIZED'/>
            <flag-bit name='offended' comment='NOMORETRADE'/>
            <flag-bit comment='UNUSED_07'/>
            <flag-bit name='greatly_offended' comment='OFFENDED'/>
            <flag-bit name='tribute' comment='IS_TRIBUTE_CARAVAN; caravan is delivering tribute (not merchant caravan)'/>
        </bitfield>
        <int32_t name='import_value' comment='bay12: goodsvalue_initial'/>
        <int32_t name='export_value_total' comment='bay12: goodsvalue_end'/>
        <int32_t name='export_value_personal' comment='bay12: exportvalue_end; excluding foreign-produced items'/>
        <int32_t name='offer_value' comment='bay12: offervalue_end'/>
        <stl-vector name='animals' comment='bay12: unitroster' type-name='int32_t' ref-target='unit'/>
        <pointer type-name='entity_sell_prices' name='sell_prices' comment='bay12: tradeagreement'/>
        <pointer type-name='entity_buy_prices' name='buy_prices' comment='bay12: requestagreement'/>
        <stl-vector name='goods' type-name='int32_t' ref-target='item' comment='bay12: already_appraised_item_id'/>
        <int32_t name='mood' init-value='50' comment='bay12: tolerance; reflects satisfaction with last trading session'/>
        <int32_t name='haggle_fail_count'/>
    </struct-type>

    <struct-type type-name='entity_pop_specifierst'>
        <int32_t name='race'/>
        <int32_t name='epid'/>
        <int32_t name='special_controlling_enid'/>
        <int32_t name='breed_id'/>
        <int32_t name='cultural_identity_id'/>
        <int32_t name='interaction_index'/>
        <int32_t name='interaction_effect_index'/>
        <int32_t name='squad_id'/>
        <int32_t name='squad_epp_id'/>
        <int32_t name='wg_culture_reference_enid'/>
    </struct-type>

    <struct-type type-name='world_gen_entity_populationst'>
        <int32_t name='num'/>
        <compound type-name='entity_pop_specifierst' name='pop_spec'/>
    </struct-type>

    <struct-type type-name='world_gen_wandering_groupst'>
        <stl-vector pointer-type='historical_figure' name='wanderer'/>
        <stl-vector pointer-type='world_gen_entity_populationst' name='ent_pop'/>
        <stl-vector pointer-type='world_population' name='rpop'/>
        <pointer type-name='historical_entity' name='ent'/>
        <pointer type-name='world_site' name='cur_location'/>
        <pointer type-name='world_region' name='cur_location_sr'/>
        <pointer type-name='world_underground_region' name='cur_location_fl'/>
        <int32_t name='relocate_delay'/>
        <pointer type-name='wg_site_culturest' name='wg_site_culture'/>
    </struct-type>

    <enum-type type-name='entity_event_type' base-type='int32_t'> bay12: RumorType
        <enum-item name='invasion'/>
        <enum-item name='abduction'/>
        <enum-item name='incident'/>
        <enum-item name='occupation'/>
        <enum-item name='beast'/>
        <enum-item name='group'/>
        <enum-item name='harass'/>
        <enum-item name='flee'/>
        <enum-item name='abandon'/>
        <enum-item name='reclaimed'/>
        <enum-item name='founded'/>
        <enum-item name='reclaiming'/>
        <enum-item name='founding'/>
        <enum-item name='leave'/>
        <enum-item name='insurrection'/>
        <enum-item name='insurrection_end'/>
        <enum-item name='succession'/>
        <enum-item name='claim'/>
        <enum-item name='accept_tribute_offer'/>
        <enum-item name='refuse_tribute_offer'/>
        <enum-item name='accept_tribute_demand'/>
        <enum-item name='refuse_tribute_demand'/>
        <enum-item name='accept_peace_offer'/>
        <enum-item name='refuse_peace_offer'/>
        <enum-item name='cease_tribute_offer'/>
        <enum-item name='artifact_in_site'/>
        <enum-item name='artifact_in_subregion'/>
        <enum-item name='artifact_in_feature_layer'/>
        <enum-item name='artifact_in_inventory'/>
        <enum-item name='artifact_not_in_site'/>
        <enum-item name='artifact_not_in_subregion'/>
        <enum-item name='artifact_not_in_feature_layer'/>
        <enum-item name='artifact_not_in_inventory'/>
        <enum-item name='artifact_was_destroyed'/>
    </enum-type>

    <struct-type type-name='entity_event' original-name='rumorst'>
        <compound name='data' is-union='true'>
            <compound name='invasion'> bay12: rumor_army_marching_to_sitest
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='attack_leader_hf' ref-target='historical_figure'/>
                <int32_t name='attack_commander_hf' ref-target='historical_figure'/>
            </compound>
            <compound name='abduction'> bay12: rumor_hist_figure_abductedst
                <int32_t name='histfig_id' ref-target='historical_figure' comment='abductee'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='abductor_id' ref-target='historical_figure'/>
                <int32_t name='event' ref-target='history_event'/>
            </compound>
            <compound name='incident'> bay12: rumor_incidentst
                <enum name='type' type-name='incident_type'/>
                <int32_t name='incident_id' ref-target='incident'/>
            </compound>
            <compound name='occupation'> bay12: rumor_occupationst
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='leader_hf' ref-target='historical_figure'/>
                <int32_t name='evicted_entity_id' ref-target='historical_entity'/>
            </compound>
            <compound name='beast'> bay12: rumor_beast_presentst
                <int32_t name='histfig_id' ref-target='historical_figure'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='region_id' ref-target='world_region'/>
            </compound>
            <compound name='group'> bay12: rumor_entity_site_presentst
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
            </compound>
            <compound name='harass'> bay12: rumor_army_harassing_sitest
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='army_leader_hf_id' ref-target='historical_figure'/>
            </compound>
            <compound name='flee'> bay12: rumor_refugees_fleeing_armyst
                <int32_t name='refugee_entity_id' ref-target='historical_entity'/>
                <int32_t name='from_site_id' ref-target='world_site'/>
                <int32_t name='army_entity_id' ref-target='historical_entity'/>
                <int32_t name='army_leader_hf_id' ref-target='historical_figure'/>
            </compound>
            <compound name='abandon'> bay12: rumor_refugees_abandon_mismanaged_sitest
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='parent_entity_id' ref-target='historical_entity'/>
            </compound>
            <compound name='reclaimed'> bay12: rumor_site_reclaimedst
                <int32_t name='behalf_entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='reclaimer_entity_id' ref-target='historical_entity'/>
                <int32_t name='leader_hf' ref-target='historical_figure'/>
            </compound>
            <compound name='founded'> bay12: rumor_site_createdst
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='parent_entity_id' ref-target='historical_entity'/>
                <int32_t name='leader_hf' ref-target='historical_figure'/>
            </compound>
            <compound name='reclaiming'> bay12: rumor_reclaim_army_leaving_for_sitest
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='civ_leader_hf' ref-target='historical_figure'/>
                <int32_t name='civ_commander_hf' ref-target='historical_figure'/>
            </compound>
            <compound name='founding'> bay12: rumor_site_creation_army_leavingst
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='region_id' ref-target='world_region'/>
                <int32_t name='civ_leader_hf' ref-target='historical_figure'/>
                <int32_t name='civ_commander_hf' ref-target='historical_figure'/>
            </compound>
            <compound name='leave'> bay12: rumor_occupation_pulling_out_of_sitest
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
            </compound>
            <compound name='insurrection'> bay12: rumor_insurrection_startedst
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='entity_id' ref-target='historical_entity'/>
            </compound>
            <compound name='insurrection_end'> bay12: rumor_insurrection_endedst
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <enum name='result' type-name='insurrection_outcome'/>
            </compound>
            <compound name='succession'> bay12: rumor_new_position_holderst
                <int32_t name='histfig_id' ref-target='historical_figure'/>
                <int32_t name='former_histfig_id' ref-target='historical_figure'/>
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='position_assignment_id' refers-to='$(find-entity $$._parent.entity_id).positions.assignments[$]'/>
            </compound>
            <compound name='claim'> bay12: rumor_site_claimed_by_new_entityst
                <int32_t name='entity_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='histfig_id' ref-target='historical_figure'/>
            </compound>
            <compound name='accept_tribute_offer'> bay12: rumor_entity_agrees_to_accept_tributest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='refuse_tribute_offer'> bay12: rumor_entity_refuses_to_accept_tributest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='accept_tribute_demand'> bay12: rumor_entity_agrees_to_give_tributest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='refuse_tribute_demand'> bay12: rumor_entity_refuses_to_give_tributest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='accept_peace_offer'> bay12: rumor_entity_agrees_to_make_peacest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='refuse_peace_offer'> bay12: rumor_entity_refuses_to_make_peacest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='cease_tribute_offer'> bay12: rumor_entity_cancels_tributest
                <int32_t name='entity1_id' ref-target='historical_entity'/>
                <int32_t name='histfig1_id' ref-target='historical_figure'/>
                <int32_t name='entity2_id' ref-target='historical_entity'/>
                <int32_t name='histfig2_id' ref-target='historical_figure'/>
            </compound>
            <compound name='artifact_in_site'> bay12: rumor_artifact_present_at_sitest
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='structure_id' ref-target='abstract_building'/>
            </compound>
            <compound name='artifact_in_subregion'> bay12: rumor_artifact_present_at_subregionst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='subregion_id' ref-target='world_region'/>
            </compound>
            <compound name='artifact_in_feature_layer'> bay12: rumor_artifact_present_at_feature_layerst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='feature_layer_id' ref-target='world_underground_region'/>
            </compound>
            <compound name='artifact_in_inventory'> bay12: rumor_artifact_held_by_hfst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='hist_figure_id' ref-target='historical_figure'/>
            </compound>
            <compound name='artifact_not_in_site'> bay12: rumor_artifact_not_present_at_sitest
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='site_id' ref-target='world_site'/>
                <int32_t name='structure_id' ref-target='abstract_building'/>
            </compound>
            <compound name='artifact_not_in_subregion'> bay12: rumor_artifact_not_present_at_subregionst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='subregion_id' ref-target='world_region'/>
            </compound>
            <compound name='artifact_not_in_feature_layer'> bay12: rumor_artifact_not_present_at_feature_layerst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='feature_layer_id' ref-target='world_underground_region'/>
            </compound>
            <compound name='artifact_not_in_inventory'> bay12: rumor_artifact_not_held_by_hfst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='hist_figure_id' ref-target='historical_figure'/>
            </compound>
            <compound name='artifact_destroyed'> bay12: rumor_artifact_destroyedst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
            </compound>
        </compound>
        <int32_t name='valid_year' comment="often the same as the other year/tick. Start/stop time?"/>
        <int32_t name='valid_year_tick'/>
        <int32_t name="year"/>
        <int32_t name="year_tick"/>
        <bitfield name='flag' base-type='uint32_t'> bay12: RUMOR_FLAG_*
            <flag-bit name='outmoded'/>
        </bitfield>
        <enum name='type' type-name='entity_event_type'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
