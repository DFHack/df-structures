<data-definition>
    <enum-type type-name='history_event_type' base-type='int16_t'> bay12: HistoryEventType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='WAR_ATTACKED_SITE'/>
        <enum-item name='WAR_DESTROYED_SITE'/>
        <enum-item name='CREATED_SITE'/>
        <enum-item name='HIST_FIGURE_DIED'/>
        <enum-item name='ADD_HF_ENTITY_LINK'/>
        <enum-item name='REMOVE_HF_ENTITY_LINK'/>
        <enum-item name='FIRST_CONTACT'/>
        <enum-item name='FIRST_CONTACT_FAILED'/>
        <enum-item name='TOPICAGREEMENT_CONCLUDED'/>
        <enum-item name='TOPICAGREEMENT_REJECTED'/>
        <enum-item name='TOPICAGREEMENT_MADE'/>
        <enum-item name='WAR_PEACE_ACCEPTED'/>
        <enum-item name='WAR_PEACE_REJECTED'/>
        <enum-item name='DIPLOMAT_LOST'/>
        <enum-item name='AGREEMENTS_VOIDED'/>
        <enum-item name='MERCHANT'/>

        <enum-item name='ARTIFACT_HIDDEN'/>
        <enum-item name='ARTIFACT_POSSESSED'/>
        <enum-item name='ARTIFACT_CREATED'/>
        <enum-item name='ARTIFACT_LOST'/>
        <enum-item name='ARTIFACT_FOUND'/>
        <enum-item name='ARTIFACT_RECOVERED'/>
        <enum-item name='ARTIFACT_DROPPED'/>
        <enum-item name='RECLAIM_SITE'/>
        <enum-item name='HF_DESTROYED_SITE'/>
        <enum-item name='SITE_DIED'/>
        <enum-item name='SITE_RETIRED'/>
        <enum-item name='ENTITY_CREATED'/>
        <enum-item name='ENTITY_ACTION'/>
        <enum-item name='ENTITY_INCORPORATED'/>
        <enum-item name='CREATED_BUILDING'/>
        <enum-item name='REPLACED_BUILDING'/>

        <enum-item name='ADD_HF_SITE_LINK'/>
        <enum-item name='REMOVE_HF_SITE_LINK'/>
        <enum-item name='ADD_HF_HF_LINK'/>
        <enum-item name='REMOVE_HF_HF_LINK'/>
        <enum-item name='ENTITY_RAZED_BUILDING'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_CONSTRUCT'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_DYE_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM_IMPROVEMENT'/>
        <enum-item name='MASTERPIECE_CREATED_FOOD'/>
        <enum-item name='MASTERPIECE_CREATED_ENGRAVING'/>
        <enum-item name='MASTERPIECE_LOST'/>
        <enum-item name='CHANGE_HF_STATE'/>
        <enum-item name='CHANGE_HF_JOB'/>
        <enum-item name='WAR_FIELD_BATTLE'/>

        <enum-item name='WAR_PLUNDERED_SITE'/>
        <enum-item name='WAR_SITE_NEW_LEADER'/>
        <enum-item name='WAR_SITE_TRIBUTE_FORCED'/>
        <enum-item name='WAR_SITE_TAKEN_OVER'/>
        <enum-item name='BODY_ABUSED'/>
        <enum-item name='HIST_FIGURE_ABDUCTED'/>
        <enum-item name='ITEM_STOLEN'/>
        <enum-item name='HF_RAZED_BUILDING'/>
        <enum-item name='CREATURE_DEVOURED'/>
        <enum-item name='HIST_FIGURE_WOUNDED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_BATTLE_EVENT'/>
        <enum-item name='CREATED_WORLD_CONSTRUCTION'/>
        <enum-item name='HIST_FIGURE_REUNION'/>
        <enum-item name='HIST_FIGURE_REACH_SUMMIT'/>
        <enum-item name='HIST_FIGURE_TRAVEL'/>
        <enum-item name='HIST_FIGURE_NEW_PET'/>

        <enum-item name='ASSUME_IDENTITY'/>
        <enum-item name='CREATE_ENTITY_POSITION'/>
        <enum-item name='CHANGE_CREATURE_TYPE'/>
        <enum-item name='HIST_FIGURE_REVIVED'/>
        <enum-item name='HF_LEARNS_SECRET'/>
        <enum-item name='CHANGE_HF_BODY_STATE'/>
        <enum-item name='HF_ACT_ON_BUILDING'/>
        <enum-item name='HF_DOES_INTERACTION'/>
        <enum-item name='HF_CONFRONTED'/>
        <enum-item name='ENTITY_LAW'/>
        <enum-item name='HF_GAINS_SECRET_GOAL'/>
        <enum-item name='ARTIFACT_STORED'/>
        <enum-item name='AGREEMENT_FORMED'/>
        <enum-item name='SITE_DISPUTE'/>
        <enum-item name='AGREEMENT_CONCLUDED'/>
        <enum-item name='INSURRECTION_STARTED'/>

        <enum-item name='INSURRECTION_ENDED'/>
        <enum-item name='HF_ATTACKED_SITE'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='KNOWLEDGE_DISCOVERED'/>
        <enum-item name='ARTIFACT_TRANSFORMED'/>
        <enum-item name='ARTIFACT_DESTROYED'/>
        <enum-item name='HF_RELATIONSHIP_DENIED'/>
        <enum-item name='REGIONPOP_INCORPORATED_INTO_ENTITY'/>
        <enum-item name='POETIC_FORM_CREATED'/>
        <enum-item name='MUSICAL_FORM_CREATED'/>
        <enum-item name='DANCE_FORM_CREATED'/>
        <enum-item name='WRITTEN_CONTENT_COMPOSED'/>
        <enum-item name='CHANGE_HF_MOOD'/>

        <enum-item name='ARTIFACT_CLAIM_FORMED'/>
        <enum-item name='ARTIFACT_GIVEN'/>
        <enum-item name='HF_ACT_ON_ARTIFACT'/>
        <enum-item name='HF_RECRUITED_UNIT_TYPE_FOR_ENTITY'/>
        <enum-item name='HFS_FORMED_REPUTATION_RELATIONSHIP'/>
        <enum-item name='ARTIFACT_COPIED'/>
        <enum-item name='SNEAK_INTO_SITE'/>
        <enum-item name='SPOTTED_LEAVING_SITE'/>
        <enum-item name='ENTITY_SEARCHED_SITE'/>
        <enum-item name='HF_FREED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_ACTION'/>
        <enum-item name='ENTITY_RAMPAGED_IN_SITE'/>
        <enum-item name='ENTITY_FLED_SITE'/>
        <enum-item name='TACTICAL_SITUATION'/>
        <enum-item name='SQUAD_VS_SQUAD'/>
        <enum-item name='SITE_SURRENDERED'/>
        <enum-item name='ENTITY_EXPELS_HF'/>

        <enum-item name='TRADE' since='v0.47.01'/>
        <enum-item name='ADD_ENTITY_SITE_PROFILE_FLAG'/>
        <enum-item name='GAMBLE'/>
        <enum-item name='ADD_HF_ENTITY_HONOR'/>
        <enum-item name='ENTITY_DISSOLVED'/>
        <enum-item name='ENTITY_EQUIPMENT_PURCHASE'/>
        <enum-item name='MODIFIED_BUILDING'/>
        <enum-item name='BUILDING_PROFILE_ACQUIRED'/>
        <enum-item name='HF_PREACH'/>
        <enum-item name='ENTITY_PERSECUTED'/>
        <enum-item name='ENTITY_BREACH_FEATURE_LAYER'/>
        <enum-item name='ENTITY_ALLIANCE_FORMED'/>
        <enum-item name='HF_RANSOMED'/>
        <enum-item name='HF_ENSLAVED'/>
        <enum-item name='SABOTAGE'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
        <enum-item name='HFS_FORMED_INTRIGUE_RELATIONSHIP'/>
        <enum-item name='FAILED_INTRIGUE_CORRUPTION'/>
        <enum-item name='HF_CONVICTED'/>
        <enum-item name='FAILED_FRAME_ATTEMPT'/>
        <enum-item name='HF_INTERROGATED'/>
    </enum-type>

    <enum-type type-name='history_event_flags'> bay12: HistoryEventFlagType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='hidden' comment='event is hidden from legends mode when this is set'/>
        <enum-item name='realized'/>
        <enum-item name='has_support_structure' comment='related to intrigues'/>
    </enum-type>

    <class-type type-name='history_event' original-name='history_eventst'
                instance-vector='$global.world.history.events' key-field='id'>
        <int32_t name='year'/>
        <int32_t name='seconds'/>
        <df-flagarray name='flags' index-enum='history_event_flags'/>
        <int32_t name='id'/>

        <virtual-methods>
            <vmethod ret-type='history_event_type' name='getType'/>
            <vmethod ret-type='int32_t' name='getWarStatus'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getAngerModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getHappinessModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='bool' name='madeFirstContact'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>

            <vmethod ret-type='int32_t' name='getKilledHistfigID'>
                <int32_t name='killer' ref-target='historical_figure'/>
                <ret-type><int32_t ref-target='historical_figure'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigKilled'>
                <int32_t name='victim' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigRevived'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='get_subregion_encased_hfid'> once used for 40d HFS
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='get_hfid_encased_srid'> once used for 40d HFS
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>

            -- 10

            <vmethod name='getRelatedHistfigIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_figure'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteStructureIDs'>
                <pointer name='vec1'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
                <pointer name='vec2'><stl-vector type-name='int32_t' ref-target='abstract_building'/></pointer>
            </vmethod>
            <vmethod name='getRelatedArtifactIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='artifact_record'/></pointer>
            </vmethod>
            <vmethod name='getRelatedRegionIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_region'/></pointer>
            </vmethod>

            <vmethod name='getRelatedLayerIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_underground_region'/></pointer>
            </vmethod>
            <vmethod name='getRelatedEntityIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_entity'/></pointer>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteID'>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteStructure'>
                <int32_t name='site' ref-target='world_site'/>
                <int32_t name='structure' ref-target='abstract_building'/>
            </vmethod>

            -- 20

            <vmethod ret-type='bool' name='isRelatedToArtifactID'>
                <int32_t name='artifact' ref-target='artifact_record'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToRegionID'>
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToLayerID'>
                <int32_t name='region' ref-target='world_underground_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityPopulation'>
                <int32_t name='pop' ref-target='entity_population'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityID'>
                <int32_t name='entity' ref-target='historical_entity'/>
            </vmethod>

            <vmethod ret-type='bool' name='isRelatedToBreed'>
                <int32_t name='breed' ref-target='breed'/>
            </vmethod>
            <vmethod name='getSentence'>
                <pointer type-name='stl-string' name='str'/> "In x, some event happened"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='getPhrase'>
                <pointer type-name='stl-string' name='str'/> "the happening of some event"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='populateArtImage'>
                <pointer type-name='art_image' name='image'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getImportance'/>

            -- 30

            <vmethod ret-type='int32_t' name='getEraImportance'/>
            <vmethod ret-type='bool' name='isChangedHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod name='categorize' comment='inserts event into world_history.events_death if relevant'/>
            <vmethod name='uncategorize' comment='removes event from world_history.events_death if relevant'/>
            <vmethod name='generate_xml'>
                <pointer type-name='stl-fstream'/>
                <int32_t name='indent'/>
            </vmethod>

            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod name='add_to_classes' comment='records event in historical_entity.diplomacy in both directions if applicable'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_sneak_into_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_rampaged_in_sitest' inherits-from='history_event'>
        <int32_t name='rampage_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_fled_sitest' inherits-from='history_event'>
        <int32_t name='fled_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='site_search_result_type' base-type='int32_t'> bay12: SiteSearchResultType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='FoundNothing'/>
    </enum-type>

    <class-type type-name='history_event_entity_searched_sitest' inherits-from='history_event'>
        <int32_t name='searcher_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='result' type-name='site_search_result_type'/>
    </class-type>

    <bitfield-type type-name='history_event_war_field_battle_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_FIELD_BATTLE_FLAG_*
        <flag-bit name='attacker_scout'/>
        <flag-bit name='defender_scout'/>
    </bitfield-type>

    <class-type type-name='history_event_war_field_battlest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' base-type='uint32_t' type-name='history_event_war_field_battle_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_war_attacked_site_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_ATTACKED_SITE_FLAG_*
        <flag-bit name='attacker_scout'/>
        <flag-bit name='defender_scout'/>
    </bitfield-type>

    <class-type type-name='history_event_war_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' base-type='uint32_t' type-name='history_event_war_attacked_site_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_war_destroyed_site_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_DESTROYED_SITE_FLAG_*
        <flag-bit name='no_defeat_mention'/>
    </bitfield-type>

    <class-type type-name='history_event_war_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='spec_flag' base-type='uint32_t' type-name='history_event_war_destroyed_site_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_war_plundered_site_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_PLUNDERED_SITE_FLAG_*
        <flag-bit name='no_defeat_mention'/>
        <flag-bit name='detected'/>
        <flag-bit name='items'/>
        <flag-bit name='livestock'/>
        <flag-bit name='was_raid'/>
    </bitfield-type>

    <class-type type-name='history_event_war_plundered_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='spec_flag' base-type='uint32_t' type-name='history_event_war_plundered_site_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_war_site_tribute_forced_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_SITE_TRIBUTE_FORCED_FLAG_*
        <flag-bit name='bled_dry' comment='tribute was demanded, but not received'/>
    </bitfield-type>

    <class-type type-name='history_event_war_site_tribute_forcedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum base-type='int32_t' type-name='season' name='season'/> enum size currently mismatched
        <bitfield name='tribute_flags' base-type='uint32_t' type-name='history_event_war_site_tribute_forced_flag'/>
    </class-type>

    <class-type type-name='history_event_war_site_new_leaderst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='new_leaders' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_war_site_taken_overst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_surrenderedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_add_entity_site_profile_flagst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='added_flags' type-name='entity_site_link_flags'/>
    </class-type>

    <class-type type-name='history_event_hf_freedst' inherits-from='history_event'>
        <int32_t name='freeing_civ' ref-target='historical_entity'/>
        <int32_t name='freeing_hf' ref-target='historical_figure'/>
        <int32_t name='holding_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='rescued_hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_hf_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_spotted_leaving_sitest' inherits-from='history_event'>
        <int32_t name='spotter_hf' ref-target='historical_figure'/>
        <int32_t name='leaver_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hf_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <bitfield-type type-name='history_event_site_died_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_SITE_DIED_FLAG_*
        <flag-bit name='abandoned'/>
    </bitfield-type>

    <class-type type-name='history_event_site_diedst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_site_died_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_site_retired_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_SITE_RETIRED_FLAG_*
        <flag-bit name='first_time'/>
    </bitfield-type>

    <class-type type-name='history_event_site_retiredst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_site_retired_flag'/>
    </class-type>

    <class-type type-name='history_event_created_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='resident_civ_id' ref-target='historical_entity' since='v0.47.01'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='builder_hf' ref-target='historical_figure' since='v0.40.01'/>
    </class-type>

    <bitfield-type type-name='history_event_created_building_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_CREATED_BUILDING_FLAG_*
        <flag-bit name='rebuild'/>
    </bitfield-type>

    <class-type type-name='history_event_created_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='builder_hf' ref-target='historical_figure'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_created_building_flag'/>
    </class-type>

    <class-type type-name='history_event_replaced_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='old_structure' ref-target='abstract_building'/>
        <int32_t name='new_structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_entity_razed_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_razed_buildingst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <enum-type type-name='hf_building_action_type' base-type='int32_t'> bay12: HFBuildingActionType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='Profane'/>
        <enum-item name='Disturb'/>
        <enum-item name='PrayedInside'/>
    </enum-type>

    <class-type type-name='history_event_hf_act_on_buildingst' inherits-from='history_event'>
        <enum name='action' type-name='hf_building_action_type'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <enum-type type-name='hf_artifact_action_type' base-type='int32_t'> bay12: HFArtifactActionType
        <enum-item name='View'/>
        <enum-item name='AskAbout'/>
    </enum-type>

    <class-type type-name='history_event_hf_act_on_artifactst' inherits-from='history_event'>
        <enum name='action' type-name='hf_artifact_action_type'/>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_created_world_constructionst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='construction'/>
        <int32_t name='master_construction'/>
        <int32_t name='site1' ref-target='world_site'/>
        <int32_t name='site2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_insurrection_startedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_insurrection_endedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='outcome' type-name='insurrection_outcome'/>
    </class-type>

    <bitfield-type type-name='history_event_reclaim_site_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_RECLAIM_SITE_FLAG_*
        <flag-bit name='unretire'/>
    </bitfield-type>

    <class-type type-name='history_event_reclaim_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_reclaim_site_flag'/>
    </class-type>

    <class-type type-name='history_event_creature_devouredst' inherits-from='history_event'>
        <int32_t name='victim' ref-target='historical_figure'/>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='eater' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <bitfield-type type-name='history_event_hist_figure_wounded_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_HIST_FIGURE_WOUNDED_FLAG_*
        <flag-bit name='torture'/>
    </bitfield-type>

    <class-type type-name='history_event_hist_figure_woundedst' inherits-from='history_event'>
        <int32_t name='woundee' ref-target='historical_figure'/>
        <int32_t name='wounder' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='woundee_race' ref-target='creature_raw'/>
        <int16_t name='woundee_caste' ref-target='caste_raw' aux-value='$$.woundee_race'/>
        <int16_t name='body_part'/>
        <enum name='injury_type' type-name='history_damage_type'/>
        <bool name='part_lost'/>
        <bitfield name='flags2' base-type='uint32_t' since='v0.47.01' type-name='history_event_hist_figure_wounded_flag'/>
    </class-type>

    <enum-type type-name='history_event_simple_battle_subtype' base-type='int16_t'> bay12: SimpleBattleEventType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='SCUFFLE'/>
        <enum-item name='ATTACK'/>
        <enum-item name='SURPRISE'/>
        <enum-item name='AMBUSH'/>
        <enum-item name='HAPPEN_UPON'/>
        <enum-item name='CORNER'/>
        <enum-item name='CONFRONT'/>
        <enum-item name='LOSE_AFTER_RECEIVE_WOUND'/>
        <enum-item name='LOSE_AFTER_INFLICT_WOUND'/>
        <enum-item name='LOSE_AFTER_EXCHANGE_WOUND'/>
        <enum-item name='SUBDUED'/>
        <enum-item name='GOT_INTO_A_BRAWL'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_battle_eventst' inherits-from='history_event'>
        <stl-vector name='group1' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='group2' type-name='int32_t' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <enum name='subtype' type-name='history_event_simple_battle_subtype'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reach_summitst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <bitfield-type type-name='history_event_hist_figure_travel_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_HIST_FIGURE_TRAVEL_FLAG_*
        <flag-bit name='is_return'/>
        <flag-bit name='is_escape'/>
    </bitfield-type>

    <class-type type-name='history_event_hist_figure_travelst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <bitfield name='reason' base-type='uint32_t' type-name='history_event_hist_figure_travel_flag'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <enum-type type-name='simple_action_type' base-type='int32_t'> bay12: HistoryEventHistFigureSimpleActionType
        <enum-item name='carouse'/>
        <enum-item name='purchase_well_crafted_equipment'/>
        <enum-item name='purchase_finely_crafted_equipment'/>
        <enum-item name='purchase_superior_equipment'/>
        <enum-item name='purchase_exceptional_equipment'/>
        <enum-item name='purchase_masterwork_equipment'/>
        <enum-item name='performe_horrible_experiments'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_actionst' inherits-from='history_event'>
        <stl-vector name='group_hfs' type-name='int32_t' ref-target='historical_figure'/>
        <enum name='type' type-name='simple_action_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_new_petst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='pets' type-name='int16_t' ref-target='creature_raw'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reunionst' inherits-from='history_event'>
        <stl-vector name='missing' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='reunited_with' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='assistant' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <bitfield-type type-name='history_event_hist_figure_revived_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_HIST_FIGURE_REVIVED_FLAG_*
        <flag-bit name='again'/>
        <flag-bit name='disturbance'/>
    </bitfield-type>

    <class-type type-name='history_event_hist_figure_revivedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum name='ghost_type' type-name='ghost_type'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_hist_figure_revived_flag'/>
        <int32_t name='actor_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='interaction' ref-target='interaction' since='v0.47.02'/>
        <int32_t name='interaction_effect' init-value='0' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_gains_secret_goalst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='goal' type-name='goal_type'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <bitfield-type type-name='history_event_knowledge_discovered_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_KNOWLEDGE_DISCOVERED_FLAG_*
        <flag-bit name='first'/>
    </bitfield-type>

    <class-type type-name='history_event_knowledge_discoveredst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <compound name='knowledge' type-name='knowledge_scholar_category_flag'/>
        <bitfield name='spec_flag' base-type='uint32_t' type-name='history_event_knowledge_discovered_flag'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_diedst' inherits-from='history_event'>
        <int32_t name='victim_hf' ref-target='historical_figure'/>

        <int32_t name='slayer_hf' ref-target='historical_figure'/>
        <int32_t name='slayer_race' ref-target='creature_raw'/>
        <int32_t name='slayer_caste' ref-target='caste_raw' aux-value='$$.slayer_race'/>

        <compound name='weapon'> not a compound
            <int32_t name='item' ref-target='item'/>
            <enum name='item_type' type-name='item_type'/>
            <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

            <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
            <int32_t name='matindex'/>

            -- If shot by a ranged weapon:
            <int32_t name='shooter_item' ref-target='item'/>
            <enum name='shooter_item_type' type-name='item_type'/>
            <int16_t name='shooter_item_subtype' refers-to='(item-subtype-target $$._parent.shooter_item_type $)'/>
            <int16_t name='shooter_mattype' ref-target='material' aux-value='$$.shooter_matindex'/>
            <int32_t name='shooter_matindex'/>
        </compound>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <enum name='death_cause' type-name='death_type'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_abductedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='snatcher' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_failed_intrigue_corruptionst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity' ref-target='identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity' ref-target='identity'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_intrigue_relationshipst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity' ref-target='identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity' ref-target='identity'/>
      <enum name='target_role' type-name='plot_role_type'/>
      <enum name='corruptor_role' type-name='plot_role_type'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_reputation_relationshipst' inherits-from='history_event'>
        <int32_t name='histfig1' ref-target='historical_figure'/>
        <int32_t name='identity1' ref-target='identity'/>
        <int32_t name='histfig2' ref-target='historical_figure'/>
        <int32_t name='identity2' ref-target='identity'/>
        <enum name='rep1' type-name='reputation_type'/>
        <enum name='rep2' type-name='reputation_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hf_recruited_unit_type_for_entityst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='profession' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_expels_hfst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='expelled' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own, or an occupation ID'/>
        <int32_t name='appointer_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='promise_to_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own, or an occupation ID'/>
    </class-type>

    <enum-type type-name='confrontation_situation_type' base-type='int32_t'> bay12: ConfrontationSituationType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='GENERAL_SUSPICION'/>
    </enum-type>

    <enum-type type-name='confrontation_reason_type' base-type='int32_t'> bay12: ConfrontationReasonType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='AGELESS'/>
        <enum-item name='MURDER'/>
    </enum-type>

    <class-type type-name='history_event_hf_confrontedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <enum name='situation' type-name='confrontation_situation_type'/>
        <stl-vector name='reasons' type-name='confrontation_reason_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hf_relationship_deniedst' inherits-from='history_event'>
        <int32_t name='seeker_hf' ref-target='historical_figure'/>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <enum name='type' type-name='unit_relationship_type'/>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_change_hf_statest' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum name='state' type-name='whereabouts_type'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_body_statest' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='body_state' type-name='histfig_body_state'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_jobst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum name='new_job' type-name='profession'/>
        <enum name='old_job' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_add_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_add_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_first_contactst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='contacted' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contact_failedst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='rejector' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_concludedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='result' comment='range from -3 to +2'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_madest' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='site_dispute_type' base-type='int32_t'> bay12: DisputeType
        <enum-item name='Territory'/>
        <enum-item name='WaterRights'/>
        <enum-item name='GrazingRights'/>
        <enum-item name='FishingRights'/>
        <enum-item name='RightsOfWay'/>
        <enum-item name='LivestockOwnership'/>
    </enum-type>

    <class-type type-name='history_event_site_disputest' inherits-from='history_event'>
        <enum name='dispute_type' type-name='site_dispute_type'/>
        <int32_t name='entity_1' ref-target='historical_entity'/>
        <int32_t name='entity_2' ref-target='historical_entity'/>
        <int32_t name='site_1' ref-target='world_site'/>
        <int32_t name='site_2' ref-target='world_site'/>
    </class-type>

    <bitfield-type type-name='history_event_agreement_formed_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_AGREEMENT_FORMED_FLAG_*
        <flag-bit name='delegated'/>
    </bitfield-type>

    <class-type type-name='history_event_agreement_formedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <bitfield name='spec_flag' base-type='uint32_t' type-name='history_event_agreement_formed_flag'/>
    </class-type>

    <class-type type-name='history_event_agreement_concludedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <int32_t name='subject_id'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='concluder_hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_war_peace_acceptedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_diplomat_lostst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='involved' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    -- Unused: body_abuse_datast

    <class-type type-name='history_event_body_abusedst' inherits-from='history_event'>
        <stl-vector name='bodies' ref-target='historical_figure' type-name='int32_t'/>
        <int32_t name='victim_entity' ref-target='historical_entity'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <enum name='abuse_type' base-type='int16_t' type-name='body_abuse_method_type'/>
        <compound name='abuse_data' is-union='true'>
            <compound name='Impaled'>
                <enum name='item_type' type-name='item_type' base-type='int32_t' comment='always WEAPON?'/>
                <int32_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
                <int32_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index'/>
            </compound>
            <compound name='Piled'>
                <enum name='pile_type' base-type='int32_t' type-name='body_abuse_sculpture_type'/>
            </compound>
            <compound name='Flayed'>
                <int32_t name='structure' ref-target='abstract_building'/>
            </compound>
            <compound name='Hung'>
                <int32_t name='tree' ref-target='plant_raw'/>
                <int32_t name='mat_type' ref-target='material' aux-value='$$.mat_index' comment='rope'/>
                <int32_t name='mat_index' comment='rope'/>
            </compound>
            <compound name='Animated'>
                <int32_t name='interaction' ref-target='interaction'/>
            </compound>
        </compound>
    </class-type>

    <class-type type-name='history_event_agreements_voidedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
    </class-type>

    <enum-type type-name='history_event_merchant_flags'> bay12: HistoryEventMerchantFlagType
        <enum-item name='vanished' comment='opposite of communicate in caravan_state'/>
        <enum-item name='hardship'/>
        <enum-item name='seized'/>
        <enum-item name='offended'/>
        <enum-item name='missing_goods'/>
        <enum-item name='tribute'/>
    </enum-type>

    <class-type type-name='history_event_merchantst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity' comment='site government'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2' index-enum='history_event_merchant_flags'/>
    </class-type>

    <class-type type-name='history_event_tradest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity' comment='the guild to which the figure belongs?'/>
      <int32_t name='source_site' ref-target='world_site'/>
      <int32_t name='dest_site' ref-target='world_site'/>
      <int32_t name='production_zone'/>
      <enum name='allotment' type-name='resource_allotment_specifier_type'/>
      <int32_t name='allotment_index'/>
      <int32_t name='account_shift'/>
    </class-type>

    <class-type type-name='history_event_gamblest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure'/>
      <int32_t name='account_before'/>
      <int32_t name='account_after'/>
    </class-type>

    <class-type type-name='history_event_artifact_hiddenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_storedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='building' comment="Guess. the values seen are low numbers. Legends doesn't provide any additional info"/>
    </class-type>

    <class-type type-name='history_event_artifact_possessedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='feature_layer_id' ref-target="world_underground_region"/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <bitfield-type type-name='history_event_artifact_created_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_CREATED_FLAG_*
        <flag-bit name='name_only'/>
    </bitfield-type>

    <class-type type-name='history_event_artifact_createdst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='creator_unit_id' ref-target='unit' comment='the unit who created the artifact'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' comment='the figure who created the artifact'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_artifact_created_flag'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_artifact_transformedst' inherits-from='history_event'>
        <int32_t name='new_artifact' ref-target='artifact_record'/>
        <stl-vector name='old_artifact' ref-target='artifact_record' type-name='int32_t'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <bitfield-type type-name='history_event_artifact_copied_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_COPIED_FLAG_*
        <flag-bit name='from_original'/>
    </bitfield-type>

    <class-type type-name='history_event_artifact_copiedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='entity_dest' ref-target='historical_entity'/>
        <int32_t name='entity_src' ref-target='historical_entity'/>
        <int32_t name='site_dest' ref-target='world_site'/>
        <int32_t name='site_src' ref-target='world_site'/>
        <int32_t name='structure_dest' ref-target='abstract_building'/>
        <int32_t name='structure_src' ref-target='abstract_building'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_artifact_copied_flag'/>
    </class-type>

    <class-type type-name='history_event_artifact_destroyedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='destroyer_hf' ref-target='historical_figure'/>
        <int32_t name='destroyer_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_artifact_lostst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='layer_id' since='v0.47.01' ref-target="world_underground_region"/>
    </class-type>

    <class-type type-name='history_event_artifact_foundst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id' since='v0.47.02' init-value='-1'/>
        <int32_t name='subregion_id' since='v0.47.02' ref-target='world_region'/>
        <int32_t name='layer_id' since='v0.47.02' ref-target="world_underground_region"/>
    </class-type>

    <class-type type-name='history_event_item_stolenst' inherits-from='history_event'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        <int32_t name='item' ref-target='item'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='stash_site' ref-target='world_site' comment="location to which the thief brought the loot"/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
        <enum name='theft_method' type-name='theft_method_type'/>
    </class-type>

    <class-type type-name='history_event_artifact_recoveredst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <enum-type type-name='history_event_artifact_dropped_flags'> bay12: HistoryEventArtifactDroppedFlagType
        <enum-item name='injury'/>
    </enum-type>

    <class-type type-name='history_event_artifact_droppedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2' index-enum='history_event_artifact_dropped_flags'/>
    </class-type>

    <class-type type-name='history_event_entity_lawst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <bitfield name='add_flags' base-type='uint32_t' type-name='entity_law_flag'/>
        <bitfield name='remove_flags' base-type='uint32_t' type-name='entity_law_flag'/>
    </class-type>

    <class-type type-name='history_event_entity_createdst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <enum-type type-name='entity_action_type' base-type='int32_t'> bay12: EntityActionType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='entity_primary_criminals'/>
        <enum-item name='entity_relocate'/>
    </enum-type>

    <class-type type-name='history_event_entity_actionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <enum name='action' type-name='entity_action_type'/>
    </class-type>

    <class-type type-name='history_event_regionpop_incorporated_into_entityst' inherits-from='history_event'>
        <int32_t name='pop_race' ref-target='creature_raw'/>
        <int32_t name='number_moved'/>
        <int32_t name='pop_region' ref-target='world_region'/>
        <int32_t name='pop_layer' ref-target='world_underground_region'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <bitfield-type type-name='history_event_entity_incorporated_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_ENTITY_INCORPORATED_FLAG_*
        <flag-bit name='partial'/>
    </bitfield-type>

    <class-type type-name='history_event_entity_incorporatedst' inherits-from='history_event'>
        <int32_t name='migrant_entity' ref-target='historical_entity'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='leader_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t' type-name='history_event_entity_incorporated_flag'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_createdst' inherits-from='history_event'>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='maker_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="skill_at_time" type-name='skill_rating'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_constructst' inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='building_type'/>
        <int16_t name='building_subtype'/>
        <int32_t name='building_custom'/>
        <int32_t name='building_id' ref-target='building'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_itemst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index' comment='not int32'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_dye_itemst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
        <int16_t name='dye_mat_type' ref-target='material' aux-value='$$.dye_mat_index'/>
        <int32_t name='dye_mat_index'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_item_improvementst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
        <enum name='improvement_type' type-name='improvement_type' base-type='int16_t'/>
        <int32_t name='improvement_subtype'/>
        <int16_t name='imp_mat_type' ref-target='material' aux-value='$$.imp_mat_index'/>
        <int32_t name='imp_mat_index'/>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_foodst'
                inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='item_subtype' refers-to='$global.world.raws.itemdefs.food[$]'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_engravingst'
                inherits-from='history_event_masterpiece_createdst'>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_lostst' inherits-from='history_event'>
        <int32_t name='creation_event' ref-target='history_event'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="method" type-name='masterpiece_loss_type' base-type='int16_t'/>
    </class-type>

    <class-type type-name='history_event_hf_learns_secretst' inherits-from='history_event'>
        <int32_t name='student' ref-target='historical_figure'/>
        <int32_t name='teacher' ref-target='historical_figure'/>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='interaction_effect'/>
    </class-type>

    <class-type type-name='history_event_change_creature_typest' inherits-from='history_event'>
        <int32_t name='changee' ref-target='historical_figure'/>
        <int32_t name='changer' ref-target='historical_figure'/>
        <int32_t name='old_race' ref-target='creature_raw'/>
        <int32_t name='old_caste' ref-target='caste_raw' aux-value='$$.race_from'/>
        <int32_t name='new_race' ref-target='creature_raw'/>
        <int32_t name='new_caste' ref-target='caste_raw' aux-value='$$.race_to'/>
    </class-type>

    <class-type type-name='history_event_assume_identityst' inherits-from='history_event'>
        <int32_t name='trickster' ref-target='historical_figure'/>
        <int32_t name='identity' ref-target='identity'/>
        <int32_t name='target' ref-target='historical_entity'/>
    </class-type>

    <enum-type type-name='position_creation_reason_type' base-type='int16_t'> bay12: EntityPositionCreationType
        <enum-item name='force_of_argument'/>
        <enum-item name='threat_of_violence'/>
        <enum-item name='collaboration'/>
        <enum-item name='wave_of_popular_support'/>
        <enum-item name='as_a_matter_of_course'/>
    </enum-type>

    <class-type type-name='history_event_create_entity_positionst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='position'/> historical_entity.position
        <enum name='reason' type-name='position_creation_reason_type'/>
    </class-type>

    <class-type type-name='history_event_hf_does_interactionst' inherits-from='history_event'>
        <int32_t name='doer' ref-target='historical_figure'/>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='source' ref-target='interaction_source' aux-value='$$.interaction'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_performancest' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_competitionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <stl-vector name='competitor_hf' ref-target='historical_figure' type-name='int32_t'/>
        <stl-vector name='winner_hf' ref-target='historical_figure' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_processionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_ceremonyst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_poetic_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='poetic_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_musical_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='musical_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_dance_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='dance_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_written_content_composedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='content' ref-target='written_content'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_change_hf_moodst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='mood' type-name='mood_type'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_artifact_claim_formedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='position_profile'/>
        <enum name='claim_type' type-name='artifact_claim_type'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <bitfield-type type-name='history_event_artifact_given_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_GIVEN_FLAG_*
        <flag-bit name='inherited'/>
    </bitfield-type>

    <class-type type-name='history_event_artifact_givenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='giver_hf' ref-target='historical_figure'/>
        <int32_t name='giver_entity' ref-target='historical_entity'/>
        <int32_t name='receiver_hf' ref-target='historical_figure'/>
        <int32_t name='receiver_entity' ref-target='historical_entity'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
        <bitfield name='spec_flag' base-type='uint32_t' type-name='history_event_artifact_given_flag'/>
    </class-type>

    <enum-type type-name='tactical_situation' base-type='int32_t'> bay12: TacticalSituationType
        <enum-item name='attacker_strongly_favored'/>
        <enum-item name='attacker_favored'/>
        <enum-item name='attacker_slightly_favored'/>
        <enum-item name='defender_strongly_favored'/>
        <enum-item name='defender_favored'/>
        <enum-item name='defender_slightly_favored'/>
        <enum-item name='neither_favored'/>
    </enum-type>

    <bitfield-type type-name='history_event_tactical_situation_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_TACTICAL_SITUATION_FLAG_*
        <flag-bit name='start'/>
    </bitfield-type>

    <class-type type-name='history_event_tactical_situationst' inherits-from='history_event'>
        <int32_t name='a_tactician_hfid' ref-target='historical_figure'/>
        <int32_t name='d_tactician_hfid' ref-target='historical_figure'/>

        <int32_t name='a_tactics_roll'/>
        <int32_t name='d_tactics_roll'/>

        <enum name='situation' type-name='tactical_situation'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <bitfield name='tactics_flags' base-type='uint32_t' type-name='history_event_tactical_situation_flag'/>
    </class-type>

    <class-type type-name='history_event_squad_vs_squadst' inherits-from='history_event'>
        <int32_t name='a_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='a_leadership_roll'/>
        <stl-vector name='a_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='a_squad_id'/>
        <int32_t name='a_race' ref-target='creature_raw'/>
        <int32_t name='a_interaction'/>
        <int32_t name='a_effect'/>
        <int32_t name='a_number'/>
        <int32_t name='a_slain'/>

        <int32_t name='d_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='d_leadership_roll'/>
        <stl-vector name='d_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='d_squad_id'/>
        <int32_t name='d_race' ref-target='creature_raw'/>
        <int32_t name='d_interaction'/>
        <int32_t name='d_effect'/>
        <int32_t name='d_number'/>
        <int32_t name='d_slain'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_honorst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity_id' ref-target='historical_entity'/>
      <int32_t name='hfid' ref-target='historical_figure'/>
      <int32_t name='honor_id' comment='index into historical_entity.honors'/>
    </class-type>

    <class-type type-name='history_event_entity_dissolvedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <compound name='circumstance'> not a compound
            <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
            <compound name='data' type-name='circumstance_id'/>
        </compound>
        <compound name='reason'> not a compound
            <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
            <compound name='data' type-name='history_event_reason_id'/>
        </compound>
    </class-type>

    <class-type type-name='history_event_entity_equipment_purchasest' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <enum name='quality' type-name='item_quality' base-type='int32_t'/>
        <stl-vector name='hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_modified_buildingst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure' comment='index into world_site.buildings'/>
      <int32_t name='hf' ref-target='historical_figure'/>
      <enum name='ab_type' type-name='abstract_building_type' base-type='int32_t'/>
      <bitfield name='modification' base-type='uint32_t'> bay12: ABSTRACT_BUILDING_TOWER_FLAG_*
        <flag-bit name='dungeon'/>
        <flag-bit name='fortifications'/>
        <flag-bit name='courtyard'/>
        <flag-bit name='feast_hall'/>
      </bitfield>
    </class-type>

    <enum-type type-name='building_profile_acquisition_method' base-type='int32_t'> bay12: SBPAcquisitionMethodType
        <enum-item name='PURCHASE_UNOWNED'/>
        <enum-item name='INHERITED'/>
        <enum-item name='REBUILT_RUINED'/>
    </enum-type>

    <class-type type-name='history_event_building_profile_acquiredst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='building_profile'/>
      <int32_t name='acquirer_hf' ref-target='historical_figure'/>
      <int32_t name='acquirer_entity' ref-target='historical_entity'/>
      <enum name='acquisition_type' type-name='building_profile_acquisition_method'/>
      <int32_t name='previous_owner_hf' ref-target='historical_figure'/>
      <int32_t name='previous_owner_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_preachst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='speaker_hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <enum type-name='meeting_topic' name='topic'/>
      <int32_t name='entity1' ref-target='historical_entity'/>
      <int32_t name='entity2' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_entity_persecutedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='persecuting_hf' ref-target='historical_figure'/>
      <int32_t name='persecuting_entity' ref-target='historical_entity'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
      <stl-vector name='property_confiscated_from_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='destroyed_structures' type-name='int32_t' ref-target='abstract_building'/>
      <int32_t name='shrines_destroyed'/>
      <stl-vector name='expelled_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='expelled_populations' type-name='int32_t' ref-target='entity_population'/>
      <stl-vector name='expelled_races' type-name='int32_t' ref-target='creature_raw'/>
      <stl-vector name='expelled_counts' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_breach_feature_layerst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='site_entity' ref-target='historical_entity'/>
      <int32_t name='civ_entity' ref-target='historical_entity'/>
      <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_alliance_formedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <stl-vector name='joining_entities' type-name='int32_t' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_ransomedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='ransomed_hf' ref-target='historical_figure'/>
      <int32_t name='ransomer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hf_enslavedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='enslaved_hf' ref-target='historical_figure'/>
      <int32_t name='seller_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_sabotagest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='saboteur_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_overthrownst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='overthrown_hf' ref-target='historical_figure'/>
      <int32_t name='position_taker_hf' ref-target='historical_figure'/>
      <int32_t name='instigator_hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t name='position_profile_id'/>
      <stl-vector name='conspirator_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_failed_frame_attemptst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='plotter_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <enum name='crime' type-name='crime_type'/>
    </class-type>

    <bitfield-type type-name='history_event_hf_convicted_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_HF_CONVICTED_FLAG_*
        <flag-bit name='wrongful' comment='wrongful conviction'/>
        <flag-bit name='plot_surveillance' comment='due to ongoing surveillance as the plot unfolded'/>
        <flag-bit name='target_surveillance' comment='due to ongoing surveillance on the target'/>
        <flag-bit name='implicated_others' comment='implicated others during interrogation'/>
        <flag-bit name='co_conspirator_surveillance' comment='due to ongoing surveillance on a coconspirator'/>
        <flag-bit name='go_between' comment='convicted as go-between'/>
        <flag-bit name='revealed_nothing' comment='revealed nothing during interrogation'/>
    </bitfield-type>

    <class-type type-name='history_event_hf_convictedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='convicted_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_hf' ref-target='historical_figure'/>
      <stl-vector name='implicated_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='corrupt_hf' ref-target='historical_figure'/>
      <int32_t name='behest_of_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='surveillance_hf' ref-target='historical_figure'/>
      <int32_t name='co_conspirator_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <enum name='crime' type-name='crime_type'/>
      <compound name='punishment' type-name='punishmentst'/>
      <bitfield name='plot_flags' base-type='uint32_t' type-name='history_event_hf_convicted_flag'/>
    </class-type>

    <bitfield-type type-name='history_event_hf_interrogated_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_HF_INTERROGATED_FLAG_*
        <flag-bit name='recognized'/>
        <flag-bit name='refused_to_reveal'/>
    </bitfield-type>

    <class-type type-name='history_event_hf_interrogatedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <int32_t name='arresting_entity' ref-target='historical_entity'/>
        <int32_t name='interrogator_hf' ref-target='historical_figure'/>
        <stl-vector name='implicated_hfs' ref-target='historical_figure' type-name='int32_t' />
        <bitfield name='interrogation_flags' base-type='uint32_t' type-name='history_event_hf_interrogated_flag'/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
