<data-definition>
    <struct-type type-name='weapon_attack' original-name='itemdef_attackst'>
        <bool name='edged'/>
        <int32_t name='contact'/>
        <int32_t name='penetration'/>
        <int32_t name='velocity_mult'/>
        <stl-string name='verb_2nd'/>
        <stl-string name='verb_3rd'/>
        <stl-string name='noun'/>
        <int32_t name="prepare" since='v0.40.01'/>
        <int32_t name="recover" since='v0.40.01'/>
        <bitfield name='flags' base-type='uint32_t' since='v0.40.01'> bay12: ITEMDEF_ATTACK_FLAG_*
            <flag-bit name='independent_multiattack'/>
            <flag-bit name='bad_multiattack'/>
        </bitfield>
    </struct-type>

    <enum-type type-name='itemdef_flags'> bay12: ItemDefFlagType
        <enum-item name='GENERATED'/>
    </enum-type>

    <enum-type type-name='itemdef_type' base-type='int32_t'> bay12: ItemDefType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='WEAPON'/>
        <enum-item name='TOY'/>
        <enum-item name='TOOL'/>
        <enum-item name='INSTRUMENT'/>
        <enum-item name='TRAPCOMP'/>
        <enum-item name='ARMOR'/>
        <enum-item name='AMMO'/>
        <enum-item name='SIEGEAMMO'/>
        <enum-item name='GLOVES'/>
        <enum-item name='SHOES'/>
        <enum-item name='SHIELD'/>
        <enum-item name='HELM'/>
        <enum-item name='PANTS'/>
        <enum-item name='FOOD'/>
    </enum-type>

    <class-type type-name='itemdef' original-name='itemdefst'>
        <stl-string name="id"/>
        <int16_t name="subtype"/>

        <df-flagarray name='base_flags' index-enum='itemdef_flags' since='v0.34.08'/>

        <int32_t name='source_hfid' ref-target='historical_figure' since='v0.40.01'/>
        <int32_t name='source_enid' ref-target='historical_entity' since='v0.42.01'/>
        <stl-vector name='raw_strings' pointer-type='stl-string'/>
        <int32_t name='statue_texpos_top'/>
        <int32_t name='statue_texpos_bottom'/>

        <code-helper name='describe'>$.id</code-helper>

        <virtual-methods>
            <vmethod name='getType' ret-type='itemdef_type'/>

            <vmethod name='parseRaws' ret-type='bool'>
                <pointer name='context'/>
                <pointer name='str' type-name='stl-string'/>
                <pointer name='maintok' type-name='stl-string'/>
                <int32_t name='pos'/>
                <bool name='can_use_internal'/>
            </vmethod>
            <vmethod name='categorize' comment='add to world.raws.itemdefs.whatever'/>
            <vmethod name='finalize' comment='calculate stuff like base value'/>
            <vmethod name='init_material_information'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <enum-type type-name='ammo_flags'> bay12: ItemDefAmmoFlagType
        <enum-item name='HAS_EDGE_ATTACK'/>
    </enum-type>

    <class-type type-name='itemdef_ammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.ammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective" since='v0.40.01'/>
        <stl-string name="ammo_class"/>

        <df-flagarray name='flags' index-enum='ammo_flags'/>

        <int32_t name="size" comment='divided by 10'/>
        <int32_t name="value"/>

        <stl-vector name="attacks" pointer-type='weapon_attack'/>

        <static-array name='texpos' type-name='int32_t' count='16'/>
        <stl-vector name='graphics_info' comment='itemdef_ammo_graphics_infost'/>

    </class-type>

    <enum-type type-name='armor_general_flags'> bay12: ClothingDefFlagType
        <enum-item name='SOFT'/>
        <enum-item name='HARD'/>
        <enum-item name='METAL'/>
        <enum-item name='BARRED'/>
        <enum-item name='SCALED'/>
        <enum-item name='LEATHER'/>
        <enum-item name='SHAPED'/>
        <enum-item name='CHAIN_METAL_TEXT'/>

        <enum-item name='STRUCTURAL_ELASTICITY_WOVEN_THREAD'/>
        <enum-item name='STRUCTURAL_ELASTICITY_CHAIN_METAL'/>
        <enum-item name='STRUCTURAL_ELASTICITY_CHAIN_ALL'/>
    </enum-type>

    <enum-type type-name='clothing_layer_type'> bay12: ClothingLayer, does NOT have matching typedef so use compiler default
        <enum-item name='UNDER'/>
        <enum-item name='OVER'/>
        <enum-item name='ARMOR'/>
        <enum-item name='COVER'/>
    </enum-type>

    <struct-type type-name='armor_properties' original-name='clothingdefst'>
        <df-flagarray name='flags' index-enum='armor_general_flags'/>
        <enum name="layer" type-name='clothing_layer_type'/>
        <int16_t name="layer_size"/>
        <int16_t name="layer_permit"/>
        <int16_t name="coverage"/>
    </struct-type>

    <enum-type type-name='armor_flags'> bay12: ItemDefArmorFlagType
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_armorst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.armor'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <stl-string name="adjective" since='v0.40.01'/>

        <int32_t name="value"/>
        <int8_t name="armorlevel"/>
        <int16_t name="ubstep"/>
        <int16_t name="lbstep"/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>

        <df-flagarray name='flags' index-enum='armor_flags'/>
        <int32_t name='texpos_item'/>
        <stl-vector name='graphics_info' comment='item_armor_graphics_infost'/>

    </class-type>

    <class-type type-name='itemdef_foodst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.food'>
        <stl-string name="name"/>
        <int16_t name="level"/>
        <int32_t name='texpos_item'/>
        <int32_t name='texpos_food_container_top'/>
    </class-type>

    <enum-type type-name='gloves_flags'> bay12: ItemDefGlovesFlagType
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_glovesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.gloves'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective" since='v0.40.01'/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <df-flagarray name='flags' index-enum='gloves_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
        <int32_t name='texpos_item'/>
        <stl-vector name='graphics_info' comment='item_gloves_graphics_infost'/>
    </class-type>

    <enum-type type-name='helm_flags'> bay12: ItemDefHelmFlagType
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_helmst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.helms'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective" since='v0.40.01'/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <df-flagarray name='flags' index-enum='helm_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
        <int32_t name='texpos_item'/>
        <stl-vector name='graphics_info' comment='item_helm_graphics_infost'/>
    </class-type>

    <enum-type type-name='instrument_flags'> bay12: ItemDefInstrumentFlagType
        <enum-item name='INDEFINITE_PITCH'/>
        <enum-item name='PLACED_AS_BUILDING'/>
        <enum-item name='METAL_MAT'/>
        <enum-item name='STONE_MAT'/>
        <enum-item name='WOOD_MAT'/>
        <enum-item name='GLASS_MAT'/>
        <enum-item name='CERAMIC_MAT'/>
        <enum-item name='SHELL_MAT'/>

        <enum-item name='BONE_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_instrumentst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.instruments'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='instrument_flags'/>

        <enum type-name='job_skill' name="music_skill"/>
        <int32_t name="size"/>
        <int32_t name='value'/>
        <int32_t name="material_size"/>
        <stl-vector pointer-type='instrument_piece' name="pieces"/>
        <stl-string name="dominant_instrument_piece"/>
        <int32_t name="pitch_range_min"/>
        <int32_t name="pitch_range_max"/>
        <int32_t name="volume_mb_min"/>
        <int32_t name="volume_mb_max"/>
        <stl-vector type-name='sound_production_type' name="sound_production"/>
        <stl-vector pointer-type='stl-string' name="sound_production_parm1"/>
        <stl-vector pointer-type='stl-string' name="sound_production_parm2"/>
        <stl-vector type-name='int32_t' name="sound_production_actor_id"/>
        <stl-vector type-name='int32_t' name="sound_production_target_id"/>
        <stl-vector type-name='pitch_choice_type' name="pitch_choice"/>
        <stl-vector pointer-type='stl-string' name="pitch_choice_parm1"/>
        <stl-vector pointer-type='stl-string' name="pitch_choice_parm2"/>
        <stl-vector type-name='int32_t' name="pitch_choice_piece_id1"/>
        <stl-vector type-name='int32_t' name="pitch_choice_piece_id2"/>
        <stl-vector type-name='tuning_type' name="tuning"/>
        <stl-vector pointer-type='stl-string' name="tuning_parm"/>
        <stl-vector type-name='int32_t' name="tuning_piece_id"/>
        <!-- <compound name='timbre'> --> bay12: timbre_infost
        <stl-vector pointer-type='instrument_register' name="registers"/>
        <stl-vector type-name='timbre_type' name="timbre"/>
        <!-- </compound>-->
        <stl-string name="description"/>
    </class-type>

    <struct-type type-name='instrument_piece' original-name='instrument_piece_defst'>
        <stl-string name='type'/>
        <stl-string name='id'/>
        <int32_t name ='index'/>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <bitfield base-type='uint32_t' name='flags'> bay12: INSTRUMENT_PIECE_DEF_FLAG_*
            <flag-bit name='always_singular'/>
            <flag-bit name='always_plural'/>
        </bitfield>
    </struct-type>

    <struct-type type-name='instrument_register' original-name='instrument_registerst'>
        <int32_t name ='pitch_range_min'/>
        <int32_t name ='pitch_range_max'/>
        <stl-vector type-name='timbre_type' name='timbres'/>
    </struct-type>

    <enum-type type-name='pants_flags'> bay12: ItemDefPantsFlagType
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_pantsst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.pants'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <stl-string name="adjective" since='v0.40.01'/>

        <int32_t name="value"/>
        <int8_t name="armorlevel"/>
        <df-flagarray name='flags' index-enum='pants_flags'/>
        <int32_t name="material_size"/>
        <int16_t name="lbstep"/>

        <compound name='props' type-name='armor_properties'/>

        <int32_t name='texpos_item'/>
        <stl-vector name='graphics_info' comment='item_pants_graphics_infost'/>
    </class-type>

    <class-type type-name='itemdef_shieldst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shields'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective" since='v0.40.01'/>
        <int32_t name="value"/>
        <int32_t name="blockchance"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <int32_t name="material_size"/>
        <int32_t name='texpos_item'/>
        <int32_t name='texpos_item_wooden'/>
        <stl-vector name='graphics_info' comment='item_shield_graphics_infost'/>
    </class-type>

    <enum-type type-name='shoes_flags'> bay12: ItemDefShoesFlagType
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_shoesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shoes'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective" since='v0.40.01'/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <int16_t name="upstep"/>
        <df-flagarray name='flags' index-enum='shoes_flags'/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>
        <int32_t name='texpos_item'/>
        <int32_t name='texpos_item_metal'/>
        <stl-vector name='graphics_info' comment='item_shoes_graphics_infost'/>
    </class-type>

    <class-type type-name='itemdef_siegeammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.siege_ammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="ammo_class"/>

        <static-array name='texpos' type-name='int32_t' count='16'/>
        <stl-vector name='graphics_info' comment='itemdef_siegeammo_graphics_infost'/>
    </class-type>

    <enum-type type-name='tool_flags' base-type='int32_t'> bay12: ItemDefToolFlagType
        <enum-item name='HARD_MAT'/>
        <enum-item name='METAL_MAT'/>
        <enum-item name='HAS_EDGE_ATTACK'/>
        <enum-item name='METAL_WEAPON_MAT'/>
        <enum-item name='UNIMPROVABLE'/>
        <enum-item name='SOFT_MAT'/>
        <enum-item name='WOOD_MAT'/>
        <enum-item name='INVERTED_TILE'/>
        <enum-item name='FURNITURE'/>
        <enum-item name='LEATHER_MAT'/>
        <enum-item name='SILK_MAT'/>
        <enum-item name='THREAD_PLANT_MAT'/>
        <enum-item name='GLASS_MAT'/>
        <enum-item name='CERAMIC_MAT'/>
        <enum-item name='STONE_MAT'/>
        <enum-item name='SHELL_MAT'/>
        <enum-item name='BONE_MAT'/>
        <enum-item name='NO_DEFAULT_JOB'/>
        <enum-item name='INCOMPLETE_ITEM'/>
        <enum-item name='SHEET_MAT'/>
        <enum-item name='NO_DEFAULT_IMPROVEMENTS'/>
        <enum-item name='USES_FACE_IMAGE_SET'/>
    </enum-type>

    <class-type type-name='itemdef_toolst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.tools'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='tool_flags'/>
        <int32_t name="value"/>
        <uint8_t name="tile"/>

        <stl-vector name="tool_use" type-name='tool_uses'/>

        <stl-string name="adjective"/>
        <int32_t name="size"/>
        <enum type-name="job_skill" name="skill_melee"/>
        <enum type-name="job_skill" name="skill_ranged"/>
        <stl-string name="ranged_ammo"/>
        <int32_t name="two_handed"/>
        <int32_t name="minimum_size"/>
        <int32_t name="material_size"/>

        <stl-vector name="attacks" pointer-type='weapon_attack'/>

        <int32_t name="shoot_force"/>
        <int32_t name="shoot_maxvel"/>

        <int32_t name="container_capacity"/>

        <stl-vector name='shape_category_str' pointer-type='stl-string' since='v0.47.01'/>
        <stl-vector name='shape_category' type-name='int32_t' ref-target='descriptor_shape' since='v0.47.01'/>
        <stl-string name="description" since='v0.42.01'/>
        <stl-vector name="default_improvements" since='v0.42.01'>
            <pointer> bay12: itemdef_default_improvementst
                <enum type-name="improvement_type" name="type"/>
                <enum base-type="int32_t" type-name="itemimprovement_specific_type" name="specific_type"/>
                <stl-string name="instrument_part"/>
                <enum type-name="tool_flags" name="restriction"/>
            </pointer>
        </stl-vector>
        <static-array name='texpos' type-name="int32_t" count="8"/>
        <stl-vector name='texpos_container_top_plant' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_plant_subterranean' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_meal' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_cheese' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_meat' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_fish' type-name='int32_t'/>
        <stl-vector name='texpos_container_top_bag' type-name='int32_t'/>
        <static-array name='texpos2' type-name="int32_t" count="60"/>
        <stl-vector name='texpos_global_shape_index' type-name="int32_t"/>
        <stl-vector name='texpos_global_shape_texpos' type-name="int32_t"/>
        <stl-vector name='graphics_info' comment='item_tool_graphics_infost'/>
        <stl-vector name='food_container_graphics_info' comment='item_food_container_graphics_infost'/>
    </class-type>

    <enum-type type-name='toy_flags'> bay12: ItemDefToyFlagType
        <enum-item name='HARD_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_toyst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.toys'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='toy_flags'/>
        <int32_t name='texpos_item'/>
        <int32_t name='texpos_item_wood'/>
        <int32_t name='texpos_item_stone'/>
        <int32_t name='texpos_item_metal'/>
        <int32_t name='texpos_item_glass'/>
        <stl-vector name='graphics_info' comment='item_toy_graphics_infost'/>
    </class-type>

    <enum-type type-name='trapcomp_flags'> bay12: ItemDefTrapCompFlagType
        <enum-item name='IS_SCREW'/>
        <enum-item name='IS_SPIKE'/>
        <enum-item name='WOOD'/>
        <enum-item name='METAL'/>
        <enum-item name='HAS_EDGE_ATTACK'/>
    </enum-type>

    <class-type type-name='itemdef_trapcompst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.trapcomps'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>

        <int32_t name="size"/>
        <int32_t name="value"/>
        <int32_t name="hits"/>
        <int32_t name="material_size"/>

        <df-flagarray name='flags' index-enum='trapcomp_flags'/>

        <stl-vector name="attacks" pointer-type='weapon_attack'/>
        <static-array name='texpos' type-name='int32_t' count='22'/>
        <stl-vector name='graphics_info' comment='itemdef_trapcomp_graphics_infost'/>
    </class-type>

    <enum-type type-name='weapon_flags'> bay12: ItemDefWeaponFlagType
        <enum-item name='CAN_STONE'/>
        <enum-item name='HAS_EDGE_ATTACK'/>
        <enum-item name='TRAINING'/>
    </enum-type>

    <class-type type-name='itemdef_weaponst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.weapons'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>
        <int32_t name="size"/>
        <int32_t name="value"/>
        <enum type-name="job_skill" name="skill_melee"/>
        <enum type-name="job_skill" name="skill_ranged"/>
        <stl-string name="ranged_ammo"/>
        <int32_t name="two_handed"/>
        <int32_t name="minimum_size"/>
        <int32_t name="material_size"/>
        <df-flagarray name='flags' index-enum='weapon_flags'/>
        <stl-vector name="attacks" pointer-type='weapon_attack'/>
        <int32_t name="shoot_force"/>
        <int32_t name="shoot_maxvel"/>
        <static-array name='texpos' type-name='int32_t' count='25'/>
        <stl-vector name='graphics_info' comment='itemdef_weapon_graphics_infost'/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
