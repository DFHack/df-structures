<data-definition>
    <struct-type type-name='nemesis_offload' original-name='offload_unit_infost'>
        <stl-vector name='nemesis_save_file_id' type-name='int32_t'/>
        <stl-vector name='nemesis_member_idx' type-name='int16_t'/>
        <stl-vector name='units' pointer-type='unit'/>

        <pointer type-name='unit_chunk' name='cur_unit_chunk'/>
        <int32_t name='cur_unit_chunk_num' init-value='-1'/>
        <int32_t name='units_offloaded' init-value='-1'/>
    </struct-type>

    <enum-type type-name='save_substage' base-type='int32_t'> bay12: SaveStageType
        <enum-item name='Initializing'/>
        <enum-item name='CheckingDirectoryStructure'/>
        <enum-item name='PreliminaryCleaning'/>
        <enum-item name='OffloadingUnits'/>
        <enum-item name='OffloadingArt'/>
        <enum-item name='OpeningFile'/>
        <enum-item name='CharacterizingRawData'/>
        <enum-item name='AllocatingSpace'/>
        <enum-item name='SavingItems'/>
        <enum-item name='SavingUnits'/>
        <enum-item name='SavingJobs'/>
        <enum-item name='SavingSchedules'/>
        <enum-item name='SavingProjectiles'/>
        <enum-item name='SavingBuildings'/>
        <enum-item name='SavingMachines'/>
        <enum-item name='SavingFlowGuides'/>
        <enum-item name='SavingEffects'/>
        <enum-item name='SavingEntities'/>
        <enum-item name='SavingLocalAnimalPopulations'/>
        <enum-item name='SavingEvents'/>
        <enum-item name='SavingMandates'/>
        <enum-item name='SavingWorkQuotas'/>
        <enum-item name='SavingWorldEvents'/>
        <enum-item name='SavingCoinInformation'/>
        <enum-item name='SavingSquads'/>
        <enum-item name='SavingFormations'/>
        <enum-item name='SavingActivities'/>
        <enum-item name='SavingInteractions'/>
        <enum-item name='SavingWrittenContent'/>
        <enum-item name='SavingIdentities'/>
        <enum-item name='SavingIncidents'/>
        <enum-item name='SavingCrimes'/>
        <enum-item name='SavingVehicles'/>
        <enum-item name='SavingArmies'/>
        <enum-item name='SavingArmyControllers'/>
        <enum-item name='SavingTrackingInformation'/>
        <enum-item name='SavingCulturalIdentities'/>
        <enum-item name='SavingAgreement'/>
        <enum-item name='SavingArtForms'/>
        <enum-item name='SavingOccupations'/>
        <enum-item name='SavingBeliefSystems'/>
        <enum-item name='SavingImageSets'/>
        <enum-item name='SavingDivinationSets'/>
        <enum-item name='SavingAnnouncements'/>
        <enum-item name='SavingFortressInformation'/>
        <enum-item name='SavingWorldInformation'/>
        <enum-item name='SavingArtifacts'/>
        <enum-item name='SavingActiveHistoricalFigures'/>
        <enum-item name='SavingAdventureData'/>
        <enum-item name='SavingGeneralInformation'/>
        <enum-item name='ClosingFile'/>
        <enum-item name='Finishing'/>
    </enum-type>

    <struct-type type-name='saverst'>
        <enum name='substage' type-name='save_substage'/>
        <int32_t name='stage'/>
        <compound type-name='nemesis_offload' name='info'/>
    </struct-type>

    <struct-type type-name='location_detailst'>
        <enum name='art_specifier' type-name='job_art_specifier_type'/>
        <int32_t name='art_spec_id1'/>
        <int32_t name='art_spec_id2'/>
        <compound name='pos' type-name='coord'/>
    </struct-type>

    <struct-type type-name='pointst'>
        <int32_t name='id'/>
        <uint8_t name='tile'/>
        <int16_t name='fg_color'/>
        <int16_t name='bg_color'/>
        <stl-string name='name'/>
        <stl-string name='comment'/>
        <compound name='pos' type-name='coord'/>
    </struct-type>

    <struct-type type-name='routest'>
        <int32_t name='id'/>
        <stl-string name='name'/>
        <stl-vector name='points' type-name='int32_t'/>
    </struct-type>

    <struct-type type-name='point_infost'>
        <stl-vector name='points' pointer-type='pointst'/>
        <stl-vector name='routes' pointer-type='routest'/>
        <int16_t name='sym_selector'/>
        <int32_t name='cur_point_index'/>
        <bool name='in_edit_name_mode'/>
        <bool name='in_edit_text_mode'/>
        <uint8_t name='sym_tile'/>
        <int16_t name='sym_fg_color'/>
        <int16_t name='sym_bg_color'/>
        <compound name='text_box' type-name='curses_text_boxst'/>
        <int32_t name='next_point_id'/>
        <int32_t name='next_route_id'/>

        <int32_t name='sel_route_idx'/>
        <int32_t name='sel_route_waypt_idx'/>
        <bool name='in_edit_waypts_mode'/>

        <stl-vector name='location_detail' pointer-type='location_detailst' since='v0.42.06'/>
    </struct-type>

    <enum-type type-name='ui_sidebar_mode'> bay12: DwarfViewModes, no base type
        <enum-item name='Default'/>
        <enum-item name='Squads'/>

        -- 2

        <enum-item name='DesignateMine'/>
        <enum-item name='DesignateRemoveRamps'/>
        <enum-item name='DesignateUpStair'/>
        <enum-item name='DesignateDownStair'/>
        <enum-item name='DesignateUpDownStair'/>
        <enum-item name='DesignateUpRamp'/>
        <enum-item name='DesignateChannel'/>
        <enum-item name='DesignateGatherPlants'/>
        <enum-item name='DesignateRemoveDesignation'/>
        <enum-item name='DesignateSmooth'/>
        <enum-item name='DesignateCarveTrack'/>
        <enum-item name='DesignateEngrave'/>
        <enum-item name='DesignateCarveFortification'/>

        -- 15

        <enum-item name='Stockpiles'/>
        <enum-item name='Build'/>
        <enum-item name='QueryBuilding'/>

        -- 18

        <enum-item name='Orders'/>
        <enum-item name='OrdersForbid'/>
        <enum-item name='OrdersRefuse'/>
        <enum-item name='OrdersWorkshop'/>
        <enum-item name='OrdersZone'/>

        -- 23

        <enum-item name='BuildingItems'/>
        <enum-item name='ViewUnits'/>
        <enum-item name='LookAround'/>

        -- 26

        <enum-item name='DesignateItemsClaim'/>
        <enum-item name='DesignateItemsForbid'/>
        <enum-item name='DesignateItemsMelt'/>
        <enum-item name='DesignateItemsUnmelt'/>
        <enum-item name='DesignateItemsDump'/>
        <enum-item name='DesignateItemsUndump'/>
        <enum-item name='DesignateItemsHide'/>
        <enum-item name='DesignateItemsUnhide'/>

        -- 34

        <enum-item name='DesignateChopTrees'/>
        <enum-item name='DesignateToggleEngravings'/>
        <enum-item name='DesignateToggleMarker'/>

        -- 37

        <enum-item name='Hotkeys'/>

        -- 38

        <enum-item name='DesignateTrafficHigh'/>
        <enum-item name='DesignateTrafficNormal'/>
        <enum-item name='DesignateTrafficLow'/>
        <enum-item name='DesignateTrafficRestricted'/>

        -- 42

        <enum-item name='Zones'/>
        <enum-item name='ZonesPenInfo'/>
        <enum-item name='ZonesPitInfo'/>
        <enum-item name='ZonesGatherInfo'/>

        -- 47

        <enum-item name='DesignateRemoveConstruction'/>
        <enum-item name='DepotAccess'/>
        <enum-item name='NotesPoints'/>
        <enum-item name='NotesRoutes'/>
        <enum-item name='Burrows'/>
        <enum-item name='Hauling'/>

        -- 53

        <enum-item name='ArenaWeather'/>
        <enum-item name='ArenaTrees'/>

        -- 55

        <enum-item name='BuildingLocationInfo'/>
        <enum-item name='ZonesLocationInfo'/>
    </enum-type>

    <enum-type type-name='timed_event_type'> bay12: PlotEventTypes
        <enum-item name='Caravan'/>
        <enum-item name='Migrants'/>
        <enum-item name='Diplomat'/>
        <enum-item name='FeatureAttack'/>
        <enum-item name='Megabeast'/>
        <enum-item name='WildlifeCurious'/>
        <enum-item name='WildlifeMischievous'/>
        <enum-item name='WildlifeFlier'/>
        <enum-item name='NightCreature'/>
        <enum-item name='TributeCaravan'/>
    </enum-type>

    <struct-type type-name='timed_event' original-name='plot_eventst'>
        <enum type-name='timed_event_type' base-type='int16_t' name='type'/>
        <enum base-type='int8_t' type-name='season' name='season'/>
        <int16_t name='season_ticks' comment='1 tick = 10 frames'/>
        <pointer name='entity' type-name='historical_entity'/>
        <int16_t name='feature_ind'/>
        <int32_t name='layer_id' ref-target='world_underground_region'/>
        <int16_t name='feature_ax'/>
        <int16_t name='feature_ay'/>
    </struct-type>

    <enum-type type-name='talk_line_type'> bay12: TalkLines
        <enum-item name='NONE' value='-1'/>
        <enum-item name='Greet'/>
        <enum-item name='WeightMoney1'/>
        <enum-item name='WeightMoney2'/>
        <enum-item name='Weight1'/>
        <enum-item name='Weight2'/>
        <enum-item name='Money1'/>
        <enum-item name='Money2'/>
        <enum-item name='Trade'/>
        <enum-item name='Offer'/>
        <enum-item name='Seize'/>
        <enum-item name='OfferJoke'/>
        <enum-item name='SeizeJoke'/>
        <enum-item name='NoGoods1'/>
        <enum-item name='NoGoods2'/>
        <enum-item name='FortNone1'/>
        <enum-item name='FortNone2'/>
        <enum-item name='TraderNone1'/>
        <enum-item name='TraderNone2'/>
        <enum-item name='AnimalTreeReject'/>
        <enum-item name='AnimalReject'/>
        <enum-item name='TreeReject'/>
        <enum-item name='ICannotAfford'/>
        <enum-item name='YouCannotAfford'/>
        <enum-item name='Haggle'/>
        <enum-item name='CounterOffer'/>
        <enum-item name='CouldNotFindCounterOffer1'/>
        <enum-item name='CouldNotFindCounterOffer2'/>
        <enum-item name='HarshGreet'/>
        <enum-item name='NoMoreTradeHaggleFailure'/>
        <enum-item name='LiveAnimalReject'/>
        <enum-item name='ReceivedGift'/>
        -- Adventurer Mode
        <enum-item name='WeightMoney'/>
        <enum-item name='Weight'/>
        <enum-item name='Money'/>
        <enum-item name='NoGoods'/>
        <enum-item name='FortNone'/>
        <enum-item name='TraderNone'/>
    </enum-type>

    <bitfield-type type-name='plot_invasion_flag' base-type='uint16_t'> bay12: PLOTFLAG_INVASION_*
        <flag-bit name='active'/>
        <flag-bit name='siege' comment='announced'/>
        <flag-bit name='layer_source'/>
        <flag-bit name='undead_source'/>
        <flag-bit name='want_parley'/>
        <flag-bit name='parley'/>
        <flag-bit name='created_parley'/>
    </bitfield-type>

    <enum-type type-name='mission_type' base-type='int16_t'> bay12: MissionType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='SUPPORT_THIEVES'/>
        <enum-item name='KILL_ALL_AT_SITE'/>
    </enum-type>

    <struct-type type-name='invasion_info' original-name='plot_invasionst'
                 instance-vector='$global.plotinfo.invasions.list' key-field='id'>
        <int32_t name='id'/>
        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='active_size1' comment='0 unless active'/>
        <int32_t name='active_size2'/>
        <int32_t name='size'/>
        <int32_t name='duration_counter'/>
        <bitfield base-type='uint16_t' name='flags' type-name='plot_invasion_flag'/>
        <enum type-name='mission_type' name='mission'/>
        <int32_t name='parley_year' since='v0.44.01'/>
        <int32_t name='parley_season_count' since='v0.44.01'/>
        <int32_t name='refused_demand_start_year' since='v0.44.01'/>
        <int32_t name='refused_demand_start_season_count' since='v0.44.01'/>
        <int32_t name='origin_master_army_controller_id' ref-target='army_controller' since='v0.44.01'/>
    </struct-type>

    <struct-type type-name='plot_invasion_infost'>
        <stl-vector name='list' pointer-type='invasion_info'/>
        <int32_t name='next_id'/>
    </struct-type>

    <enum-type type-name='plot_tax_stage_type'> bay12: PlotTaxStages
        <enum-item name='COUNTDOWN'/>
        <enum-item name='COLLECTING'/>
    </enum-type>

    <struct-type type-name='plotinfo_taxinfost'>
        <enum name='state' base-type='int16_t' type-name='plot_tax_stage_type'/>
        <int32_t name='check_timer'/>
        <stl-vector name='rooms' type-name='int32_t' ref-target='building'/>
        <int32_t name='reach_room_timer'/>
        <int32_t name='tc_protect_timer'/>
        <int32_t name='guard1_reach_tc_timer'/>
        <int32_t name='guard2_reach_tc_timer'/>
        <int16_t name='collected'/>
        <int16_t name='quota'/>
        <compound type-name='coord' name='collector_pos'/>
        <static-array type-name='int16_t' count='2' name='guard_pos_x'/>
        <static-array type-name='int16_t' count='2' name='guard_pos_y'/>
        <static-array type-name='int16_t' count='2' name='guard_pos_z'/>
        <pointer type-name='unit' name='collector'/>
        <pointer type-name='unit' name='guard1'/>
        <pointer type-name='unit' name='guard2'/>
        <int8_t name='guard_lack_complained'/>
    </struct-type>

    <struct-type type-name='plotinfo_positionst'>
        <uint32_t name='flags'/>
        <int32_t name='manager_cooldown' comment='0-1008'/>
        <int32_t name='bookkeeper_cooldown' comment='0-1008'/>
        <int32_t name='bookkeeper_precision'/>
        <enum name='bookkeeper_settings' type-name='record_precision_level_type'/>
    </struct-type>

    <bitfield-type type-name='plot_merchant_flag' base-type='uint32_t'> bay12: MERCHANTEVENTFLAG_*
        <flag-bit name='check_cleanup' comment='CHECKANDFINALIZE; set each time a merchant leaves the map or dies'/>
        <flag-bit name='casualty' comment='JUSTSPOILED'/>
        <flag-bit name='hardship' comment='WENTBADLY'/>
        <flag-bit name='communicate' comment='SOMEBODYLIVED; send data to mountainhomes'/>
        <flag-bit name='seized' comment='GOODSSEIZED'/>
        <flag-bit name='offended' comment='NOMORETRADE'/>
        <flag-bit comment='UNUSED_07, formerly FIRSTMERCHANT'/>
        <flag-bit name='greatly_offended' comment='OFFENDED'/>
        <flag-bit name='tribute' comment='IS_TRIBUTE_CARAVAN; caravan is delivering tribute (not merchant caravan)'/>
    </bitfield-type>

    <struct-type type-name='caravan_state' original-name='plot_merchantst'>
        <compound name='total_capacity' type-name='massst'/>
        <enum name='trade_state' base-type='int8_t' comment='bay12: stage, no actual enum'>
            <enum-item name='None'/>
            <enum-item name='Approaching'/>
            <enum-item name='AtDepot'/>
            <enum-item name='Leaving'/>
            <enum-item name='Stuck'/>
        </enum>
        <int8_t name='depot_notified' comment='bay12: havecomplained; has it warned you that you need a depot'/>
        <int16_t name='time_remaining' comment='bay12: timer'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <compound name='activity_stats' type-name='entity_activity_statistics' comment='bay12: report'/>
        <bitfield name='flags' base-type='uint32_t' type-name='plot_merchant_flag'/>
        <int32_t name='import_value' comment='bay12: goodsvalue_initial'/>
        <int32_t name='export_value_total' comment='bay12: goodsvalue_end'/>
        <int32_t name='export_value_personal' comment='bay12: exportvalue_end; excluding foreign-produced items'/>
        <int32_t name='offer_value' comment='bay12: offervalue_end'/>
        <stl-vector name='animals' comment='bay12: unitroster' type-name='int32_t' ref-target='unit'/>
        <pointer type-name='entity_sell_prices' name='sell_prices' comment='bay12: tradeagreement'/>
        <pointer type-name='entity_buy_prices' name='buy_prices' comment='bay12: requestagreement'/>
        <stl-vector name='goods' type-name='int32_t' ref-target='item' comment='bay12: already_appraised_item_id'/>
        <int32_t name='mood' init-value='50' comment='bay12: tolerance; reflects satisfaction with last trading session'/>
        <int32_t name='haggle_fail_count'/>
    </struct-type>

    <bitfield-type type-name="kitchen_exc_type" base-type="int8_t"> bay12: KITCHENRESTRICTION_*
        <flag-bit name="Cook"/>
        <flag-bit name="Brew"/>
    </bitfield-type>

    -- Unused: buyvalcounterst

    <enum-type type-name='end_cause_type' base-type='int16_t'> bay12: EndCauseType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='DIED'/>
        <enum-item name='INVASION'/>
        <enum-item name='RETIRE'/>
        <enum-item name='ABANDON'/>
    </enum-type>

    <enum-type type-name='hotkey_type' base-type='int16_t'> bay12: HotKeyType
        <enum-item name='None' value='-1'/>
        <enum-item name='Zoom'/>
        <enum-item name='FollowUnit'/>
        <enum-item name='FollowItem'/>
    </enum-type>

    <struct-type type-name='ui_hotkey' original-name='hotkeyst'>
        <stl-string name='name'/>
        <enum base-type='int16_t' name='cmd' type-name='hotkey_type'/>
        <int32_t name='x'/>
        <int32_t name='y'/>
        <int32_t name='z'/>
        <compound is-union='true'>
            <int32_t name='unit_id' ref-target='unit' since='v0.34.08'/>
            <int32_t name='item_id' ref-target='item' since='v0.34.08'/>
        </compound>
    </struct-type>

    <struct-type type-name='hotkey_interfacest'>
        <int16_t name='selected_hotkey'/>
        <bool name='in_rename_hotkey'/>
    </struct-type>

    <struct-type type-name='embark_location' original-name='starter_infost'>
        <compound name='region_pos' type-name='coord2d'/>

        <int16_t name="reclaim_site" ref-target='world_site'/>
        <int16_t name="reclaim_idx"/>
        <compound name='embark_pos_min' type-name='coord2d'/>
        <compound name='embark_pos_max' type-name='coord2d'/>
    </struct-type>

    <struct-type type-name='interface_squad_modest'>
        <stl-vector name='list' has-bad-pointers='true'
                    comment='valid only when ui is displayed' pointer-type='squad'/>

        <stl-vector name='squad_id' type-name='int32_t' ref-target='squad'/>
        <stl-bit-vector name='sel_squads' index-refers-to='$$._parent.list[$]'/>

        <stl-vector name='indiv_selected' type-name='int32_t' ref-target='historical_figure'/>
        <bool name='in_select_indiv'/>
        <int32_t name='sel_indiv_squad' refers-to='$$._parent.list[$]'/>

        <int32_t name='viewing_squad_index'/>

        <int32_t name='squad_list_scroll'/>
        <int32_t name='squad_list_first_id'/>

        <pointer name='nearest_squad' type-name='squad'/>

        <bool name='in_move_order'/>
        <int32_t name='point_list_scroll'/>

        <bool name='in_kill_order'/>

        <stl-vector name='kill_rect_targets' pointer-type='unit'/>
        <int32_t name='kill_rect_targets_scroll' comment='also used for the list of targets at cursor'/>

        <bool name='in_kill_list'/>
        <stl-vector name='kill_targets' pointer-type='unit'/>
        <stl-bit-vector name='sel_kill_targets' index-refers-to='$$._parent.kill_target[$]'/>
        <int32_t name='kill_list_scroll'/>

        <bool name='in_kill_rect'/>
        <compound name='rect_start' type-name='coord'/>
    </struct-type>

    <struct-type type-name='equip_infost'>
        <static-array name='items_unmanifested' count='113' index-enum='item_type'>
            <stl-vector type-name='int32_t' ref-target='item'/>
        </static-array>

        <static-array name='items_unassigned' count='113' index-enum='item_type'>
            <stl-vector type-name='int32_t' ref-target='item'/>
        </static-array>

        <static-array name='items_assigned' count='113' index-enum='item_type'>
            <stl-vector type-name='int32_t' ref-target='item'/>
        </static-array>

        <bitfield name='update' type-name='equipment_update'/>

        <stl-vector name='work_weapons' type-name='int32_t' ref-target='item' comment='i.e. woodcutter axes, and miner picks'/>
        <stl-vector name='work_units' type-name='int32_t' ref-target='unit'/>

        <stl-vector name='hunter_ammunition' pointer-type='squad_ammo_spec'/>
        <stl-vector name='ammo_items' type-name='int32_t' ref-target='item'/>
        <stl-vector name='ammo_units' type-name='int32_t' ref-target='unit'/>
    </struct-type>

    <enum-type type-name='work_detail_icon_type' base-type='int32_t'> bay12: WorkDetailIconType
        <enum-item name='NONE' value='-1'/>
        <enum-item name='MINERS'/>
        <enum-item name='WOODCUTTERS'/>
        <enum-item name='HUNTERS'/>
        <enum-item name='PLANTERS'/>
        <enum-item name='FISHERMEN'/>
        <enum-item name='STONECUTTERS'/>
        <enum-item name='ENGRAVERS'/>
        <enum-item name='PLANT_GATHERERS'/>
        <enum-item name='HAULERS'/>
        <enum-item name='ORDERLIES'/>
        <enum-item name='CUSTOM_1'/>
        <enum-item name='CUSTOM_2'/>
        <enum-item name='CUSTOM_3'/>
        <enum-item name='CUSTOM_4'/>
        <enum-item name='CUSTOM_5'/>
        <enum-item name='CUSTOM_6'/>
        <enum-item name='CUSTOM_7'/>
        <enum-item name='CUSTOM_8'/>
    </enum-type>

    <bitfield-type type-name='work_detail_flags' base-type='uint32_t'> bay12: WORK_DETAIL_FLAG_*
        <flag-bit name='no_modify'/>
        <flag-bit name='cannot_be_everybody'/>
        <flag-bit name='mode' count='2' type-name='work_detail_mode'/>
    </bitfield-type>

    <enum-type type-name='work_detail_mode' base-type='uint32_t'> bay12: WORK_DETAIL_FLAG_*
        <enum-item name='Default' value='0'/>
        <enum-item name='EverybodyDoesThis'/>
        <enum-item name='NobodyDoesThis'/>
        <enum-item name='OnlySelectedDoesThis'/>
    </enum-type>

    <struct-type type-name='work_detail' original-name='work_detailst'>
        <stl-string name='name'/>
        <bitfield name='flags' base-type='uint32_t' type-name='work_detail_flags'/>
        <stl-vector name='assigned_units' type-name='int32_t' ref-target='unit' comment='toady: unid'/>
        <static-array name='allowed_labors' type-name='bool' count='94' index-enum='unit_labor' comment='toady: profession'/>
        <enum name='icon' type-name='work_detail_icon_type'/>
    </struct-type>

    <bitfield-type type-name="labor_info_flag" base-type='uint32_t'> bay12: LABOR_INFO_FLAG_*
        <flag-bit name="children_do_chores" />
    </bitfield-type>

    <struct-type type-name='labor_infost' since='v0.50.01'>
        <bitfield name="flags" base-type='uint32_t' type-name='labor_info_flag'/>
        <stl-vector name='work_details' pointer-type='work_detail'/>
        <static-array type-name='bool' name='chores' index-enum='unit_labor' count='94'/>
        <stl-vector name='chores_exempted_children' type-name='int32_t' ref-target='unit'/> sorted
    </struct-type>

    <struct-type type-name='fort_death_profilest'>
        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='histfig_id' ref-target='historical_figure'/>
        <int32_t name='death_year'/>
        <int32_t name='death_time'/>
        <int32_t name='timer' comment='+1 per 10'/>
        <enum name='ghost_type' type-name='ghost_type'/>
    </struct-type>

    <bitfield-type type-name='unit_animal_training_info_flag' base-type='uint32_t'> bay12: UNIT_ANIMAL_TRAINING_INFO_FLAG_*
        <flag-bit name='any_trainer'/>
        <flag-bit name='any_unassigned_trainer'/>
        <flag-bit name='train_war'/>
        <flag-bit name='train_hunt'/>
    </bitfield-type>

    <struct-type type-name='training_assignment'
                 instance-vector='$global.plotinfo.training.training_assignments'
                 key-field='animal_id'
                 original-name='unit_animal_training_infost'>
        <int32_t name="animal_id" ref-target='unit'/>
        <int32_t name="trainer_id" ref-target='unit'/>

        <bitfield name='flags' base-type='uint32_t' type-name='unit_animal_training_info_flag'/>
    </struct-type>

    <struct-type type-name='animal_training_infost'>
        <stl-vector name='training_assignments' since='v0.34.06' comment='sorted by animal_id' pointer-type='training_assignment'/>
    </struct-type>

    <struct-type type-name='artifact_hand_offst'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='army_controller_id' ref-target='army_controller'/>
    </struct-type>

    <bitfield-type type-name='fort_item_heist_flag' base-type='uint32_t'> bay12: FORT_ITEM_HEIST_FLAG_*
        <flag-bit name='check_start_of_heist'/>
        <flag-bit name='announced_missing'/>
        <flag-bit name='announced_disturbed'/>
        <flag-bit name='announced_theft'/>
        <flag-bit name='announced_handoff'/>
    </bitfield-type>

    <struct-type type-name='fort_item_heistst'>
        <int32_t name='target_item' ref-target='item'/>
        <int32_t name='mastermind_hf' ref-target='historical_figure' comment='always same as corruptor_hf?'/>
        <int32_t name='mastermind_plot_id' ref-target='intrigue_plotst' comment='refers to historical_figure_info.relationships.intrigues.plots.id'/>
        <int32_t name='corruptor_hf' ref-target='historical_figure'/>
        <int32_t name='corruptor' ref-target='unit'/>
        <int32_t name='corruptee_hf' ref-target='historical_figure'/>
        <int32_t name='corruptee' ref-target='unit'/>
        <int32_t name='theft_agreement' ref-target='agreement'/>
        <bitfield name='flags' base-type='uint32_t' type-name='fort_item_heist_flag'/>
        <compound name='item_known_pos' type-name='coord'/>
        <static-array name='item_admirer_hfid' count='16'>
            <int32_t ref-target='historical_figure'/>
        </static-array>
        <static-array name='item_admirer_visual_hfid' count='16'>
            <int32_t ref-target='historical_figure'/>
        </static-array>
        <static-array name='item_admirer_historical_hfid' count='16'>
            <int32_t ref-target='historical_figure'/>
        </static-array>
        <static-array name='item_admirer_ident_id' count='16'>
            <int32_t ref-target='identity'/>
        </static-array>
        <static-array name='item_admirer_witness_unid' count='16'>
            <int32_t ref-target='unit'/>
        </static-array>
        <static-array name='item_admirer_year' count='16'>
            <int32_t/>
        </static-array>
        <static-array name='item_admirer_season_count' count='16'>
            <int32_t/>
        </static-array>
        <int32_t name='item_admirer_index' init-value='0'/>
        <int32_t name='incident_id' ref-target='incident'/>
        <int32_t name='crime_id' ref-target='crime'/>
        <int32_t name='handoff_incident_id' ref-target='incident'/>
        <int32_t name='handoff_crime_id' ref-target='crime'/>
    </struct-type>

    <struct-type type-name='dipscript_text' original-name='dipscript_textst'>
        <stl-string name='name' comment='dwarf_liaison_bye, etc.'/>
        <stl-vector name='contents' pointer-type='stl-string'/>
    </struct-type>

    <enum-type type-name='setting_difficulty_enemies_type' base-type='int32_t'> bay12: SettingDifficultyEnemiesType
        <enum-item name='None' value='-1'/>
        <enum-item name='Off'/>
        <enum-item name='Normal'/>
        <enum-item name='Hard'/>
        <enum-item name='Custom'/>
    </enum-type>

    <bitfield-type type-name='difficulty_enemy_flag' base-type='uint32_t'> bay12: DIFFICULTY_ENEMY_FLAG_*
        <flag-bit name='sieges'/>
        <flag-bit name='megabeasts'/>
        <flag-bit name='werebeasts'/>
        <flag-bit name='curiousbeasts'/>
    </bitfield-type>

    <enum-type type-name='setting_difficulty_economy_type' base-type='int32_t'> bay12: SettingDifficultyEconomyType
        <enum-item name='None' value='-1'/>
        <enum-item name='Normal'/>
        <enum-item name='Hard'/>
        <enum-item name='Custom'/>
    </enum-type>

    <struct-type type-name='difficultyst'>
        <enum name='difficulty_enemies' type-name='setting_difficulty_enemies_type'/>
        <enum name='difficulty_economy' type-name='setting_difficulty_economy_type'/>
        <static-array type-name='int32_t' count='5' name='enemy_pop_trigger'/>
        <static-array type-name='int32_t' count='5' name='enemy_prod_trigger'/>
        <static-array type-name='int32_t' count='5' name='enemy_trade_trigger'/>
        <int32_t name='megabeast_interval'/>
        <int32_t name='forgotten_sens'/>
        <int32_t name='forgotten_irritate_min'/>
        <int32_t name='forgotten_wealth_div'/>
        <int32_t name='wild_sens'/>
        <int32_t name='wild_irritate_min'/>
        <int32_t name='wild_irritate_decay'/>
        <int32_t name='werebeast_interval'/>
        <int32_t name='vampire_fraction'/>
        <static-array type-name='int32_t' count='3' name='invasion_cap_regular'/>
        <static-array type-name='int32_t' count='3' name='invasion_cap_monsters'/>
        <int32_t name='min_raids_before_siege'/>
        <int32_t name='min_raids_between_sieges'/>
        <int32_t name='siege_frequency'/>
        <int32_t name='cavern_dweller_scale'/>
        <int32_t name='cavern_dweller_max_attackers'/>
        <int32_t name='tree_fell_count_savage'/>
        <int32_t name='tree_fell_count'/>
        <bitfield name='flags' base-type='uint32_t' type-name='difficulty_enemy_flag'/>
        <static-array type-name='int32_t' count='5' name='economy_pop_trigger'/>
        <static-array type-name='int32_t' count='5' name='economy_prod_trigger'/>
        <static-array type-name='int32_t' count='5' name='economy_trade_trigger'/>
        <static-array type-name='int32_t' count='10' name='land_holder_pop_trigger'/>
        <static-array type-name='int32_t' count='10' name='land_holder_prod_trigger'/>
        <static-array type-name='int32_t' count='10' name='land_holder_trade_trigger'/>
        <int32_t name='temple_value'/>
        <int32_t name='temple_complex_value'/>
        <int32_t name='priesthood_unit_count'/>
        <int32_t name='high_priesthood_unit_count'/>
        <int32_t name='guildhall_value'/>
        <int32_t name='grand_guildhall_value'/>
        <int32_t name='guild_unit_count'/>
        <int32_t name='grand_guild_unit_count'/>
        <int32_t name='mandate_period'/>
        <int32_t name='demand_period'/>
    </struct-type>

    <bitfield-type type-name='plotinfo_flag' base-type='uint32_t'> bay12: PLOTINFOFLAG_*
        <flag-bit name='first_year'/>
        <flag-bit name='recheck_aid_requests'/>
        <flag-bit name='force_elections'/>
        <flag-bit name='need_to_do_tutorial'/>
        <flag-bit name='minor_victory'/>
        <flag-bit name='major_victory'/>
        <flag-bit name='did_first_caravan_announcement'/>
        <flag-bit name='did_first_cavern_announcement' comment='required for CAVERNS_OPENED music context'/>
        <flag-bit name='did_first_ghost_announcement'/>
    </bitfield-type>

    <struct-type type-name='plotinfost'>
        <enum name='game_state' type-name='end_cause_type' base-type='int16_t'/>
        <int32_t name='lost_to_siege_civ' ref-target='historical_entity'/>

        <compound name='tax_collection' type-name='plotinfo_taxinfost'/>

        <compound name='nobles' type-name='plotinfo_positionst'/>

        <stl-vector name='caravans' pointer-type='caravan_state' comment='bay12: merchant'/>
        <int8_t name='firstmerchant'/>

        <int16_t name='fortress_rank'/> outpost/hamlet/village/town/city/metropolis
        <int16_t name='progress_population' comment='?'/> (unles that's what the above is)
        <int16_t name='progress_trade' comment='?'/>
        <int16_t name='progress_production' comment='?'/>

        <bool name='king_arrived'/>
        <bool name='king_hasty'/>
        <bool name='economy_active'/>
        <bool name='ignore_labor_shortage'/>
        <bool name='justice_active'/>

        <uint16_t name='hi_temp' init-value='60001'/>
        <uint16_t name='lo_temp' init-value='60001'/>

        <int16_t name='manager_timer' comment='bay12: quota_checktime'/>

        <static-array name='units_killed' type-name='int16_t' count='152' index-enum='profession'/>

        <stl-vector name='currency_value' type-name='int32_t'
                    index-refers-to='(material-by-id 0 $)'/>

        <int32_t name='trees_removed'/>
        <int32_t name='outdoor_irritation'/>

        <int32_t name='adamantine_mandate_number'/>

        <int32_t name='fortress_age' comment='?; +1 per 10; used in first 2 migrant waves etc'/>

        <compound name='tasks' type-name='entity_activity_statistics'/>

        <stl-vector name='meeting_requests' type-name='int32_t' ref-target='unit'
                    comment='guild complaints and diplomats'/>

        <stl-vector name='activities' pointer-type='activity_info'/>
        <stl-vector name='dip_meeting_info' pointer-type='meeting_diplomat_info'/>

        <stl-vector name='aid_requesters' type-name='int32_t' ref-target='unit'/>

        <bool name='game_over'/>

        <compound name='invasions' type-name='plot_invasion_infost'/>

        <stl-vector name='punishments' pointer-type='punishment'/>

        <stl-vector name='dipscripts' pointer-type='dipscript_info'/>
        <stl-vector name='dipscript_texts' pointer-type='dipscript_text'/>

        <stl-vector name='dipscript_popups' pointer-type='dipscript_popup'
                    comment='bay12: meetingmoment; cause viewscreen_meetingst to pop up'/>

        <compound name='kitchen'> not a compound
            <stl-vector name='item_types' type-name='item_type'/>
            <stl-vector name='item_subtypes'>
                <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent._parent.item_types[$$._key] $)'/>
            </stl-vector>
            <stl-vector name='mat_types'>
                <int16_t ref-target='material' aux-value='$$._parent.mat_indices[$._key]'/>
            </stl-vector>
            <stl-vector name='mat_indices' type-name='int32_t'/>
            <stl-vector name='exc_types' type-name='kitchen_exc_type'/>
        </compound>

        <stl-vector name='economic_stone' type-name='bool'
                    index-refers-to='(material-by-id 0 $)'/>

        <bitfield name='flags' base-type='uint32_t' type-name='plotinfo_flag'/>

        <int16_t name='mood_cooldown'/>

        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
        <int32_t name='group_id' ref-target='historical_entity'
                 comment='i.e. specifically the fortress dwarves'/>
        <int16_t name='race_id' ref-target='creature_raw'/>
        <stl-vector type-name='int32_t' name='usable_stockpile_race' ref-target='creature_raw' since='v0.42.01'/>

        <stl-vector name='farm_crops' type-name='int16_t' ref-target='plant_raw'/>
        <stl-vector name='farm_seasons'>
            <enum base-type='int8_t' type-name='season'/>
        </stl-vector>

        <compound name='economy_prices'> not a compound
            <compound name='price_adjustment'> not a compound
                <stl-vector type-name='int32_t' name='general_items' index-enum='item_type'/>
                <stl-vector type-name='int32_t' name='weapons' index-refers-to='$global.world.raws.itemdefs.weapons[$]'/>
                <stl-vector type-name='int32_t' name='armor' index-refers-to='$global.world.raws.itemdefs.armor[$]'/>
                <stl-vector type-name='int32_t' name='handwear' index-refers-to='$global.world.raws.itemdefs.helms[$]'/>
                <stl-vector type-name='int32_t' name='footwear' index-refers-to='$global.world.raws.itemdefs.shoes[$]'/>
                <stl-vector type-name='int32_t' name='headwear' index-refers-to='$global.world.raws.itemdefs.gloves[$]'/>
                <stl-vector type-name='int32_t' name='legwear' index-refers-to='$global.world.raws.itemdefs.pants[$]'/>
                <stl-vector type-name='int32_t' name='prepared_food' index-refers-to='$global.world.raws.itemdefs.food[$]'/>
                <stl-vector type-name='int32_t' name='wood'/>
                <stl-vector type-name='int32_t' name='thread_cloth'/>
                <stl-vector type-name='int32_t' name='paper'/>
                <stl-vector type-name='int32_t' name='parchment'/>
                <stl-vector type-name='int32_t' name='bone'/>
                <stl-vector type-name='int32_t' name='tooth'/>
                <stl-vector type-name='int32_t' name='horn'/>
                <stl-vector type-name='int32_t' name='pearl'/>
                <stl-vector type-name='int32_t' name='shell'/>
                <stl-vector type-name='int32_t' name='leather'/>
                <stl-vector type-name='int32_t' name='silk'/>
                <stl-vector type-name='int32_t' name='yarn'/>
                <stl-vector type-name='int32_t' name='inorganic'/>
                <stl-vector type-name='int32_t' name='meat'/>
                <stl-vector type-name='int32_t' name='fish'/>
                <stl-vector type-name='int32_t' name='plants'/>
                <stl-vector type-name='int32_t' name='drinks'/>
                <stl-vector type-name='int32_t' name='extract_animal'/>
                <stl-vector type-name='int32_t' name='extract_plant'/>
                <stl-vector type-name='int32_t' name='mill_animal'/>
                <stl-vector type-name='int32_t' name='mill_plant'/>
                <stl-vector type-name='int32_t' name='cheese_animal'/>
                <stl-vector type-name='int32_t' name='cheese_plant'/>
                <stl-vector type-name='int32_t' name='pets'/>
            </compound>
            <compound name='price_setter'> not a compound
                <stl-vector name='general_items' index-enum='item_type' pointer-type='unit'/>
                <stl-vector name='weapons' index-refers-to='$global.world.raws.itemdefs.weapons[$]' pointer-type='unit'/>
                <stl-vector name='armor' index-refers-to='$global.world.raws.itemdefs.armor[$]' pointer-type='unit'/>
                <stl-vector name='handwear' index-refers-to='$global.world.raws.itemdefs.helms[$]' pointer-type='unit'/>
                <stl-vector name='footwear' index-refers-to='$global.world.raws.itemdefs.shoes[$]' pointer-type='unit'/>
                <stl-vector name='headwear' index-refers-to='$global.world.raws.itemdefs.gloves[$]' pointer-type='unit'/>
                <stl-vector name='legwear' index-refers-to='$global.world.raws.itemdefs.pants[$]' pointer-type='unit'/>
                <stl-vector name='prepared_food' index-refers-to='$global.world.raws.itemdefs.food[$]' pointer-type='unit'/>
                <stl-vector name='wood' pointer-type='unit'/>
                <stl-vector name='thread_cloth' pointer-type='unit'/>
                <stl-vector name='paper' pointer-type='unit'/>
                <stl-vector name='parchment' pointer-type='unit'/>
                <stl-vector name='bone' pointer-type='unit'/>
                <stl-vector name='tooth' pointer-type='unit'/>
                <stl-vector name='horn' pointer-type='unit'/>
                <stl-vector name='pearl' pointer-type='unit'/>
                <stl-vector name='shell' pointer-type='unit'/>
                <stl-vector name='leather' pointer-type='unit'/>
                <stl-vector name='silk' pointer-type='unit'/>
                <stl-vector name='yarn' pointer-type='unit'/>
                <stl-vector name='inorganic' pointer-type='unit'/>
                <stl-vector name='meat' pointer-type='unit'/>
                <stl-vector name='fish' pointer-type='unit'/>
                <stl-vector name='plants' pointer-type='unit'/>
                <stl-vector name='drinks' pointer-type='unit'/>
                <stl-vector name='extract_animal' pointer-type='unit'/>
                <stl-vector name='extract_plant' pointer-type='unit'/>
                <stl-vector name='mill_animal' pointer-type='unit'/>
                <stl-vector name='mill_plant' pointer-type='unit'/>
                <stl-vector name='cheese_animal' pointer-type='unit'/>
                <stl-vector name='cheese_plant' pointer-type='unit'/>
                <stl-vector name='pets' pointer-type='unit'/>
            </compound>
        </compound>

        <compound name='stockpile'> not a compound
            <int32_t name='reserved_bins'/>
            <int32_t name='reserved_barrels'/>

            <compound name='custom_settings' type-name='stockpile_settings'/>
        </compound>

        <static-array name='border' count='4'>
            <static-array count='768' type-name='coord2d'/>
        </static-array>

        <compound name='wilderpop_enter' type-name='coord_path'/>

        <compound name='map_edge'> not a compound
            <static-array name='layer_x' count='5'>
                <stl-vector type-name='int16_t'/>
            </static-array>

            <stl-vector name='surface_x' type-name='int16_t'/>

            <static-array name='layer_y' count='5'>
                <stl-vector type-name='int16_t'/>
            </static-array>

            <stl-vector name='surface_y' type-name='int16_t'/>

            <static-array name='layer_z' count='5'>
                <stl-vector type-name='int16_t'/>
            </static-array>

            <stl-vector name='surface_z' type-name='int16_t'/>
        </compound>

        <stl-vector name='no_fishing_feature_x' type-name='int16_t'/>
        <stl-vector name='no_fishing_feature_y' type-name='int16_t'/>
        <stl-vector name='no_fishing_feature_idx' type-name='int16_t'/>
        <stl-vector name='no_fishing_feature_layer' type-name='int32_t' ref-target='world_underground_region'/>

        <stl-vector name='event_collections' type-name='int32_t' ref-target='history_event_collection'/>

        <stl-vector name='stone_mat_types' type-name='int16_t'/>
        <stl-vector name='stone_mat_indexes' type-name='int16_t'/>

        <compound name='waypoints' type-name='point_infost'/>
        <compound name='burrows' type-name='burrow_infost'/>
        <compound name='alerts' type-name='alert_state_infost'/>
        <compound name='equipment' type-name='equip_infost'/>
        <compound name='training' type-name='animal_training_infost'/>
        <compound name='hauling' type-name='hauling_infost' since='v0.34.08'/>
        <compound name='labor_info' type-name='labor_infost' since='v0.50.01'/>

        <stl-vector name='petitions' type-name='int32_t' ref-target='agreement' comment='unapproved agreements'/>
        <stl-vector name='continuing_agreement_id' type-name='int32_t' ref-target='agreement' since='v0.47.01'/>

        <stl-vector name='artifact_hand_off' pointer-type='artifact_hand_offst' since='v0.44.01'/>

        <stl-vector name='theft_intrigues' pointer-type='fort_item_heistst' since='v0.47.01' comment='related to job_type AcceptHeistItem'/>

        <stl-vector name='infiltrator_histfigs' type-name='int32_t' since='v0.47.01' ref-target='historical_figure'/>
        <stl-vector name='infiltrator_years' type-name='int32_t' since='v0.47.01'/>
        <stl-vector name='infiltrator_year_ticks' type-name='int32_t' since='v0.47.01'/>

        <stl-vector name='tutorial_hide' type-name='help_context_type'/> 0.50.01
        <stl-vector name='tutorial_seen' type-name='help_context_type'/> 0.50.01

        <int32_t name='food_warn_year'/>
        <int32_t name='food_warn_year_tick'/>

        <compound name='main'> not a compound
            <static-array name='hotkeys' type-name='ui_hotkey' count='16'/>
            <stl-vector pointer-type='ui_hotkey' name='custom_hotkeys'/>

            <int32_t name='traffic_cost_high'/>
            <int32_t name='traffic_cost_normal'/>
            <int32_t name='traffic_cost_low'/>
            <int32_t name='traffic_cost_restricted'/>

            <stl-vector name='dead_citizens' pointer-type='fort_death_profilest'/>

            <compound type-name='difficultyst' name='custom_difficulty'/>

            <pointer name='fortress_entity' type-name='historical_entity' comment='entity pointed to by group_id'/>
            <pointer name='fortress_site' type-name='world_site'/>

            <enum base-type='int16_t' name='mode' type-name='ui_sidebar_mode'/>
            <int16_t name='viewmode_buildjob_mastering'/>
            <int16_t name='viewmode_des_selected'/>
            <bool name='autosave_request'/>
            <int32_t name='autosave_timer'/>
            <compound type-name='file_compressorst' name='file'/>
            <compound name='save_progress' type-name='saverst'/>

            <int8_t name='do_unit_offload'/>
            <compound name='offload_unit_info' type-name='nemesis_offload'/>
            <bool name='unit_offload_have_set_count' since='v0.44.12'/>
            <uint32_t name='unit_offload_render_count'/>

            <compound name='hotkey_interface' type-name='hotkey_interfacest'/>
        </compound>

        <compound name='squads' type-name='interface_squad_modest'/>

        <int32_t name='follow_unit' ref-target='unit'/>
        <int32_t name='follow_item' ref-target='item'/>

        <stl-vector name='selected_farm_crops' type-name='int16_t' ref-target='plant_raw' comment='valid for the currently queried farm plot'/>
        <stl-bit-vector name='available_seeds'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
