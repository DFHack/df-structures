<data-definition>
    <struct-type type-name='historical_kills'>
        -- Important

        <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>

        -- Misc

        <stl-vector name="killed_race" type-name='int16_t' ref-target='creature_raw'/>
        <stl-vector name="killed_caste" type-name='int16_t' ref-target='caste_raw' aux-value='$$._parent.killed_race[$._key]'/>
        <stl-vector name="killed_underground_region" type-name='int32_t' ref-target='world_underground_region'/>
        <stl-vector name="killed_region" type-name='int32_t' ref-target='world_region'/>
        <stl-vector name="killed_site" type-name='int32_t' ref-target='world_site'/>
        <stl-vector name="killed_undead">
            <bitfield base-type='uint16_t'>
                <flag-bit name='zombie'/>
                <flag-bit name='ghostly'/>
            </bitfield>
        </stl-vector>
        <stl-vector name="killed_count" type-name='int32_t'/>
    </struct-type>

    <struct-type type-name='history_hit_item'>
        <int32_t name='item' ref-target='item'/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        -- If shot by a ranged weapon:
        <int32_t name='shooter_item' ref-target='item'/>
        <enum base-type='int16_t' name='shooter_item_type' type-name='item_type'/>
        <int16_t name='shooter_item_subtype' refers-to='(item-subtype-target $$._parent.shooter_item_type $)'/>
        <int16_t name='shooter_mattype' ref-target='material' aux-value='$$.shooter_matindex'/>
        <int32_t name='shooter_matindex'/>
    </struct-type>

    <enum-type type-name='reputation_type' base-type='int32_t'>
        <enum-item name='Hero'/>
        <enum-item name='Buddy'/>
        <enum-item name='Grudge'/>
        <enum-item name='AnimalPartner'/>
        <enum-item name='Brawler'/>
        <enum-item name='Psycho'/>
        <enum-item name='TradePartner'/>
        <enum-item name='Friendly'/>
        <enum-item name='Killer'/>
        <enum-item name='Murderer'/>

        <enum-item name='Comrade'/>
        <enum-item name='RespectedGroup'/>
        <enum-item name='HatedGroup'/>
        <enum-item name='EnemyFighter'/>
        <enum-item name='FriendlyFighter'/>
        <enum-item name='Bully'/>
        <enum-item name='Brigand'/>
        <enum-item name='LoyalSoldier'/>
        <enum-item name='Monster'/>
        <enum-item name='Storyteller'/>

        <enum-item name='Poet'/>
        <enum-item name='Bard'/>
        <enum-item name='Dancer'/>
        <enum-item name='Quarreler'/>
        <enum-item name='Flatterer'/>
        <enum-item name='Hunter'/>
        <enum-item name='ProtectorOfWeak'/>
        <enum-item name='TreasureHunter'/>
        <enum-item name='Thief'/>
        <enum-item name='InformationSource'/>

        <enum-item name='PreserverOfKnowledge'/>
        <enum-item name='Intruder'/>
    </enum-type>

    <struct-type type-name='historical_figure_info'>
        <pointer name="spheres">
            <stl-vector>
                <enum base-type='int16_t' type-name='sphere_type'/>
            </stl-vector>
        </pointer>

        <pointer name="skills">
            <stl-vector name="skills">
                <enum base-type='int16_t' type-name='job_skill'/>
            </stl-vector>
            <stl-vector name="points" type-name='int32_t' index-refers-to='$$._parent.skills[$]'/>
            <stl-vector name="unk_20" type-name='int16_t'/>
            <stl-vector name="unk_30" type-name='int32_t'/>

            only a guess since most of figures have 102 (STANDARD); some have stuff like CLERK, SCOUT, BEAST_HUNTER, etc
            <enum base-type='int16_t' name='profession' type-name='profession'/>
            <int32_t since='v0.44.01'/>
            <int32_t since='v0.47.02'/>
            <pointer since='v0.47.02'/> only seen as all zeroes
        </pointer>

        <pointer name="pets">
            <stl-vector type-name='int16_t' ref-target='creature_raw'/>
        </pointer>

        <pointer name="personality">
            <compound type-name='unit_personality'/>
            <int16_t since='v0.44.01'/>
        </pointer>

        <pointer name="masterpieces">
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-vector name="events2" type-name='int32_t' ref-target='history_event' comment='ones that were stolen or destroyed?'/>
            <stl-vector name='unk_v43_1' type-name='int32_t' since='v0.43.01'/>
            <stl-vector name='unk_v43_2' type-name='int16_t' since='v0.43.01'/>
        </pointer>

        <pointer name="unk_14">
            <int16_t name="unk_0"/>
            <int32_t name="site" ref-target='world_site'/>
            <int32_t name="region_id" ref-target='world_region'/>
            <int32_t name="beast_id" init-value='-1' comment='for FB'/>
            <int32_t name="army_id" ref-target='army'/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <int32_t/>
            <compound name='region' type-name='coord2d'/>
            <int8_t name="unk_14"/>
            <int32_t name="unk_18"/>
            <int32_t name="unk_1c"/>
            <int32_t name="unk_34" since='v0.42.01'/>
            <int16_t name="unk_38" since='v0.42.01'/>
            <int16_t name="unk_3a" since='v0.42.01'/>
        </pointer>

        <pointer name="kills" type-name='historical_kills'/>

        <pointer name="wounds">
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-bit-vector name="status">
                <code-helper name='index-refers-to'>
                    (let* ((info $$._parent._parent._parent)
                           (figure $info._parent._parent)
                           (caste (find-instance $caste_raw $figure.caste $figure.race)))
                      $caste.body_parts[$])
                </code-helper>
            </stl-bit-vector>
            <int32_t/>
            <int32_t/>
            <int32_t since='v0.40.17-19'/>
        </pointer>

        <pointer name='secret' since='v0.34.01'>
            <stl-vector name="interactions" pointer-type='interaction'/>
            <int32_t name="unk_10"/>
            <stl-vector name='known_written_contents' type-name='int32_t' ref-target='written_content' comment="ID of written_contents known to the historical figure. Aside from the contents of read books, these so-called written contents also include known derivations of poetic forms, dance forms and musical forms"/>
            <stl-vector name="known_identities" type-name='int32_t' ref-target='identity' comment="identity ID of identities known to the historical figure, such as demon true names"/>
            <stl-vector>
                <pointer>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <stl-vector pointer-type='entity_event'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector>
                <pointer>
                    <int32_t/>
                    <int32_t/>

                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                </pointer>
            </stl-vector>
<!--
            <stl-vector name='read_books' pointer-type='written_content'/>
-->
            <stl-vector name="known_poetic_forms" type-name='int32_t' ref-target='poetic_form' since='v0.42.01'/>
            <stl-vector name="known_musical_forms" type-name='int32_t' ref-target='musical_form' since='v0.42.01'/>
            <stl-vector name="known_dance_forms" type-name='int32_t' ref-target='dance_form' since='v0.42.01'/>
            <pointer name="knowledge">
                <bitfield type-name='knowledge_scholar_flags_0' name='philosophy'/>
                <bitfield type-name='knowledge_scholar_flags_1' name='philosophy2'/>
                <bitfield type-name='knowledge_scholar_flags_2' name='math'/>
                <bitfield type-name='knowledge_scholar_flags_3' name='math2'/>
                <bitfield type-name='knowledge_scholar_flags_4' name='history'/>
                <bitfield type-name='knowledge_scholar_flags_5' name='astronomy'/>
                <bitfield type-name='knowledge_scholar_flags_6' name='naturalist'/>
                <bitfield type-name='knowledge_scholar_flags_7' name='chemistry'/>
                <bitfield type-name='knowledge_scholar_flags_8' name='geography'/>
                <bitfield type-name='knowledge_scholar_flags_9' name='medicine'/>
                <bitfield type-name='knowledge_scholar_flags_10' name='medicine2'/>
                <bitfield type-name='knowledge_scholar_flags_11' name='medicine3'/>
                <bitfield type-name='knowledge_scholar_flags_12' name='engineering'/>
                <bitfield type-name='knowledge_scholar_flags_13' name='engineering2'/>
                <uint16_t name='knowledge_goal_category'/>
                <uint16_t/>
                <uint32_t/>
                <uint32_t/>
                <uint32_t/>
                <bitfield name='knowledge_goal'>
                    <flag-bit name='unk0'/>
                </bitfield>
                <uint32_t name='research_points' comment='research is finished at 100k? amount gained depends on skills, attributes'/>
                <uint16_t name='times_pondered' comment='one per ponder no matter what. turns into research_points somewhere around 40-60.'/>
            </pointer>
            <pointer name='belief_systems' comment="found in prophets; contains the ID of the belief system developed by that particular prophet">
                <stl-vector type-name='int32_t' ref-target='belief_system'/>
            </pointer>
            <pointer name='unk_a8'>
                <stl-vector>
                    <pointer>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <static-array type-name='int32_t' count='8'/>
                    </pointer>
                </stl-vector>
            </pointer>
            <stl-vector/>
        </pointer>

        <pointer name='curse' since='v0.34.01'>
            <stl-vector name="active_interactions" pointer-type='interaction'/>
            <stl-vector name="active_effects" pointer-type='interaction_effect'/>
            <stl-vector name="can_do" pointer-type='interaction'/>
            <int32_t name="unk_30"/>
            <int32_t name="unk_34"/>
            <int32_t name="unk_38"/>
            <int32_t name="unk_3c"/>
            <int8_t name="unk_40"/>
            <stl-string name="name"/>
            <stl-string name="name_plural"/>
            <stl-string name="name_adjective"/>
            <int32_t name='race' ref-target='creature_raw'/>
            <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
            <stl-vector type-name='int32_t' name="unk_a0"/>
            <stl-vector type-name='int32_t' name="unk_b0"/>
            <stl-vector type-name='int32_t' name="unk_c0"/>
            <int32_t name="original_histfig_id" ref-target='historical_figure' comment='ID of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_race" ref-target='creature_raw' comment='race of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_caste" ref-target='caste_raw' aux-value='$$.original_race' comment='caste of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="root_body_part_id" comment='ID of the root body part in the corpse or corpse piece which was reanimated to produce undead historical figure'/>
            <stl-string name="undead_name" comment='display name of reanimated creatures in legends mode'/>
            <int32_t name="unk_fc"/>
            <pointer/>
            <pointer/>
        </pointer>

        <pointer name='books' since='v0.34.01'>
            <stl-vector pointer-type='artifact_record'/>
            <int32_t since='v0.44.01'/>
            <int32_t since='v0.47.01'/>
            <static-array type-name='int32_t' count='13' since='v0.44.06'/>
            <static-array type-name='int32_t' count='13' since='v0.44.06'/>
            <int32_t name='flags' since='v0.44.06'/>
            <int16_t since='v0.44.06' comment='not saved'/>
            <int32_t since='v0.47.01'/>
            <int32_t since='v0.47.01'/>
        </pointer>

        <pointer name='reputation' since='v0.34.01'>
            <stl-vector name="wanted">
                <pointer>
                    <int32_t name='entity_id' ref-target='historical_entity'/>
                    <stl-vector name='types'><enum type-name='reputation_type'/></stl-vector>
                    <stl-vector name='levels' type-name='int32_t' comment='1 to 100: rumored to legendary'/>
                    <int32_t name="discovered_year"/>
                    <int32_t name="discovered_time"/>
                    <int32_t name="unsolved_murders"/>
                    <int32_t comment='uninitialized'/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <stl-vector> same exact struct as above
                <pointer>
                    <int32_t name='entity_id' ref-target='historical_entity'/>
                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                    <int32_t name="discovered_year"/>
                    <int32_t name="discovered_time"/>
                    <int32_t name="unsolved_murders"/>
                </pointer>
            </stl-vector>
            <int32_t name="cur_identity" ref-target='identity'/>
            <stl-vector name="all_identities" type-name='int32_t' ref-target='identity'/>
            <int32_t name='next_identity_idx'/>
            <pointer name='unk_2c'>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <int32_t/>
                <stl-vector>
                    <pointer>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                        <int32_t/>
                    </pointer>
                </stl-vector>
                <stl-vector type-name='int32_t'/>
            </pointer>
        </pointer>

        <pointer name='relationships'>
            <stl-vector name='list'>
                <pointer>
                    <int32_t name='histfig_id' ref-target='historical_figure'/>
                    <int32_t name='unk_1'/>
                    <stl-vector name='unk_2v' type-name='int32_t'/>
                    <stl-vector name="attitude">
                        <enum type-name='reputation_type' comment="Probably ordered"/>
                    </stl-vector>
                    <stl-vector name="counter" type-name='int32_t' comment="One element for each 'attitude' element"/>
                    <int32_t name="rank"/>
                    <int32_t name='year'/>
                    <int32_t name='year_tick'/>
                    all 0xfff0bdc0 = -1000000
                    <int32_t name='unk_3a'/>
                    <int32_t name='unk_3b'/>
                    <int32_t name='unk_3c'/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <stl-vector/> could also be 6 int32_t's
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
<!--        Entries with a 'rank' value of zero are suppressed from display. Display order seems to depend on
            the value of the first 'attitude' entry.
            Buddy/Grudge/AnimalPartner entries forms the primary group, sorted in ascending histfig id order.
            The secondary group consists of Friendly, where the internal sort order is based on higher 'rank'.
            If the 'rank' is equal the histfig id determines the order.
            The tertiary group consists of zero length 'attitude' entries. Those are again sorted based on higher
            'rank', with histfig id breaking ties.
            Note that only the entries listed above have been observed as the first 'attitude' element, with others
            optionally added as well. This does not mean they may not exist, but that the sort order described above
            may be incomplete.
            The role of 'counter' is unknown, but might somehow tick over into an increase in rank. It does not seem
            to play any part in the display sort order.
-->
            <stl-vector since='v0.44.01'>
                <pointer>
                    <int32_t/>
                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <stl-vector since='v0.44.01'>
                <pointer>
                    <int32_t/>
                    <stl-vector type-name='int32_t'/>
                    <stl-vector type-name='int32_t'/>
                </pointer>
            </stl-vector>
            <stl-vector name='identities' type-name='int32_t' ref-target='cultural_identity'/>
            <stl-vector since='v0.44.01'>
                <pointer>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                    <int32_t/>
                </pointer>
            </stl-vector>
            <int32_t/>
            <pointer/>
        </pointer>
    </struct-type>

    <enum-type type-name='histfig_flags'>
        <enum-item name='reveal_artwork'/>
        <enum-item name='equipment_created'/>
        <enum-item name='deity'/>
        <enum-item name='force'/>
        <enum-item name='skeletal_deity'/>
        <enum-item name='rotting_deity'/>
        <enum-item name='worldgen_acted'/>
        <enum-item name='ghost'/>
        <enum-item name='skin_destroyed'/>
        <enum-item name='meat_destroyed'/>
        <enum-item name='bones_destroyed'/>
        <enum-item name='brag_on_kill'/>
        <enum-item name='kill_quest'/>
        <enum-item name='chatworthy'/>
        <enum-item name='flashes'/>
        <enum-item name='never_cull'/>
    </enum-type>

    <enum-type type-name='histfig_relationship_type' base-type='int16_t'>
        -- Can be checked through viewscreen_layer_unit_relationshipst
        <enum-item name='None' value='-1'/>
        <enum-item name='Mother'/>
        <enum-item name='Father'/>
        <enum-item name='Parent'/>
        <enum-item name='Husband'/>
        <enum-item name='Wife'/>
        <enum-item name='Spouse'/>
        <enum-item name='SonEldest'/>
        <enum-item name='SonEldest2'/>
        <enum-item name='SonEldest3'/>
        <enum-item name='SonEldest4'/>
        <enum-item name='SonEldest5'/>
        <enum-item name='SonEldest6'/>
        <enum-item name='SonEldest7'/>
        <enum-item name='SonEldest8'/>
        <enum-item name='SonEldest9'/>
        <enum-item name='SonEldest10'/>
        <enum-item name='Son'/>
        <enum-item name='SonYoungest'/>
        <enum-item name='SonOnly'/>
        <enum-item name='DaughterEldest'/>
        <enum-item name='DaughterEldest2'/>
        <enum-item name='DaughterEldest3'/>
        <enum-item name='DaughterEldest4'/>
        <enum-item name='DaughterEldest5'/>
        <enum-item name='DaughterEldest6'/>
        <enum-item name='DaughterEldest7'/>
        <enum-item name='DaughterEldest8'/>
        <enum-item name='DaughterEldest9'/>
        <enum-item name='DaughterEldest10'/>
        <enum-item name='Daughter'/>
        <enum-item name='DaughterOnly'/>
        <enum-item name='DaughterYoungest'/>
        <enum-item name='ChildEldest'/>
        <enum-item name='ChildEldest2'/>
        <enum-item name='ChildEldest3'/>
        <enum-item name='ChildEldest4'/>
        <enum-item name='ChildEldest5'/>
        <enum-item name='ChildEldest6'/>
        <enum-item name='ChildEldest7'/>
        <enum-item name='ChildEldest8'/>
        <enum-item name='ChildEldest9'/>
        <enum-item name='ChildEldest10'/>
        <enum-item name='Child'/>
        <enum-item name='ChildYoungest'/>
        <enum-item name='ChildOnly'/>
        <enum-item name='PaternalGrandmother'/>
        <enum-item name='PaternalGrandfather'/>
        <enum-item name='MaternalGrandmother'/>
        <enum-item name='MaternalGrandfather'/>
        <enum-item name='Grandmother'/>
        <enum-item name='Grandfather'/>
        <enum-item name='Grandparent'/>
        <enum-item name='OlderBrother'/>
        <enum-item name='OlderSister'/>
        <enum-item name='OlderSibling'/>
        <enum-item name='YoungerBrother'/>
        <enum-item name='YoungerSister'/>
        <enum-item name='YoungerSibling'/>
        <enum-item name='Cousin'/>
        <enum-item name='Aunt'/>
        <enum-item name='Uncle'/>
        <enum-item name='Niece'/>
        <enum-item name='Nephew'/>
        <enum-item name='Sibling'/>
        <enum-item name='Grandchild'/>
    </enum-type>

    <struct-type type-name='historical_figure' instance-vector='$global.world.history.figures' key-field='id'>
        <enum base-type='int16_t' name='profession' type-name='profession'/>

        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int8_t name='sex' comment='-1 n/a, 0 female, 1 male'/>

        <bitfield type-name='orientation_flags' name='orientation_flags'/>
        <int32_t name='appeared_year'/>
        <int32_t name='born_year'/>
        <int32_t name='born_seconds'/>
        <int32_t name='curse_year' since='v0.34.01'/>
        <int32_t name='curse_seconds' since='v0.34.01'/>

        <int32_t name='birth_year_bias' init-value='0' since='v0.34.01'/>
        <int32_t name='birth_time_bias' init-value='0' since='v0.34.01'/>

        <int32_t name='old_year'/>
        <int32_t name='old_seconds'/>
        <int32_t name='died_year'/>
        <int32_t name='died_seconds'/>

        <compound type-name='language_name' name='name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='population_id' ref-target='entity_population'/>

        <int32_t name='breed_id' comment='from legends export'/>
        <int32_t name='cultural_identity' ref-target='cultural_identity' since='v0.40.01'/>
        <int32_t name='family_head_id' ref-target='historical_figure' since='v0.44.01' comment='When a unit is asked about their family in adventure mode, the historical figure corresponding to this ID is called the head of the family or ancestor.'/>

        <df-flagarray name='flags' index-enum='histfig_flags'/>

        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='unit_id2' ref-target='unit' since='v0.40.01' comment='sometimes garbage'/>
        <int32_t name='id'/>

        <int32_t name='unk4'/>

        <stl-vector name='entity_links' pointer-type='histfig_entity_link'/>
        <stl-vector name='site_links' pointer-type='histfig_site_link'/>
        <stl-vector name='histfig_links' pointer-type='histfig_hf_link'/>

        <pointer name='info' type-name='historical_figure_info'/>

        <int32_t name="unk_v47_1" comment="Did get a 'pointer' to something that definitely wasn't a site here"/>
        <int32_t name="unk_v47_2"/>
        <pointer name="unk_f0" type-name="world_site"/>
        <pointer name="unk_f4" type-name="language_name"/>
        <pointer name="unk_f8" type-name="world_underground_region"/>
        <pointer name="unk_fc">
            <df-array name="unk_0" type-name='uint8_t'/>
            <df-array name="unk_8" type-name='int16_t'/>
        </pointer>
        <int32_t name="unk_100"/>
        <int32_t name="unk_v47_3" comment="ditto"/>
        <int32_t name="unk_v47_4" comment="ditto"/>
        <int32_t name='unk_v4019_1' init-value='-1' since='v0.40.17-19'/>
        <padding size="1" comment='unknown size - not initialized or saved/loaded'/>
    </struct-type>

    <struct-type type-name='identity'
                 instance-vector='$global.world.identities.all' key-field='id'>
        dtor 0x8C17FA0

        <int32_t name='id'/>
        <compound name='name' type-name='language_name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int32_t/>
        <int32_t name='histfig_id' ref-target='historical_figure'
                 comment='when masquerading as another historical figure'/>
        <int32_t name='unk_4c'/>

        <int32_t name='birth_year' comment='the fake one, that is'/>
        <int32_t name='birth_second'/>
        <int32_t/>
        <int32_t/>
        <enum base-type='int16_t' name='profession' type-name='profession'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name="unk_v47_1"/>
        <int32_t name="unk_v47_2"/>
        <int32_t name="unk_v47_3"/>
        <stl-vector pointer-type='identity_unk_94'/>
        <stl-vector pointer-type='identity_unk_94'/>
    </struct-type>

    <struct-type type-name='identity_unk_94'>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>
        <int32_t init-value='-1'/>
        <int32_t init-value='-1'/>
        <int32_t/>
        <int32_t comment='uninitialized'/>
    </struct-type>

    <enum-type type-name='mental_picture_property_type'>
        <enum-item name='DATE'/>
        <enum-item name='ACTION'/>
        <enum-item name='TOOL'/>
        <enum-item name='EMOTION'/>
        <enum-item name='COLOR_PATTERN'/>
        <enum-item name='SHAPE'/>
        <enum-item name='ADJECTIVE'/>
        <enum-item name='POSITION'/>
        <enum-item name='TIME'/>
    </enum-type>

    <class-type type-name='mental_picture_propertyst'>
        <int32_t name='unk_0'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_property_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_property_datest' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_actionst' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_toolst' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_emotionst' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_color_patternst' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_shapest' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_adjectivest' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_positionst' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_property_timest' inherits-from='mental_picture_propertyst'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>


    <enum-type type-name='mental_picture_element_type'>
        <enum-item name='HF'/>
        <enum-item name='SITE'/>
        <enum-item name='REGION'/>
    </enum-type>

    <class-type type-name='mental_picture_elementst'>
        <int32_t name='unk_1'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_element_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_element_hfst' inherits-from='mental_picture_elementst'>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_element_sitest' inherits-from='mental_picture_elementst'>
        <int32_t/>
    </class-type>

    <class-type type-name='mental_picture_element_regionst' inherits-from='mental_picture_elementst'>
        <int32_t/>
    </class-type>


    <enum-type type-name='history_event_type'>
        <enum-item name='WAR_ATTACKED_SITE'/>
        <enum-item name='WAR_DESTROYED_SITE'/>
        <enum-item name='CREATED_SITE'/>
        <enum-item name='HIST_FIGURE_DIED'/>
        <enum-item name='ADD_HF_ENTITY_LINK'/>
        <enum-item name='REMOVE_HF_ENTITY_LINK'/>
        <enum-item name='FIRST_CONTACT'/>
        <enum-item name='FIRST_CONTACT_FAILED'/>
        <enum-item name='TOPICAGREEMENT_CONCLUDED'/>
        <enum-item name='TOPICAGREEMENT_REJECTED'/>
        <enum-item name='TOPICAGREEMENT_MADE'/>
        <enum-item name='WAR_PEACE_ACCEPTED'/>
        <enum-item name='WAR_PEACE_REJECTED'/>
        <enum-item name='DIPLOMAT_LOST'/>
        <enum-item name='AGREEMENTS_VOIDED'/>
        <enum-item name='MERCHANT'/>

        <enum-item name='ARTIFACT_HIDDEN'/>
        <enum-item name='ARTIFACT_POSSESSED'/>
        <enum-item name='ARTIFACT_CREATED'/>
        <enum-item name='ARTIFACT_LOST'/>
        <enum-item name='ARTIFACT_FOUND'/>
        <enum-item name='ARTIFACT_RECOVERED'/>
        <enum-item name='ARTIFACT_DROPPED'/>
        <enum-item name='RECLAIM_SITE'/>
        <enum-item name='HF_DESTROYED_SITE'/>
        <enum-item name='SITE_DIED'/>
        <enum-item name='SITE_RETIRED'/>
        <enum-item name='ENTITY_CREATED'/>
        <enum-item name='ENTITY_ACTION'/>
        <enum-item name='ENTITY_INCORPORATED'/>
        <enum-item name='CREATED_BUILDING'/>
        <enum-item name='REPLACED_BUILDING'/>

        <enum-item name='ADD_HF_SITE_LINK'/>
        <enum-item name='REMOVE_HF_SITE_LINK'/>
        <enum-item name='ADD_HF_HF_LINK'/>
        <enum-item name='REMOVE_HF_HF_LINK'/>
        <enum-item name='ENTITY_RAZED_BUILDING'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_DESIGN'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_CONSTRUCT'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_DYE_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM_IMPROVEMENT'/>
        <enum-item name='MASTERPIECE_CREATED_FOOD'/>
        <enum-item name='MASTERPIECE_CREATED_ENGRAVING'/>
        <enum-item name='MASTERPIECE_LOST'/>
        <enum-item name='CHANGE_HF_STATE'/>
        <enum-item name='CHANGE_HF_JOB'/>
        <enum-item name='WAR_FIELD_BATTLE'/>

        <enum-item name='WAR_PLUNDERED_SITE'/>
        <enum-item name='WAR_SITE_NEW_LEADER'/>
        <enum-item name='WAR_SITE_TRIBUTE_FORCED'/>
        <enum-item name='WAR_SITE_TAKEN_OVER'/>
        <enum-item name='BODY_ABUSED'/>
        <enum-item name='HIST_FIGURE_ABDUCTED'/>
        <enum-item name='ITEM_STOLEN'/>
        <enum-item name='HF_RAZED_BUILDING'/>
        <enum-item name='CREATURE_DEVOURED'/>
        <enum-item name='HIST_FIGURE_WOUNDED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_BATTLE_EVENT'/>
        <enum-item name='CREATED_WORLD_CONSTRUCTION'/>
        <enum-item name='HIST_FIGURE_REUNION'/>
        <enum-item name='HIST_FIGURE_REACH_SUMMIT'/>
        <enum-item name='HIST_FIGURE_TRAVEL'/>
        <enum-item name='HIST_FIGURE_NEW_PET'/>

        <enum-item name='ASSUME_IDENTITY'/>
        <enum-item name='CREATE_ENTITY_POSITION'/>
        <enum-item name='CHANGE_CREATURE_TYPE'/>
        <enum-item name='HIST_FIGURE_REVIVED'/>
        <enum-item name='HF_LEARNS_SECRET'/>
        <enum-item name='CHANGE_HF_BODY_STATE'/>
        <enum-item name='HF_ACT_ON_BUILDING'/>
        <enum-item name='HF_DOES_INTERACTION'/>
        <enum-item name='HF_CONFRONTED'/>
        <enum-item name='ENTITY_LAW'/>
        <enum-item name='HF_GAINS_SECRET_GOAL'/>
        <enum-item name='ARTIFACT_STORED'/>
        <enum-item name='AGREEMENT_FORMED'/>
        <enum-item name='SITE_DISPUTE'/>
        <enum-item name='AGREEMENT_CONCLUDED'/>
        <enum-item name='INSURRECTION_STARTED'/>

        <enum-item name='INSURRECTION_ENDED'/>
        <enum-item name='HF_ATTACKED_SITE'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='KNOWLEDGE_DISCOVERED'/>
        <enum-item name='ARTIFACT_TRANSFORMED'/>
        <enum-item name='ARTIFACT_DESTROYED'/>
        <enum-item name='HF_RELATIONSHIP_DENIED'/>
        <enum-item name='REGIONPOP_INCORPORATED_INTO_ENTITY'/>
        <enum-item name='POETIC_FORM_CREATED'/>
        <enum-item name='MUSICAL_FORM_CREATED'/>
        <enum-item name='DANCE_FORM_CREATED'/>
        <enum-item name='WRITTEN_CONTENT_COMPOSED'/>
        <enum-item name='CHANGE_HF_MOOD'/>

        <enum-item name='ARTIFACT_CLAIM_FORMED'/>
        <enum-item name='ARTIFACT_GIVEN'/>
        <enum-item name='HF_ACT_ON_ARTIFACT'/>
        <enum-item name='HF_RECRUITED_UNIT_TYPE_FOR_ENTITY'/>
        <enum-item name='HFS_FORMED_REPUTATION_RELATIONSHIP'/>
        <enum-item name='ARTIFACT_COPIED'/>
        <enum-item name='SNEAK_INTO_SITE'/>
        <enum-item name='SPOTTED_LEAVING_SITE'/>
        <enum-item name='ENTITY_SEARCHED_SITE'/>
        <enum-item name='HF_FREED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_ACTION'/>
        <enum-item name='ENTITY_RAMPAGED_IN_SITE'/>
        <enum-item name='ENTITY_FLED_SITE'/>
        <enum-item name='TACTICAL_SITUATION'/>
        <enum-item name='SQUAD_VS_SQUAD'/>
        <enum-item name='SITE_SURRENDERED'/>
        <enum-item name='ENTITY_EXPELS_HF'/>

        <enum-item name='TRADE' since='v0.47.01'/>
        <enum-item name='ADD_ENTITY_SITE_PROFILE_FLAG'/>
        <enum-item name='GAMBLE'/>
        <enum-item name='ADD_HF_ENTITY_HONOR'/>
        <enum-item name='ENTITY_DISSOLVED'/>
        <enum-item name='ENTITY_EQUIPMENT_PURCHASE'/>
        <enum-item name='MODIFIED_BUILDING'/>
        <enum-item name='BUILDING_PROFILE_ACQUIRED'/>
        <enum-item name='HF_PREACH'/>
        <enum-item name='ENTITY_PERSECUTED'/>
        <enum-item name='ENTITY_BREACH_FEATURE_LAYER'/>
        <enum-item name='ENTITY_ALLIANCE_FORMED'/>
        <enum-item name='HF_RANSOMED'/>
        <enum-item name='HF_ENSLAVED'/>
        <enum-item name='SABOTAGE'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
        <enum-item name='HFS_FORMED_INTRIGUE_RELATIONSHIP'/>
        <enum-item name='FAILED_INTRIGUE_CORRUPTION'/>
        <enum-item name='HF_CONVICTED'/>
        <enum-item name='FAILED_FRAME_ATTEMPT'/>
        <enum-item name='HF_INTERROGATED'/>
    </enum-type>

    <enum-type type-name='history_event_reason' comment="Some of these require at least one parameter of varying type. The text is what DF provides without parameter">
        <enum-attr name='caption'/>
        <enum-item name='none' value='-1'/>

        <enum-item name='insurrection'>
            <item-attr name='caption' value='for an insurrection'/>
        </enum-item>
        <enum-item name='adventure'>
            <item-attr name='caption' value='to adventure'/>
        </enum-item>
        <enum-item name='guide'>
            <item-attr name='caption' value='as a guide'/>
        </enum-item>
        <enum-item name='rescued'>
            <item-attr name='caption' value='in order to be rescued'/>
        </enum-item>
        <enum-item name='sphere_alignment'>
            <item-attr name='caption' value='due to their cosmic similarity'/>
        </enum-item>
        <enum-item name='maintain_balance_in_universe'>
            <item-attr name='caption' value='in order to maintain balance in the universe'/>
        </enum-item>
        <enum-item name='highlight_boundaries_between_worlds'>
            <item-attr name='caption' value='to create a monument to the boundaries between realities'/>
        </enum-item>
        <enum-item name='sow_the_seeds_of_chaos_in_the_world'>
            <item-attr name='caption' value='to sow the seeds of chaos within'/>
        </enum-item>
        <enum-item name='provide_opportunities_for_courage'>
            <item-attr name='caption' value='to provide opportunities for courage to rise'/>
        </enum-item>
        <enum-item name='bring_death_to_the_world'>
            <item-attr name='caption' value='that more might die'/>
        </enum-item>
        
        <enum-item name='liked_appearance'>
            <item-attr name='caption' value='that all should gaze upon a truly gruesome visage'/>
        </enum-item>
        <enum-item name='because_it_was_destined'>
            <item-attr name='caption' value='because it was destined'/>
        </enum-item>
        <enum-item name='great_fortresses_built_and_tested'>
            <item-attr name='caption' value='that great fortresses might be raised and tested in siege'/>
        </enum-item>
        <enum-item name='whim'>
            <item-attr name='caption' value='on a whim'/>
        </enum-item>
        <enum-item name='bring_misery_to_the_world'>
            <item-attr name='caption' value='that it might bathe in misery forever'/>
        </enum-item>
        <enum-item name='bring_murder_to_the_world'>
            <item-attr name='caption' value='that more might be murdered'/>
        </enum-item>
        <enum-item name='bring_nightmares_into_reality'>
            <item-attr name='caption' value='in order to make nightmares reality'/>
        </enum-item>
        <enum-item name='bring_thralldom_to_the_world'>
            <item-attr name='caption' value='in order to make thralls of everyone'/>
        </enum-item>
        <enum-item name='bring_torture_to_the_world'>
            <item-attr name='caption' value='in order that acts of torture be perpetrated'/>
        </enum-item>
        <enum-item name='provide_opportunities_for_acts_of_valor'>
            <item-attr name='caption' value='to provide opportunities for acts of valor to be performed'/>
        </enum-item>

        <enum-item name='bring_war_to_the_world'>
            <item-attr name='caption' value='that war might rage forever'/>
        </enum-item>
        <enum-item name='find_relative'>
            <item-attr name='caption' value='in order to find a relative'/>
        </enum-item>
        <enum-item name='offer_condolences'>
            <item-attr name='caption' value='to offer condolences'/>
        </enum-item>
        <enum-item name='be_brought_to_safety'>
            <item-attr name='caption' value='in order to be brought to safety'/>
        </enum-item>
        <enum-item name='help_with_rescue'>
            <item-attr name='caption' value='to help with a rescue'/>
        </enum-item>
        <enum-item name='insufficient_work'>
            <item-attr name='caption' value='due to insufficient work'/>
        </enum-item>
        <enum-item name='work_request'>
            <item-attr name='caption' value='to request work'/>
        </enum-item>
        <enum-item name='make_weapon'>
            <item-attr name='caption' value='that weapons be made'/>
        </enum-item>
        <enum-item name='vent_at_boss'>
            <item-attr name='caption' value='to vent at somebody in charge'/>
        </enum-item>
        <enum-item name='cry_on_boss'>
            <item-attr name='caption' value='to cry on somebody in charge'/>
        </enum-item>

        <enum-item name='should_have_reached_goal'>
            <item-attr name='caption' value='as the goal was not reached'/>
        </enum-item>
        <enum-item name='insufficient_progress_toward_goal'>
            <item-attr name='caption' value='as insufficient progress was made toward the goal'/>
        </enum-item>
        <enum-item name='going_wrong_direction'>
            <item-attr name='caption' value='after going the wrong direction'/>
        </enum-item>
        <enum-item name='arrived_at_location'>
            <item-attr name='caption' value='after arriving at the location'/>
        </enum-item>
        <enum-item name='entity_no_longer_rules'>
            <item-attr name='caption' value='as the relevant government was no longer in control'/>
        </enum-item>
        <enum-item name='left_site'>
            <item-attr name='caption' value='after leaving the site'/>
        </enum-item>
        <enum-item name='reunited_with_loved_one'>
            <item-attr name='caption' value='after being reunited with a loved one'/>
        </enum-item>
        <enum-item name='violent_disagreement'>
            <item-attr name='caption' value='after a violent disagreement'/>
        </enum-item>
        <enum-item name='adopted'>
            <item-attr name='caption' value='after adoption'/>
        </enum-item>
        <enum-item name='true_name_invocation'>
            <item-attr name='caption' value='after invocation of the true name'/>
        </enum-item>

        <enum-item name='arrived_at_person'>
            <item-attr name='caption' value='after finding an unknown creature'/>
        </enum-item>
        <enum-item name='eradicate_beasts'>
            <item-attr name='caption' value='in order to eradicate beasts'/>
        </enum-item>
        <enum-item name='entertain_people'>
            <item-attr name='caption' value='in order to entertain people'/>
        </enum-item>
        <enum-item name='make_a_living_as_a_warrior'>
            <item-attr name='caption' value='in order to make a living as a warrior'/>
        </enum-item>
        <enum-item name='study'>
            <item-attr name='caption' value='in order to study'/>
        </enum-item>
        <enum-item name='flight'>
            <item-attr name='caption' value='in order to flee'/>
        </enum-item>
        <enum-item name='scholarship'>
            <item-attr name='caption' value='in order to pursue scholarship'/>
        </enum-item>
        <enum-item name='be_with_master'>
            <item-attr name='caption' value='in order to be with the master'/>
        </enum-item>
        <enum-item name='become_citizen'>
            <item-attr name='caption' value='in order to become a citizen'/>
        </enum-item>
        <enum-item name='prefers_working_alone'>
            <item-attr name='caption' value='in order to continue working alone'/>
        </enum-item>

        <enum-item name='jealousy'>
            <item-attr name='caption' value='due to jealousy'/>
        </enum-item>
        <enum-item name='glorify_hf'>
            <item-attr name='caption' value='in order to glorify an unknown creature'/>
        </enum-item>
        <enum-item name='have_not_performed'>
            <item-attr name='caption' value='due to a lack of performances'/>
        </enum-item>
        <enum-item name='prevented_from_leaving'>
            <item-attr name='caption' value='after being prevented from leaving'/>
        </enum-item>
        <enum-item name='curiosity'>
            <item-attr name='caption' value='out of curiosity'/>
        </enum-item>
        <enum-item name='hire_on_as_mercenary'>
            <item-attr name='caption' value='to fill a role as a mercenary'/>
        </enum-item>
        <enum-item name='hire_on_as_performer'>
            <item-attr name='caption' value='to fill a role as a performer'/>
        </enum-item>
        <enum-item name='hire_on_as_scholar'>
            <item-attr name='caption' value='to fill a role as a scholar'/>
        </enum-item>
        <enum-item name='drink'>
            <item-attr name='caption' value='in order to drink'/>
        </enum-item>
        <enum-item name='admire_architecture'>
            <item-attr name='caption' value='in order to admire achitecture'/>
        </enum-item>

        <enum-item name='pray'>
            <item-attr name='caption' value='in order to pray'/>
        </enum-item>
        <enum-item name='relax'>
            <item-attr name='caption' value='in order to relax'/>
        </enum-item>
        <enum-item name='danger'>
            <item-attr name='caption' value='to experience danger'/>
        </enum-item>
        <enum-item name='cannot_find_artifact'>
            <item-attr name='caption' value='after being unable to find an artifact'/>
        </enum-item>
        <enum-item name='failed_mood'>
            <item-attr name='caption' value='after failing to create an artifact'/>
        </enum-item>
        <enum-item name='lack_of_sleep'>
            <item-attr name='caption' value='due to a lack of sleep'/>
        </enum-item>
        <enum-item name='trapped_in_cage'>
            <item-attr name='caption' value='after being trapped in a cage'/>
        </enum-item>
        <enum-item name='great_deal_of_stress'>
            <item-attr name='caption' value='after a great deal of stress'/>
        </enum-item>
        <enum-item name='unable_to_leave_location'>
            <item-attr name='caption' value='after being unable to leave a location'/>
        </enum-item>
        <enum-item name='sanctify_hf'>
            <item-attr name='caption' value='in order to sanctify an unknown creature'/>
        </enum-item>

        <enum-item name='artifact_is_heirloom_of_family_hfid'>
            <item-attr name='caption' value='as an heirloom of the an unknown creature family'/>
        </enum-item>
        <enum-item name='cement_bonds_of_friendship'>
            <item-attr name='caption' value='in order to cement the bonds of friendship'/>
        </enum-item>
        <enum-item name='as_a_symbol_of_everlasting_peace'>
            <item-attr name='caption' value='as a symbol of everlasting peace'/>
        </enum-item>
        <enum-item name='on_a_pilgrimage'>
            <item-attr name='caption' value='on a pilgrimage'/>
        </enum-item>
        <enum-item name='gather_information'>
            <item-attr name='caption' value='to gather information'/>
        </enum-item>
        <enum-item name='seek_sanctuary'>
            <item-attr name='caption' value='in order to find sactuary'/>
        </enum-item>
        <enum-item name='part_of_trade_negotiation'>
            <item-attr name='caption' value='as part of a trade negotiation'/>
        </enum-item>
        <enum-item name='artifact_is_symbol_of_entity_position'>
            <item-attr name='caption' value='as a symbol of authority within an unknown civilization'/>
        </enum-item>
        <enum-item name='fear_of_persecution' since='0.47.01' comment='The ones below were introduced in 0.47.01 as well'>
            <item-attr name='caption' value='due to fear of persecution'/>
        </enum-item>
        <enum-item name='smooth_operation'>
            <item-attr name='caption' value='to smooth the operation of an unknown civilization'/>
        </enum-item>
        
        <enum-item name='nuance_belief'>
            <item-attr name='caption' value='due to a belief in nuances of'/>
        </enum-item>
        <enum-item name='shared_interest'>
            <item-attr name='caption' value='due to a shared interest in'/>
        </enum-item>
        <enum-item name='envy_living'>
            <item-attr name='caption' value='due to envy of those that live on'/>
        </enum-item>
        <enum-item name='death_panic'>
            <item-attr name='caption' value='due to panic about what happens after death'/>
        </enum-item>
        <enum-item name='death_fear'>
            <item-attr name='caption' value='due to fear of death'/>
        </enum-item>
        <enum-item name='avoid_judgement'>
            <item-attr name='caption' value='unable to face any possible judgment and the afterlife'/>
        </enum-item>
        <enum-item name='death_pride'>
            <item-attr name='caption' value='being too proud to give in to death'/>
        </enum-item>
        <enum-item name='death_vain'>
            <item-attr name='caption' value='being too vain to give in to death'/>
        </enum-item>
        <enum-item name='death_ambition'>
            <item-attr name='caption' value='having ambitions for which death was only a small obstacle'/>
        </enum-item>
        <enum-item name='lack_of_funds'>
            <item-attr name='caption' value='due to lack of funds'/>
        </enum-item>
        
        <enum-item name='battle_losses'>
            <item-attr name='caption' value='after taking heavy losses in battle'/>
        </enum-item>
        <enum-item name='conviction_exile'>
            <item-attr name='caption' value='after being exiled following a criminal conviction'/>
        </enum-item>
        <enum-item name='priest_vent'>
            <item-attr name='caption' value='to vent at a priest'/>
        </enum-item>
        <enum-item name='priest_cry'>
            <item-attr name='caption' value='to cry on a priest'/>
        </enum-item>
    </enum-type>

    <struct-type type-name='history_event_context'>
        <int32_t name='unk_00' init-value='0'/>
        <pointer name='unk_08'>
            <stl-vector type-name='int32_t' ref-target='historical_figure'/>
        </pointer>
        <pointer name='unk_10'> TODO: check size
            <int32_t name='unk_00' init-value='-1'/>
            <int32_t name='unk_04' init-value='-1'/>
            <int32_t name='interrogator_id' ref-target='historical_figure'/>
            <int32_t name='subject_id' ref-target='historical_figure'/>
        </pointer>
        <int32_t name='unk_18' init-value='-1'/>
        <int32_t name='unk_1c' init-value='-1'/>
        <int32_t name='unk_20' init-value='-1'/>
        <int32_t name='histfig_id_talker' init-value='-1'/>
        <int32_t name='histfig_id_listener' init-value='-1'/> TODO: verify that this hasn't moved
        <int32_t name='unk_2c' init-value='-1'/>
        <int32_t name='unk_30' init-value='-1'/>
        <int32_t name='unk_34' init-value='-1'/>
        <int32_t name='unk_38' init-value='-1'/>
        <int16_t name='unk_3c' init-value='-1'/>
        <int16_t name='unk_3e' init-value='-1'/>
        <int16_t name='unk_40' init-value='-1'/>
        <int32_t name='unk_44' init-value='1'/>
        <int16_t name='unk_48' init-value='-1'/>
        <int16_t name='unk_4a' init-value='-1'/>
        <int16_t name='unk_4c' init-value='-1'/>
        <int32_t name='unk_50' init-value='-1'/>
        <int8_t name='unk_54' init-value='-1'/>
        <int16_t name='unk_56' init-value='-1'/>
        <int16_t name='unk_58' init-value='0'/>
        <int16_t name='unk_5a' init-value='-1'/>
        <int32_t name='unk_5c' init-value='-1'/>
        <int32_t name='unk_60' init-value='-1'/>
        <int32_t name='unk_64' init-value='-1'/>
        <int32_t name='unk_68' init-value='-1'/>
        <int32_t name='unk_6c' init-value='-1'/>
        <int32_t name='unk_70' init-value='-1'/>
        <int32_t name='unk_74' init-value='-1'/>
        <int32_t name='unk_78' init-value='-1'/>
        <int32_t name='unk_7c' init-value='-1'/>
        <int32_t name='unk_80' init-value='-1'/>
        <int32_t name='unk_84' init-value='-1'/>
        <int32_t name='unk_88' init-value='-1'/>
        <int32_t name='unk_8c' init-value='-1'/>
        <int32_t name='unk_90' init-value='-1'/>
        <int32_t name='unk_94' init-value='-1'/>
        <int32_t name='unk_98' init-value='-1'/>
        <int32_t name='unk_9c' init-value='-1'/>
        <int32_t name='unk_a0' init-value='-1'/>
        <int32_t name='unk_a4' init-value='-1'/>
        <int32_t name='unk_a8' init-value='-1'/>
        <int32_t name='unk_ac' init-value='-1'/>
        <int32_t name='unk_b0' init-value='-1'/>
        <int32_t name='unk_b4' init-value='-1'/>
        <int32_t name='unk_b8' init-value='-1'/>
        <int32_t name='unk_bc' init-value='-1'/>
        <int32_t name='unk_c0' init-value='-1'/>
        <int32_t name='unk_c4' init-value='-1'/>
    </struct-type>

    <class-type type-name='history_event' original-name='history_eventst'
                instance-vector='$global.world.history.events' key-field='id'>
        <int32_t name='year'/>
        <int32_t name='seconds'/>
        <df-flagarray name='flags'/>
        <int32_t name='id'/>

        <virtual-methods>
            <vmethod ret-type='history_event_type' name='getType'/>
            <vmethod ret-type='int32_t' name='getWarStatus'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getAngerModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getHappinessModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='bool' name='madeFirstContact'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>

            <vmethod ret-type='int32_t' name='getKilledHistfigID'>
                <int32_t name='killer' ref-target='historical_figure'/>
                <ret-type><int32_t ref-target='historical_figure'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigKilled'>
                <int32_t name='victim' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigRevived'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod><int32_t/></vmethod>
            <vmethod><int32_t/></vmethod>

            -- 10

            <vmethod name='getRelatedHistfigIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_figure'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteStructureIDs'>
                <pointer name='vec1'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
                <pointer name='vec2'><stl-vector type-name='int32_t' ref-target='abstract_building'/></pointer>
            </vmethod>
            <vmethod name='getRelatedArtifactIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='artifact_record'/></pointer>
            </vmethod>
            <vmethod name='getRelatedRegionIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_region'/></pointer>
            </vmethod>

            <vmethod name='getRelatedLayerIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_underground_region'/></pointer>
            </vmethod>
            <vmethod name='getRelatedEntityIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_entity'/></pointer>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteID'>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteStructure'>
                <int32_t name='site' ref-target='world_site'/>
                <int32_t name='structure' ref-target='abstract_building'/>
            </vmethod>

            -- 20

            <vmethod ret-type='bool' name='isRelatedToArtifactID'>
                <int32_t name='artifact' ref-target='artifact_record'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToRegionID'>
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToLayerID'>
                <int32_t name='region' ref-target='world_underground_region'/>
            </vmethod>
            <vmethod ret-type='bool'><int32_t/></vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityID'>
                <int32_t name='entity' ref-target='historical_entity'/>
            </vmethod>

            <vmethod ret-type='bool'><int32_t/></vmethod>
            <vmethod name='getSentence'>
                <pointer type-name='stl-string' name='str'/> "In x, some event happened"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='getPhrase'>
                <pointer type-name='stl-string' name='str'/> "the happening of some event"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='populateArtImage'>
                <pointer type-name='art_image' name='image'/>
            </vmethod>
            <vmethod/>

            -- 30

            <vmethod/>
            <vmethod ret-type='bool'><int32_t/></vmethod>
            <vmethod/>
            <vmethod/>
            <vmethod name='generate_xml'>
                <pointer/>
                <pointer/>
            </vmethod>

            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_war_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_war_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_created_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='builder_hf' ref-target='historical_figure' since='v0.40.01'/>
    </class-type>

    <enum-type type-name='death_type' base-type='int16_t'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='OLD_AGE'/>
        <enum-item name='HUNGER'/>
        <enum-item name='THIRST'/>
        <enum-item name='SHOT'/>
        <enum-item name='BLEED'/>
        <enum-item name='DROWN'/>
        <enum-item name='SUFFOCATE'/>
        <enum-item name='STRUCK_DOWN'/>
        <enum-item name='SCUTTLE' comment='stuck wagons'/>
        <enum-item name='COLLISION'/>
        <enum-item name='MAGMA' comment='does not happen anymore?'/>
        <enum-item name='MAGMA_MIST' comment='does not happen anymore?'/>
        <enum-item name='DRAGONFIRE'/>
        <enum-item name='FIRE'/>
        <enum-item name='SCALD' comment='does not happen anymore?'/>
        <enum-item name='CAVEIN'/>
        <enum-item name='DRAWBRIDGE'/>
        <enum-item name='FALLING_ROCKS' comment='does not happen anymore?'/>
        <enum-item name='CHASM'/>
        <enum-item name='CAGE'/>
        <enum-item name='MURDER'/>
        <enum-item name='TRAP'/>
        <enum-item name='VANISH' comment='bogeyman'/>
        <enum-item name='QUIT' comment='Give in to starvation as adventurer'/>
        <enum-item name='ABANDON'/>
        <enum-item name='HEAT'/>
        <enum-item name='COLD'/>
        <enum-item name='SPIKE'/>
        <enum-item name='ENCASE_LAVA'/>
        <enum-item name='ENCASE_MAGMA'/>
        <enum-item name='ENCASE_ICE'/>
        <enum-item name='BEHEAD' comment='execution during worldgen'/>
        <enum-item name='CRUCIFY' comment='execution during worldgen'/>
        <enum-item name='BURY_ALIVE' comment='execution during worldgen'/>
        <enum-item name='DROWN_ALT' comment='execution during worldgen'/>
        <enum-item name='BURN_ALIVE' comment='execution during worldgen'/>
        <enum-item name='FEED_TO_BEASTS' comment='execution during worldgen'/>
        <enum-item name='HACK_TO_PIECES' comment='execution during worldgen'/>
        <enum-item name='LEAVE_OUT_IN_AIR' comment='execution during worldgen'/>
        <enum-item name='BOIL' comment='material state change'/>
        <enum-item name='MELT' comment='material state change'/>
        <enum-item name='CONDENSE' comment='material state change'/>
        <enum-item name='SOLIDIFY' comment='material state change'/>
        <enum-item name='INFECTION'/>
        <enum-item name='MEMORIALIZE' comment='put to rest'/>
        <enum-item name='SCARE'/>
        <enum-item name='DARKNESS' comment='died in the dark'/>
        <enum-item name='COLLAPSE' comment='used in 0.31 for undead'/>
        <enum-item name='DRAIN_BLOOD'/>
        <enum-item name='SLAUGHTER'/>
        <enum-item name='VEHICLE'/>
        <enum-item name='FALLING_OBJECT'/>
        <enum-item name='LEAPT_FROM_HEIGHT'/>
        <enum-item name='DROWN_ALT2'/>
        <enum-item/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_diedst' inherits-from='history_event'>
        <int32_t name='victim_hf' ref-target='historical_figure'/>

        <int32_t name='slayer_hf' ref-target='historical_figure'/>
        <int32_t name='slayer_race' ref-target='creature_raw'/>
        <int32_t name='slayer_caste' ref-target='caste_raw' aux-value='$$.slayer_race'/>

        <compound name='weapon' type-name='history_hit_item'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <enum base-type='int16_t' name='death_cause' type-name='death_type'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='link_type' type-name='histfig_entity_link_type'/>
        <int32_t name='position_id' comment='index into entity.positions.own'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='link_type' type-name='histfig_entity_link_type'/>
        <int32_t name='position_id' comment='index into entity.positions.own'/>
    </class-type>

    <class-type type-name='history_event_entity_expels_hfst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='expelled' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contactst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='contacted' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contact_failedst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='rejector' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_concludedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum base-type='int16_t' type-name='meeting_topic' name='topic'/>
        <int32_t name='result' comment='range from -3 to +2'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_rejectedst' inherits-from='history_event'>
        <enum base-type='int16_t' type-name='meeting_topic' name='topic'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_madest' inherits-from='history_event'>
        <enum base-type='int16_t' type-name='meeting_topic' name='topic'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_acceptedst' inherits-from='history_event'>
        <enum base-type='int16_t' type-name='meeting_topic' name='topic'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_rejectedst' inherits-from='history_event'>
        <enum base-type='int16_t' type-name='meeting_topic' name='topic'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_diplomat_lostst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='involved' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreements_voidedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_merchantst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2'/>
    </class-type>

    <class-type type-name='history_event_artifact_hiddenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_possessedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t/>
        <int32_t/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_artifact_createdst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <uint32_t name='flags2' comment='1 = name_only'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_lostst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_foundst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_artifact_recoveredst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_artifact_droppedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2'/> 1=due to injury
    </class-type>

    <class-type type-name='history_event_reclaim_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='flags2' comment='1 = unretire'/>
    </class-type>

    <class-type type-name='history_event_hf_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_diedst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='flags2' comment='1: abandoned'/>
    </class-type>

    <class-type type-name='history_event_site_retiredst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='flags2' comment='1: first time'/>
    </class-type>

    <class-type type-name='history_event_entity_createdst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t since='v0.47.02' init-value='-1'/>
    </class-type>

    <enum-type type-name='entity_action_type'>
        <enum-item name='entity_primary_criminals'/>
        <enum-item name='entity_relocate'/>
    </enum-type>

    <class-type type-name='history_event_entity_actionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <enum base-type='int32_t' name='action' type-name='entity_action_type'/>
    </class-type>

    <class-type type-name='history_event_entity_incorporatedst' inherits-from='history_event'>
        <int32_t name='migrant_entity' ref-target='historical_entity'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_created_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='builder_hf' ref-target='historical_figure'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_replaced_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='old_structure' ref-target='abstract_building'/>
        <int32_t name='new_structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_add_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum base-type='int32_t' name='type' type-name='histfig_site_link_type'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum base-type='int32_t' name='type' type-name='histfig_site_link_type'/>
    </class-type>

    <class-type type-name='history_event_add_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='type' type-name='histfig_hf_link_type'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='type' type-name='histfig_hf_link_type'/>
    </class-type>

    <class-type type-name='history_event_entity_razed_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>


    <class-type type-name='history_event_masterpiece_createdst' inherits-from='history_event'>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='maker_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_designst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t name='building_type'/>
        <int16_t name='building_subtype'/>
        <int32_t name='building_custom'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_constructst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t name='building_type'/>
        <int16_t name='building_subtype'/>
        <int32_t name='building_custom'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_itemst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum base-type='int32_t' name='skill_used' type-name='job_skill'/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_dye_itemst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t/>
        <int16_t name='dye_mat_type' ref-target='material' aux-value='$$.dye_mat_index'/>
        <int32_t name='dye_mat_index'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_item_improvementst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t/>
        <enum base-type='int16_t' name='improvement_type' type-name='improvement_type'/>
        <int32_t name='improvement_subtype'/>
        <int16_t name='imp_mat_type' ref-target='material' aux-value='$$.imp_mat_index'/>
        <int32_t name='imp_mat_index'/>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_foodst'
                inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='item_subtype' refers-to='$global.world.raws.itemdefs.food[$]'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_engravingst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum base-type='int32_t' name="skill_rating" type-name='skill_rating'
              comment='at the moment of creation'/>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <enum-type type-name='masterpiece_loss_type' base-type='int16_t'>
        <enum-item name='MELT'/>
        <enum-item name='MAGMA'/>
        <enum-item name='FORTIFICATION'/>
        <enum-item name='MINING'/>
        <enum-item name='CAVEIN'/>
        <enum-item name='VEGETATION'/>
    </enum-type>

    <class-type type-name='history_event_masterpiece_lostst' inherits-from='history_event'>
        <int32_t name='creation_event' ref-target='history_event'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum base-type='int16_t' name="method" type-name='masterpiece_loss_type'/>
    </class-type>

    <class-type type-name='history_event_change_hf_statest' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum base-type='int16_t' name='state'>
            <enum-item name='Wandering'/>
            <enum-item name='Settled'/>
            <enum-item name='Refugee'/>
            <enum-item/>
            <enum-item/>
            <enum-item name='Visiting'/>
        </enum>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_jobst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum base-type='int16_t' name='new_job' type-name='profession'/>
        <enum base-type='int16_t' name='old_job' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_war_field_battlest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_war_plundered_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_site_new_leaderst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='new_leaders' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_war_site_tribute_forcedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='season' comment='0 = spring, 1 = summer, 2 = autumn, 3 = winter'/>
        <bitfield name='tribute_flags' base-type='uint32_t'>
            <flag-bit name='bled_dry' comment='tribute was demanded, but not received'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_site_taken_overst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_surrenderedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_body_abusedst' inherits-from='history_event'>
        <stl-vector name='bodies' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <enum base-type='int16_t' name='abuse_type'>
            <enum-item name='Impaled' comment='props.item'/>
            <enum-item name='Piled' comment='props.pile_type'/>
            <enum-item name='Flayed' comment='props.structure'/>
            <enum-item name='Hung' comment='props.hung'/>
            <enum-item name='Mutilated' comment='no props'/>
            <enum-item name='Animated' comment='no props'/>
        </enum>
        <compound name='props' is-union='true'>
            <compound name='item'>
                <enum base-type='int16_t' name='item_type' type-name='item_type' comment='always WEAPON?'/>
                <int32_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index'/>
            </compound>
            <int32_t name='structure' ref-target='abstract_building'/>
            <enum base-type='int32_t' name='pile_type'>
                <enum-item name='GrislyMound'/>
                <enum-item name='GrotesquePillar'/>
                <enum-item name='GruesomeSculpture'/>
            </enum>
            <compound name='hung'>
                <int32_t name='tree' ref-target='plant_raw'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index' comment='rope'/>
                <int32_t name='mat_index' comment='rope'/>
            </compound>
        </compound>
    </class-type>

    <class-type type-name='history_event_hist_figure_abductedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='snatcher' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_item_stolenst' inherits-from='history_event'>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        <int32_t name='item' ref-target='item'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>

        <int32_t/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_razed_buildingst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_creature_devouredst' inherits-from='history_event'>
        <int32_t name='victim' ref-target='historical_figure'/>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='eater' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_woundedst' inherits-from='history_event'>
        <int32_t name='woundee' ref-target='historical_figure'/>
        <int32_t name='wounder' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='woundee_race' ref-target='creature_raw'/>
        <int16_t name='woundee_caste' ref-target='caste_raw' aux-value='$$.victim_race'/>
        <int16_t name='body_part'/>
        <enum name='injury_type' base-type='int16_t'>
            <enum-item name='Smash'/>
            <enum-item name='Slash'/>
            <enum-item name='Stab'/>
            <enum-item name='Rip'/>
        </enum>
        <int8_t name='part_lost'/>
    </class-type>

    <enum-type type-name='history_event_simple_battle_subtype' base-type='int16_t'>
        <enum-item name='SCUFFLE'/>
        <enum-item name='ATTACK'/>
        <enum-item name='SURPRISE'/>
        <enum-item name='AMBUSH'/>
        <enum-item name='HAPPEN_UPON'/>
        <enum-item name='CORNER'/>
        <enum-item name='CONFRONT'/>
        <enum-item name='LOSE_AFTER_RECEIVE_WOUND'/>
        <enum-item name='LOSE_AFTER_INFLICT_WOUND'/>
        <enum-item name='LOSE_AFTER_EXCHANGE_WOUND'/>
        <enum-item/>
        <enum-item/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_battle_eventst' inherits-from='history_event'>
        <stl-vector name='group1' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='group2' type-name='int32_t' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <enum base-type='int16_t' name='subtype' type-name='history_event_simple_battle_subtype'/>
    </class-type>

    <class-type type-name='history_event_created_world_constructionst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='construction'/>
        <int32_t name='master_construction'/>
        <int32_t name='site1' ref-target='world_site'/>
        <int32_t name='site2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reunionst' inherits-from='history_event'>
        <stl-vector name='missing' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='reunited_with' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='assistant' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reach_summitst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_travelst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum name='reason' base-type='int32_t'>
            <enum-item name='Journey' comment='made a journey to'/>
            <enum-item name='Return' comment='returned to'/>
            <enum-item name='Escape' comment='escaped from'/>
        </enum>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_new_petst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='pets' type-name='int16_t' ref-target='creature_raw'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_assume_identityst' inherits-from='history_event'>
        <int32_t name='trickster' ref-target='historical_figure'/>
        <int32_t name='identity' ref-target='identity'/>
        <int32_t name='target' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_create_entity_positionst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='position'/> historical_entity.position
        <int16_t name='reason'/>
    </class-type>

    <class-type type-name='history_event_change_creature_typest' inherits-from='history_event'>
        <int32_t name='changee' ref-target='historical_figure'/>
        <int32_t name='changer' ref-target='historical_figure'/>
        <int32_t name='old_race' ref-target='creature_raw'/>
        <int32_t name='old_caste' ref-target='caste_raw' aux-value='$$.race_from'/>
        <int32_t name='new_race' ref-target='creature_raw'/>
        <int32_t name='new_caste' ref-target='caste_raw' aux-value='$$.race_to'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_revivedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int16_t' name='ghost_type' type-name='ghost_type'/>
        <int32_t name='flags2' comment='1:again'/>
        <int32_t since='v0.47.02'/>
        <int32_t since='v0.47.02'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_learns_secretst' inherits-from='history_event'>
        <int32_t name='student' ref-target='historical_figure'/>
        <int32_t name='teacher' ref-target='historical_figure'/>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t/>
    </class-type>

    <enum-type type-name='histfig_body_state' base-type='int8_t'>
        <enum-item name='Active'/>
        <enum-item name='BuriedAtSite'/>
        <enum-item name='UnburiedAtBattlefield'/>
        <enum-item name='UnburiedAtSubregion'/>
        <enum-item name='UnburiedAtFeatureLayer'/>
        <enum-item name='EntombedAtSite'/>
        <enum-item name='UnburiedAtSite'/>
    </enum-type>

    <class-type type-name='history_event_change_hf_body_statest' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum base-type='int8_t' name='body_state' type-name='histfig_body_state'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_buildingst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'>
            <enum-item name='Profane'/>
            <enum-item name='Disturb'/>
            <enum-item name='PrayedInside'/>
        </enum>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_does_interactionst' inherits-from='history_event'>
        <int32_t name='doer' ref-target='historical_figure'/>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='source' ref-target='interaction_source' aux-value='$$.interaction'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hf_confrontedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='accuser' ref-target='historical_figure'/>
        <stl-vector name='reasons' type-name='int32_t'/> murder, not aging
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_entity_lawst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='add_flags'/> 1=harsh
        <int32_t name='remove_flags'/> 1=harsh
    </class-type>

    <class-type type-name='history_event_hf_gains_secret_goalst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='goal' type-name='goal_type' base-type='int32_t'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <int32_t since='v0.47.02' init-value='-1'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason' since='v0.47.02'/>
        <int32_t since='v0.47.02' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_artifact_storedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_agreement_formedst' inherits-from='history_event'>
        <int32_t name='agreement_id'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <enum-type type-name='site_dispute_type'>
        <enum-item name='Territory'/>
        <enum-item name='WaterRights'/>
        <enum-item name='GrazingRights'/>
        <enum-item name='FishingRights'/>
        <enum-item name='RightsOfWay'/>
        <enum-item name='LivestockOwnership'/>
    </enum-type>

    <class-type type-name='history_event_site_disputest' inherits-from='history_event'>
        <enum name='dispute_type' type-name='site_dispute_type' base-type='int32_t'/>
        <int32_t name='entity_1' ref-target='historical_entity'/>
        <int32_t name='entity_2' ref-target='historical_entity'/>
        <int32_t name='site_1' ref-target='world_site'/>
        <int32_t name='site_2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreement_concludedst' inherits-from='history_event'>
        <int32_t name='agreement_id'/>
        <int32_t name='subject_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='concluder_hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_insurrection_startedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='insurrection_outcome'>
        <enum-item name='LeadershipOverthrown'/>
        <enum-item name='PopulationGone'/>
        <enum-item name='Crushed'/>
    </enum-type>

    <class-type type-name='history_event_insurrection_endedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='outcome' type-name='insurrection_outcome' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_hf_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_performancest' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_competitionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <stl-vector type-name='int32_t' name='competitor_hf' ref-target='historical_figure'/>
        <stl-vector type-name='int32_t' name='winner_hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_processionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_ceremonyst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_knowledge_discoveredst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <compound name='knowledge' type-name='knowledge_scholar_category_flag'/>
        <int8_t name='first'/>
    </class-type>

    <class-type type-name='history_event_artifact_transformedst' inherits-from='history_event'>
        <int32_t name='new_artifact' ref-target='artifact_record'/>
        <stl-vector type-name='int32_t' name='old_artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_destroyedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='destroyer_hf' ref-target='historical_figure'/>
        <int32_t name='destroyer_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_relationship_deniedst' inherits-from='history_event'>
        <int32_t name='seeker_hf' ref-target='historical_figure'/>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='type' type-name='unit_relationship_type'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id' ref-target='historical_figure' comment='the historical figure that the reason describes'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_regionpop_incorporated_into_entityst' inherits-from='history_event'>
        <int32_t name='pop_race' ref-target='creature_raw'/>
        <int32_t name='number_moved'/>
        <int32_t name='pop_region' ref-target='world_region'/>
        <int32_t name='pop_layer' ref-target='world_underground_region'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_poetic_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='poetic_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_musical_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='musical_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_dance_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='dance_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_written_content_composedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='content' ref-target='written_content'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_change_hf_moodst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum base-type='int16_t' name='mood' type-name='mood_type'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_artifact_claim_formedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='position_profile'/>
        <enum name='claim_type' base-type='int32_t'>
            <enum-item name='Symbol'/>
            <enum-item name='Heirloom'/>
            <enum-item name='Treasure'/>
            <enum-item name='HolyRelic'/>
        </enum>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
    </class-type>

    <class-type type-name='history_event_artifact_givenst' inherits-from='history_event'> ?????????????
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='giver_hf' ref-target='historical_figure'/>
        <int32_t name='giver_entity' ref-target='historical_entity'/>
        <int32_t name='receiver_hf' ref-target='historical_figure'/>
        <int32_t name='receiver_entity' ref-target='historical_entity'/>
        <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type'/>
        <int32_t name='circumstance_id'/>
        <enum base-type='int32_t' name='reason' type-name='history_event_reason'/>
        <int32_t name='reason_id'/>
        <int32_t since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_artifactst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'>
            <enum-item name='View'/>
            <enum-item name='AskAbout'/>
        </enum>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_recruited_unit_type_for_entityst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum base-type='int16_t' name='profession' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_reputation_relationshipst' inherits-from='history_event'>
        <int32_t name='histfig1' ref-target='historical_figure'/>
        <int32_t name='identity1' ref-target='identity'/>
        <int32_t name='histfig2' ref-target='historical_figure'/>
        <int32_t name='identity2' ref-target='identity'/>
        <enum base-type='int32_t' name='rep1' type-name='reputation_type'/>
        <enum base-type='int32_t' name='rep2' type-name='reputation_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_artifact_copiedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='entity_dest' ref-target='historical_entity'/>
        <int32_t name='entity_src' ref-target='historical_entity'/>
        <int32_t name='site_dest' ref-target='world_site'/>
        <int32_t name='site_src' ref-target='world_site'/>
        <int32_t name='structure_dest' ref-target='abstract_building'/>
        <int32_t name='structure_src' ref-target='abstract_building'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='from_original'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_sneak_into_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_spotted_leaving_sitest' inherits-from='history_event'>
        <int32_t name='spotter_hf' ref-target='historical_figure'/>
        <int32_t name='leaver_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_searched_sitest' inherits-from='history_event'>
        <int32_t name='searcher_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='result' comment='0 = found nothing'/>
    </class-type>

    <class-type type-name='history_event_hf_freedst' inherits-from='history_event'>
        <int32_t name='freeing_civ' ref-target='historical_entity'/>
        <int32_t name='freeing_hf' ref-target='historical_figure'/>
        <int32_t name='holding_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='rescued_hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_simple_actionst' inherits-from='history_event'>
        <stl-vector name='group_hfs' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='type' comment='0 = hf carouse'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_rampaged_in_sitest' inherits-from='history_event'>
        <int32_t name='rampage_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_fled_sitest' inherits-from='history_event'>
        <int32_t name='fled_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='tactical_situation'>
        <enum-item name='attacker_strongly_favored'/>
        <enum-item name='attacker_favored'/>
        <enum-item name='attacker_slightly_favored'/>
        <enum-item name='defender_strongly_favored'/>
        <enum-item name='defender_favored'/>
        <enum-item name='defender_slightly_favored'/>
        <enum-item name='neither_favored'/>
    </enum-type>

    <class-type type-name='history_event_tactical_situationst' inherits-from='history_event'>
        <int32_t name='a_tactician_hfid' ref-target='historical_figure'/>
        <int32_t name='d_tactician_hfid' ref-target='historical_figure'/>

        <int32_t name='a_tactics_roll'/>
        <int32_t name='d_tactics_roll'/>

        <enum base-type='int32_t' name='situation' type-name='tactical_situation'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <bitfield name='tactics_flags' base-type='uint32_t'>
            <flag-bit name='start'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_squad_vs_squadst' inherits-from='history_event'>
        <int32_t name='a_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='a_leadership_roll'/>
        <stl-vector name='a_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='a_squad_id'/>
        <int32_t name='a_race' ref-target='creature_raw'/>
        <int32_t name='a_interaction'/>
        <int32_t name='a_effect'/>
        <int32_t name='a_number'/>
        <int32_t name='a_slain'/>

        <int32_t name='d_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='d_leadership_roll'/>
        <stl-vector name='d_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='d_squad_id'/>
        <int32_t name='d_race' ref-target='creature_raw'/>
        <int32_t name='d_interaction'/>
        <int32_t name='d_effect'/>
        <int32_t name='d_number'/>
        <int32_t name='d_slain'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_tradest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity' comment='the guild to which the figure belongs?'/>
      <int32_t name='source_site' ref-target='world_site'/>
      <int32_t name='dest_site' ref-target='world_site'/>
      <int32_t name='production_zone'/>
      <int32_t name='allotment'/>
      <int32_t name='allotment_index'/>
      <int32_t name='account_shift'/>
    </class-type>

    <class-type type-name='history_event_add_entity_site_profile_flagst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
      <int16_t/>
      <int16_t comment='always 1?'/>
    </class-type>

    <class-type type-name='history_event_gamblest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure'/>
      <int32_t name='account_before'/>
      <int32_t name='account_after'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_honorst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity_id' ref-target='historical_entity'/>
      <int32_t name='hfid' ref-target='historical_figure'/>
      <int32_t name='honor_id' comment='index into historical_entity.honors'/>
    </class-type>

    <class-type type-name='history_event_entity_dissolvedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <enum base-type='int32_t' name='circumstance' type-name='unit_thought_type' init-value='None'/>
      <int32_t name='circumstance_id' init-value='-1'/>
      <enum base-type='int32_t' name='reason' type-name='history_event_reason' init-value='none'/>
      <int32_t name='reason_id' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_entity_equipment_purchasest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t name='quality' comment='1 = well-crafted, 2 = finely-crafted, 3 = superior, 4 = exceptional, 5 = masterwork'/>
      <stl-vector name='hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_modified_buildingst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure' comment='index into world_site.buildings'/>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t/> always 12?
      <bitfield name='modification' base-type='uint32_t'>
        <flag-bit name='dungeon'/>
        <flag-bit name='fortifications'/>
        <flag-bit name='courtyard'/>
        <flag-bit name='feast_hall'/>
      </bitfield>
    </class-type>

    <class-type type-name='history_event_building_profile_acquiredst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='building_profile'/>
      <int32_t name='acquirer_hf' ref-target='historical_figure'/>
      <int32_t name='acquirer_entity' ref-target='historical_entity'/>
      <int32_t name='acquisition_type' comment='0: purchased, 1: inherited, 2: rebuilt'/>
      <int32_t name='previous_owner_hf' ref-target='historical_figure'/>
      <int32_t />
    </class-type>

    <class-type type-name='history_event_hf_preachst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='speaker_hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <int16_t name='topic' comment='11 = set entity 1 against entity 2, 12 = entity 1 should love entity 2'/>
      <int32_t name='entity1' ref-target='historical_entity'/>
      <int32_t name='entity2' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_entity_persecutedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='persecuting_hf' ref-target='historical_figure'/>
      <int32_t name='persecuting_entity' ref-target='historical_entity'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
      <stl-vector name='property_confiscated_from_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='destroyed_structures' type-name='int32_t'/>
      <int32_t name='shrines_destroyed'/>
      <stl-vector name='expelled_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='expelled_populations' type-name='int32_t'/>
      <stl-vector name='expelled_races' type-name='int32_t'/>
      <stl-vector name='expelled_counts' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_breach_feature_layerst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='site_entity' ref-target='historical_entity'/>
      <int32_t name='civ_entity' ref-target='historical_entity'/>
      <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_alliance_formedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <stl-vector name='joining_entities' type-name='int32_t' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_ransomedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='ransomed_hf' ref-target='historical_figure'/>
      <int32_t name='ransomer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hf_enslavedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='enslaved_hf' ref-target='historical_figure'/>
      <int32_t name='seller_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_sabotagest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='saboteur_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_overthrownst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='overthrown_hf' ref-target='historical_figure'/>
      <int32_t name='position_taker_hf' ref-target='historical_figure'/>
      <int32_t name='instigator_hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t/>
      <stl-vector name='conspirator_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_intrigue_relationshipst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity'/>
      <int32_t/> ? 6 = plots and schemes, 11 = agent
      <int32_t/> ? 4 = plots and schemes, 21 = agent
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02' init-value='-1'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_failed_intrigue_corruptionst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02' init-value='-1'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_hf_convictedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='convicted_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_hf' ref-target='historical_figure'/>
      <stl-vector name='implicated_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='corrupt_hf' ref-target='historical_figure'/>
      <int32_t name='behest_of_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='surveillance_hf' ref-target='historical_figure'/>
      <int32_t name='co_conspirator_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='crime' comment='references crime::T_mode'/>
      <int32_t name='hammerstrokes'/>
      <int32_t name='prison_months'/>
      <bitfield name='punishment_flags' base-type='uint32_t'>
        <flag-bit name='beaten'/>
        <flag-bit name='exiled'/>
        <flag-bit name='death_sentence' comment='sentenced to death'/>
        <flag-bit name='no_prison_available' comment='would have been imprisoned but for lack of accommodations'/>
      </bitfield>
      <bitfield name='plot_flags' base-type='uint32_t'>
        <flag-bit name='wrongful' comment='wrongful conviction'/>
        <flag-bit name='plot_surveillance' comment='due to ongoing surveillance as the plot unfolded'/>
        <flag-bit name='target_surveillance' comment='due to ongoing surveillance on the target'/>
        <flag-bit name='implicated_others' comment='implicated others during interrogation'/>
        <flag-bit name='co_conspirator_surveillance' comment='due to ongoing surveillance on a coconspirator'/>
        <flag-bit name='go_between' comment='convicted as go-between'/>
        <flag-bit name='revealed_nothing' comment='revealed nothing during interrogation'/>
      </bitfield>
    </class-type>

    <class-type type-name='history_event_failed_frame_attemptst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='plotter_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='crime' comment='references crime::T_mode'/>
    </class-type>

    <class-type type-name='history_event_hf_interrogatedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='arresting_entity' ref-target='historical_entity'/>
      <int32_t name='interrogator_hf' ref-target='historical_figure'/>
      <stl-vector name='implicated_hfs' ref-target='historical_figure' type-name='int32_t' />
      <int32_t name='interrogation_flags' comment='1: recognized, 2: refused to reveal anything'/>
    </class-type>

    <enum-type type-name='history_event_collection_type'>
        <enum-item name='WAR'/>
        <enum-item name='BATTLE'/>
        <enum-item name='DUEL'/>
        <enum-item name='SITE_CONQUERED'/>
        <enum-item name='ABDUCTION'/>
        <enum-item name='THEFT'/>
        <enum-item name='BEAST_ATTACK'/>
        <enum-item name='JOURNEY'/>
        <enum-item name='INSURRECTION'/>
        <enum-item name='OCCASION'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='PURGE'/>
        <enum-item name='RAID'/>
        <enum-item name='PERSECUTION'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
    </enum-type>

    <class-type type-name='history_event_collection' original-name='history_event_collectionst'
                instance-vector='$global.world.history.event_collections.all' key-field='id'>
        <stl-vector name='events' type-name='int32_t' ref-target='history_event'/>
        <stl-vector name='collections' type-name='int32_t' ref-target='history_event_collection'/>
        <int32_t name='start_year'/>
        <int32_t name='end_year'/>
        <int32_t name='start_seconds'/>
        <int32_t name='end_seconds'/>
        <df-flagarray name='flags'/>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='history_event_collection_type' name='getType'/>
            <vmethod name='generate_xml'>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod name='categorize'/>

            <vmethod name='uncategorize'/>
            <vmethod name='getName'><pointer name='string' type-name='stl-string'/></vmethod>
            <vmethod name='getRegionCoords'><pointer name='x' type-name='int16_t'/><pointer name='y' type-name='int16_t'/></vmethod>
            <vmethod name='getParent' ret-type='int32_t'/>
            <vmethod ret-type='int32_t'/>

            -- 10

            <vmethod name='isBetweenEntities' ret-type='int32_t'><int32_t name='defender_civ'/><int32_t name='attacker_civ'/></vmethod>
            <vmethod name='updateEndTime'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_collection_warst' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector/>
        <compound name='unk'>
            <stl-vector type-name='int16_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <int32_t/>
            <stl-vector name='ethics_unk1' type-name='int16_t'/>
            <stl-vector name='disputed_ethics' type-name='ethic_type'/>
            <stl-vector name='ethics_unk3' type-name='int32_t'/>
            <stl-vector name='dispute_severities' type-name='int32_t'/>
            <int32_t name='worst_severity'/>
            <stl-vector type-name='int16_t'/>
            <stl-vector type-name='int32_t'/>
            <stl-vector type-name='int32_t'/>
            <int32_t/>
        </compound>
    </class-type>

    <class-type type-name='history_event_collection_battlest' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='defender_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='noncombat_hf' type-name='int32_t' ref-target='historical_figure'/>

        these new fields are probably mixed in above or below
        <stl-vector/>
        <stl-vector/>
        <int32_t/>
        <int32_t init-value='-1'/>
        <int32_t init-value='-1'/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>

        <stl-vector name='attacker_squad_entity_pop' type-name='int32_t'/>
        <stl-vector name='attacker_squad_counts' type-name='int32_t'/>
        <stl-vector name='attacker_squad_deaths' type-name='int32_t'/>
        <stl-vector name='attacker_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='attacker_squad_sites' type-name='int32_t' ref-target='world_site'/>

        <stl-vector name='defender_squad_entity_pops' type-name='int32_t'/>
        <stl-vector name='defender_squad_counts' type-name='int32_t'/>
        <stl-vector name='defender_squad_deaths' type-name='int32_t'/>
        <stl-vector name='defender_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='defender_squad_sites' type-name='int32_t' ref-target='world_site'/>

        <int16_t name='outcome' comment='0 = attacker won, 1 = defender won'/>
    </class-type>

    <class-type type-name='history_event_collection_duelst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_hf' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
        <int8_t/>
    </class-type>

    <class-type type-name='history_event_collection_site_conqueredst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='site' ref-target='world_site'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <int16_t comment='uninitialized'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_abductionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>

        <stl-vector name='snatcher_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='victim_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector type-name='int32_t'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_theftst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='thief_civ' ref-target='historical_entity'/>
        <int32_t name='victim_civ' ref-target='historical_entity'/>

        <stl-vector name='thief_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='stolen_item_types'><enum base-type='int16_t' type-name='item_type'/></stl-vector>
        <stl-vector name='stolen_item_subtypes'><int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent._parent.stolen_item_types[$$._key] $)'/></stl-vector>
        <stl-vector name='stolen_mat_types'><int16_t ref-target='material' aux-value='$$._parent.stolen_mat_indices[$._key]'/></stl-vector>
        <stl-vector name='stolen_mat_indices' type-name='int32_t'/>
        <stl-vector name='stolen_item_ids' type-name='int32_t' ref-target='item'/>

        <stl-vector type-name='int32_t'/> most likely the same format as above
        <stl-vector type-name='int16_t'/>
        <stl-vector type-name='int16_t'/>
        <stl-vector type-name='int16_t'/>
        <stl-vector type-name='int32_t'/>
        <stl-vector type-name='int32_t'/>

        <stl-vector type-name='int32_t'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_beast_attackst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_journeyst' inherits-from='history_event_collection'>
        <stl-vector name='traveler_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_insurrectionst' inherits-from='history_event_collection'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_occasionst' inherits-from='history_event_collection'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_performancest' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t/>
        <int32_t/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_competitionst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t/>
        <int32_t/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_processionst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t/>
        <int32_t/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_ceremonyst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t/>
        <int32_t/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_purgest' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='site' ref-target='world_site'/>
        <stl-string name='adjective'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_raidst' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector type-name='int32_t'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_persecutionst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_entity_overthrownst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <enum-type type-name='era_type' base-type='int16_t'>
        <enum-item name='ThreePowers'/>
        <enum-item name='TwoPowers'/>
        <enum-item name='OnePower'/>
        <enum-item name='Myth'/>
        <enum-item name='Legends'/>
        <enum-item name='Twilight'/>
        <enum-item name='FairyTales'/>
        <enum-item name='Race'/>
        <enum-item name='Heroes'/>
        <enum-item name='Golden'/>
        <enum-item name='Death'/>
        <enum-item name='Civilization'/>
        <enum-item name='Emptiness'/>
    </enum-type>

    <struct-type type-name='history_era'>
        <int32_t name='year'/>
        <compound name='title'>
            <enum type-name='era_type' name='type'/>
            <int32_t name='histfig_1' ref-target='historical_figure'/>
            <int32_t name='histfig_2' ref-target='historical_figure'/>
            <int32_t name='ordinal'/>
            <stl-string name='name'/>
            <int32_t name='percent' comment='either percentage of single race or percentage of mundane'/>
        </compound>
        <compound name='details'>
            <int32_t name='living_powers'/>
            <int32_t name='living_megabeasts'/>
            <int32_t name='living_semimegabeasts'/>
            <int32_t name='power_hf1' ref-target='historical_figure'/>
            <int32_t name='power_hf2' ref-target='historical_figure'/>
            <int32_t name='power_hf3' ref-target='historical_figure'/>
            <stl-vector name='civilized_races' type-name='int32_t' index-refers-to='(find-creature $)'/>
            <int32_t name='civilized_total'/>
            <int32_t name='civilized_mundane'/>
        </compound>
    </struct-type>

    <struct-type type-name='world_history'>
        dtor 8532fa0

        <stl-vector name='events' pointer-type='history_event'/>
        <stl-vector name='events_death' pointer-type='history_event'/>

        <stl-vector since='v0.47.01'/>
        <stl-vector since='v0.47.01'/>

        <stl-vector name='figures' pointer-type='historical_figure'/>

        <compound name='event_collections'>
            <stl-vector name='all' pointer-type='history_event_collection'/>
            <static-array name='other' count='18' index-enum='history_event_collection_type'>
                <stl-vector pointer-type='history_event_collection'/>
            </static-array>
        </compound>

        <stl-vector name='eras' pointer-type='history_era'/>
        <stl-vector name='unk1' type-name='int32_t'/>
        <stl-vector name='unk2' type-name='int16_t'/>

        <int32_t name='total_unk'/> some value during worldgen, and at the end equals to the number of entities plus that value
        <int32_t name='total_powers' comment='also includes megabeasts'/>
        <int32_t name='total_megabeasts'/>
        <int32_t name='total_semimegabeasts'/>
        <stl-vector/>
        <static-array name='unk_v42_1' type-name='int16_t' count='28' since='v0.42.01'/> unsure but 16-bit values make more sense than 32-bit
        <stl-vector since='v0.47.01' comment='Not hist figs, nor history events. When looked at like hist figs the first field looks like an index, and history events crashes DF'/>
        <stl-vector name='live_megabeasts' pointer-type='historical_figure'/>
        <stl-vector name='live_semimegabeasts' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_3' pointer-type='historical_figure'/> 
        <stl-vector name='unk_histfig_4' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_5' pointer-type='historical_figure'/>
        <stl-vector since='v0.47.01'/>

        11 - necromancers
        <static-array name='unk_v40_1' since='v0.40.01' count='15'>
            <stl-vector pointer-type='historical_figure'/>
        </static-array>
        
        <stl-vector name='unk_histfig_6' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_7' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_8' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_9' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_10' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_11' since='v0.40.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_12' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_13' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector since='v0.44.01'/>
        <stl-vector since='v0.47.01'/>
        <stl-vector since='v0.47.01'/>
        <stl-vector since='v0.47.01'/>
        <stl-vector since='v0.47.01'/>
        <int8_t/>
        <stl-vector/>
        <int8_t/>
        <int32_t/>
        <int32_t/>
        <pointer/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
