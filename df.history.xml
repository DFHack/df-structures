<data-definition>
    <struct-type type-name='historical_kills' original-name='kill_profilest'>
        -- Important

        <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>

        -- Misc

        <stl-vector name="killed_race" type-name='int16_t' ref-target='creature_raw'/>
        <stl-vector name="killed_caste" type-name='int16_t' ref-target='caste_raw' aux-value='$$._parent.killed_race[$._key]'/>
        <stl-vector name="killed_underground_region" type-name='int32_t' ref-target='world_underground_region'/>
        <stl-vector name="killed_region" type-name='int32_t' ref-target='world_region'/>
        <stl-vector name="killed_site" type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='killed_undead'>
            <bitfield type-name='undead_flags'/>
        </stl-vector>
        <stl-vector name="killed_count" type-name='int32_t'/>
    </struct-type>

    <struct-type type-name='history_hit_item'> not a real structure, contents declared inline in all known locations
        <int32_t name='item' ref-target='item'/>
        <enum name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        -- If shot by a ranged weapon:
        <int32_t name='shooter_item' ref-target='item'/>
        <enum name='shooter_item_type' type-name='item_type'/>
        <int16_t name='shooter_item_subtype' refers-to='(item-subtype-target $$._parent.shooter_item_type $)'/>
        <int16_t name='shooter_mattype' ref-target='material' aux-value='$$.shooter_matindex'/>
        <int32_t name='shooter_matindex'/>
    </struct-type>

    <enum-type type-name='death_condition_type' base-type='int8_t'> bay12: HistFigBodyState
        <enum-item name='NONE' value='-1'/>
        <enum-item name='no_statement' comment="bay12: ACTIVE; alive or dead, but death conditions not registered here"/>
        <enum-item name='site_battle' comment="bay12: BURIED_AT_SITE; parameters: site id + optional structure"/>
        <enum-item name='region_battle' comment="bay12: UNBURIED_AT_BATTLEFIELD; parameters: two unknown values, usually small, with same pair being the same region, but neither is region_id"/>
        <enum-item name='wilderness' comment="bay12: UNBURIED_AT_SUBREGION; parameters: region_id + -1"/>
        <enum-item name='feature_layer' comment='bay12: UNBURIED_AT_FEATURE_LAYER'/>
        <enum-item name='entombed' comment="bay12: ENTOMBED_AT_SITE; same parameters as for site_battle, but structure seems to always be present and be a tomb"/>
        <enum-item name='site' comment="bay12: UNBURIED_AT_SITE; same parameters as for site_battle, old age and deadly confrontation seen"/>
    </enum-type>

    <enum-type type-name='plot_role_type' base-type='int32_t'> bay12: IntrigueRoleType
        <enum-item name='None' value='-1'/>
        <enum-item name='Possible_Threat'/>
        <enum-item name='Rebuffed'/>
        <enum-item name='Source_Of_Funds'/>
        <enum-item name='Source_Of_Funds_For_Master'/>
        <enum-item name='Master'/>
        <enum-item name='Suspected_Criminal'/>
        <enum-item name='Asset'/>
        <enum-item name='Lieutenant'/>
        <enum-item name='Usable_Thief'/>
        <enum-item name='Potential_Employer'/>

        <enum-item name='Indirect_Director' comment="Plot Thief"/>
        <enum-item name='Corrupt_Position_Holder'/>
        <enum-item name='Delivery_Target'/>
        <enum-item name='Handler'/>
        <enum-item name='Usable_Assassin'/>
        <enum-item name='Director' comment="Plot Assassin"/>
        <enum-item name='Enemy'/>
        <enum-item name='Usable_Snatcher'/>
        <enum-item name='Plot_Snatcher'/>
        <enum-item name='Plot_Saboteur'/>
        <enum-item name='Underworld_Contact'/>
        <enum-item name='Possibly_Unknown_Director'/>
    </enum-type>

    <enum-type type-name='plot_strategy_type' base-type='int32_t'> bay12: IntrigueStrategyType
        <enum-item name='None' value='-1'/>
        <enum-item name='Corrupt_And_Pacify'/>
        <enum-item name='Obey'/>
        <enum-item name='Avoid'/>
        <enum-item name='Use'/>
        <enum-item name='Tax'/>
        <enum-item name='Neutralize'/>
        <enum-item name='Monitor'/>
        <enum-item name='Work_If_Suited'/>
        <enum-item name='Torment'/>
    </enum-type>

    <struct-type type-name='plot_agreement' original-name='intrigue_plot_actorst'>
        <int32_t name='actor_id' ref-target='historical_figure'/>
        <enum name='plot_role' type-name='plot_role_type'/>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <bitfield name='flags' base-type='uint32_t'> bay12: INTRIGUE_PLOT_ACTOR_FLAG_*
            <flag-bit name='agreement_has_messenger'/>
        </bitfield>
    </struct-type>

    <struct-type type-name='state_profilest'>
        <enum name='state' type-name='whereabouts_type' base-type='int16_t'/>
        <int32_t name="site_id" ref-target='world_site'/>
        <int32_t name="subregion_id" ref-target='world_region'/>
        <int32_t name="feature_layer_id" ref-target='world_underground_region'/>
        <int32_t name="army_id" ref-target='army'/>
        <int32_t name='cz_id' ref-target='world_object_data'/>
        <int32_t name='cz_bld_num' init-value='-1'/>
        <int32_t init-value='-1' name='abs_smm_x' comment='same coordinate system as army'/>
        <int32_t init-value='-1' name='abs_smm_y'/>
        <bitfield name='flags'> bay12: STATE_PROFILE_FLAG_*
            <flag-bit name='XY_LOCATION_SMM_LEVEL'/>
            <flag-bit name='XY_LOCATION_IN_SUL'/>
        </bitfield>
        <enum name='body_state' type-name='death_condition_type' base-type='int8_t' init-value='NONE'/>
        <int32_t name='body_state_id' init-value='-1' comment="-1/site     /?/region_id/?/site     /site"/>
        <int32_t name='body_state_sub_id' init-value='-1' comment="-1/structure/?/-1       /?/structure/structure"/>
        <int32_t name='year' since='v0.42.01' init-value='-1' comment="time of arrival at site/region_id, not time of death"/>
        <int32_t name='year_tick' since='v0.42.01' init-value='-1'/>
    </struct-type>

    <enum-type type-name='inventory_profile_skill_type' base-type='int32_t'> bay12: InvPSkillType
        <enum-item name='AXE'/>
        <enum-item name='SWORD'/>
        <enum-item name='DAGGER'/>
        <enum-item name='MACE'/>
        <enum-item name='HAMMER'/>
        <enum-item name='SPEAR'/>
        <enum-item name='CROSSBOW'/>
        <enum-item name='PIKE'/>
        <enum-item name='WHIP'/>
        <enum-item name='BOW'/>
        <enum-item name='BLOWGUN'/>
        <enum-item name='SHIELD'/>
        <enum-item name='ARMOR'/>
    </enum-type>

    <struct-type type-name='creature_knowledgest'>
        <int32_t name='combined_caste_id'/>
        <bitfield name='flags' base-type='uint32_t'> bay12: CREATURE_KNOWLEDGE_FLAG_*
            <flag-bit name='heard_of'/>
            <flag-bit name='old_local'/>
            <flag-bit name='recent_encounter'/>
        </bitfield>

        <stl-vector name='site' type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='region' type-name='int32_t' ref-target='world_region'/>
        <stl-vector name='layer' type-name='int32_t' ref-target='world_underground_region'/>

        <bitfield name='scholar_flags' base-type='uint32_t'> bay12: CREATURE_KNOWLEDGE_SCHOLAR_FLAG_*
            <flag-bit name='foraging_behavior'/>
        </bitfield>
    </struct-type>

    <struct-type type-name='knowledge_profilest'>
        <stl-vector name='known_secrets' pointer-type='interaction' comment="bay12: interation_ptr; Interactions inflicted upon the figure through an I_SOURCE:SECRET means are recorded here; this appears to prevent the interaction from affecting the figure again on subsequent exposure (when rereading a necromancy slab, for example). For interactions with both I_SOURCE:SECRET and another source (I_SOURCE:INGESTION, for example), exposure to the interaction through the non-secret route does not result in the interaction being listed here."/>
        <int32_t name='next_intervention_resistance_year' init-value='-1' comment="All are gods with the DEATH sphere having created slabs, but the value isn't the id of the slab"/>
        <stl-vector name='known_written_contents' type-name='int32_t' ref-target='written_content' comment="bay12: read_written_content_id; ID of written_contents known to the historical figure. Aside from the contents of read books, these so-called written contents also include known derivations of poetic forms, dance forms and musical forms" since='v0.42.01'/>
        <stl-vector name="known_identities" type-name='int32_t' ref-target='identity' comment="bay12: identity_known_id; identity ID of identities known to the historical figure, such as demon true names"/>
        <stl-vector name='known_witness_reports' pointer-type='witness_incidentst' comment='bay12: witness_incident'/>
        <!-- <compound name='rumor_info' type-name='rumor_infost'/> instead of the following line -->
        <stl-vector name='known_events' pointer-type='entity_event'/>
        <stl-vector name='heard_of_guide_hfid' type-name='int32_t'/>
        <stl-vector name='heard_of_stid' type-name='int32_t'/>
        <compound name='opinion_info' type-name='opinion_infost'/>
        <stl-vector name='creature_knowledge' pointer-type='creature_knowledgest'/>
        <stl-vector name="known_poetic_forms" type-name='int32_t' ref-target='poetic_form' since='v0.42.01' comment='bay12: poetic_form_known_id'/>
        <stl-vector name="known_musical_forms" type-name='int32_t' ref-target='musical_form' since='v0.42.01' comment='bay12: musical_form_known_id'/>
        <stl-vector name="known_dance_forms" type-name='int32_t' ref-target='dance_form' since='v0.42.01' comment='bay12: dance_form_known_id'/>
        <pointer name="knowledge" since='v0.42.01'> bay12: scholar_knowledgest
            <bitfield type-name='knowledge_scholar_flags_0' name='philosophy'/>
            <bitfield type-name='knowledge_scholar_flags_1' name='philosophy2'/>
            <bitfield type-name='knowledge_scholar_flags_2' name='math'/>
            <bitfield type-name='knowledge_scholar_flags_3' name='math2'/>
            <bitfield type-name='knowledge_scholar_flags_4' name='history'/>
            <bitfield type-name='knowledge_scholar_flags_5' name='astronomy'/>
            <bitfield type-name='knowledge_scholar_flags_6' name='naturalist'/>
            <bitfield type-name='knowledge_scholar_flags_7' name='chemistry'/>
            <bitfield type-name='knowledge_scholar_flags_8' name='geography'/>
            <bitfield type-name='knowledge_scholar_flags_9' name='medicine'/>
            <bitfield type-name='knowledge_scholar_flags_10' name='medicine2'/>
            <bitfield type-name='knowledge_scholar_flags_11' name='medicine3'/>
            <bitfield type-name='knowledge_scholar_flags_12' name='engineering'/>
            <bitfield type-name='knowledge_scholar_flags_13' name='engineering2'/>
            <enum name='knowledge_goal_category' type-name='research_project_type'/>
            <int32_t name='research_project_id'/>
            <int32_t name='research_project_id2'/>
            <int32_t name='research_project_id3'/>
            <bitfield name='knowledge_goal'> bay12: unknown
                <flag-bit name='unk0'/>
            </bitfield>
            <uint32_t name='research_points' comment='research is finished at 100k? amount gained depends on skills, attributes'/>
            <uint32_t name='times_pondered' comment='one per ponder no matter what. turns into research_points somewhere around 40-60.'/>
        </pointer>
        <pointer name='belief_systems'> bay12: hf_religious_datast
            <stl-vector type-name='int32_t' ref-target='belief_system'/>
        </pointer>
        <pointer name='known_locations'> bay12: ab_review_infost
            <stl-vector name='ab_review'>
                <pointer> bay12: abstract_building_reviewst
                    <int32_t name='site_id' ref-target='world_site'/>
                    <int32_t name='location_id' ref-target='abstract_building' aux-value='$$.site_id'/>
                    <int32_t name='x' init-value='-1'/>
                    <int32_t name='y' init-value='-1'/>
                    <int32_t name='year' init-value='-1'/>
                    <int32_t name='season_tick' init-value='-1'/>
                    <static-array name='reputation' type-name='int32_t' count='8' index-enum='abstract_building_reputation_type'/>
                </pointer>
            </stl-vector>
        </pointer>
        <stl-vector name='known_agreement_id' type-name='int32_t' since='v0.47.01'/>
    </struct-type>

    <struct-type type-name='historical_figure_info' original-name='hf_profilest'>
        <pointer name="metaphysical"> bay12: metaphysical_profilest
            <stl-vector name="spheres">
                <enum base-type='int16_t' type-name='sphere_type'/>
            </stl-vector>
            <stl-vector name='associated_divination_set_id' type-name='int32_t' ref-target='divination_set' since='v0.47.01'/>
            <pointer name='appearance_pform' type-name='unit_appearance'/>
            <int32_t name='physical_form_strength'/>
            <int32_t name='physical_form_recuperation'/>
            <int32_t name='physical_form_age_days'/>
            <int32_t name='physical_form_seed'/>
            <int32_t name='related_civ_enid' ref-target='historical_entity'/>

            <int32_t name='physical_form_portrait_texpos' comment='not saved'/>
            <bool name='need_to_update_physical_form_portrait'/>
        </pointer>

        <pointer name="skills"> bay12: skill_profilest
            <stl-vector name="skills">
                <enum base-type='int16_t' type-name='job_skill'/>
            </stl-vector>
            <stl-vector name="points" type-name='int32_t' index-refers-to='$$._parent.skills[$]'/>
            <stl-vector name="professions_held">
                <enum base-type='int16_t' type-name='profession'/>
            </stl-vector>
            <stl-vector name="profession_years" type-name='int32_t' comment="Number of years on each profession above. Need not be consecutive, so non registered periods can happen"/>

            <enum base-type='int16_t' name='profession' type-name='profession'/>
            <bitfield name='flags' base-type='uint32_t'> bay12: SKILL_PROFILE_FLAG_*
                <flag-bit name='mood_spent'/>
                <flag-bit name='ran_replace_nemesis'/>
                <flag-bit name='mood_succeeded'/>
            </bitfield>
            <int32_t name="account_balance" comment = "Abstract tracker of this individual's wealth" since='v0.47.01'/>
            <pointer name='employment_held' since='v0.47.01'> bay12: honor_profilest
                <stl-vector name='employment'>
                    <pointer> bay12: honor_profile_entityst
                        <int32_t name='employer' ref-target='historical_entity'/>
                        <stl-vector type-name='int32_t' ref-target='honors_type' name='held_honors'/>
                        <int32_t name='battle_count'/>
                        <int32_t name='kill_count'/>
                        <int32_t name='employment_year'/>
                        <int32_t name='employment_year_tick'/>
                    </pointer>
                </stl-vector>
                <int32_t name='resignment_year'/>
                <int32_t name='resignment_year_tick'/>
            </pointer>
        </pointer>

        <pointer name="pets"> bay12: pet_profilest
            <stl-vector type-name='int16_t' ref-target='creature_raw'/>
        </pointer>

        <pointer name='personality'> bay12: personality_profilest
            <compound name='personality' type-name='unit_personality'/>
            <enum name='wg_mood' type-name='mood_type' since='v0.44.01'/>
        </pointer>

        <pointer name="masterpieces"> bay12: artistic_profilest
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-vector name="lost_events" type-name='int32_t' ref-target='history_event' comment='refers to the creation events, not the destruction events'/>
            <stl-vector name='personal_art_image_chunk' type-name='int32_t' since='v0.42.06'/>
            <stl-vector name='personal_art_image_chunk_member' type-name='int16_t' since='v0.42.06'/>
            <static-array name='top_related_heid' count='100' type-name='int32_t' ref-target='history_event'/>
            <int32_t name='top_related_heid_num' comment='amount used in above list'/>
            <int32_t name='top_related_heid_last_check_index'/>
        </pointer>

        <pointer type-name='state_profilest' name='whereabouts'/>

        <pointer name="kills" type-name='historical_kills'/>

        <pointer name="wounds"> bay12: body_profilest
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-bit-vector name="status" comment='missing body parts'>
                <code-helper name='index-refers-to'>
                    (let* ((info $$._parent._parent._parent)
                           (figure $info._parent._parent)
                           (caste (find-instance $caste_raw $figure.caste $figure.race)))
                      $caste.body_parts[$])
                </code-helper>
            </stl-bit-vector>
            <int32_t name='childbirth_year'/>
            <int32_t name='childbirth_tick'/>
            <bitfield name='flag' since='v0.40.19'> bay12: BODY_PROFILE_FLAG_*
                <flag-bit name='gelded'/>
            </bitfield>
        </pointer>

        <pointer name='known_info' type-name='knowledge_profilest' since='v0.34.01' comment='knowledge_profile'/>

        <pointer name='curse' since='v0.34.01'> bay12: interaction_profilest
            <stl-vector name="active_interactions" pointer-type='interaction'/>
            <stl-vector name="active_effects" pointer-type='interaction_effect'/>
            <stl-vector name="active_interaction_year" type-name='int32_t'/>
            <stl-vector name="active_interaction_season_tick" type-name='int32_t'/>
            <stl-vector name="can_do" pointer-type='interaction'/>
            <bitfield name="add_caste_flag" type-name='cie_add_tag_mask1'/>
            <bitfield name="remove_caste_flag" type-name='cie_add_tag_mask1'/>
            <bitfield name="add_property" type-name='cie_add_tag_mask2'/>
            <bitfield name="remove_property" type-name='cie_add_tag_mask2'/>
            <int8_t name="use_display_name"/>
            <stl-string name="name"/>
            <stl-string name="name_plural"/>
            <stl-string name="name_adjective"/>
            <int32_t name='race' ref-target='creature_raw'/>
            <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
            <stl-vector name='body_transformation_effects' type-name='int32_t' ref-target='creature_interaction_effect' comment='forced periodic transformations'/>
            <stl-vector name='voluntary_body_transformation_effects' type-name='int32_t' ref-target='creature_interaction_effect'/>
            <stl-vector name='body_mat_interaction_effects' type-name='int32_t' ref-target='creature_interaction_effect'/>
            <int32_t name="original_histfig_id" ref-target='historical_figure' comment='ID of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_race" ref-target='creature_raw' comment='race of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_caste" ref-target='caste_raw' aux-value='$$.original_race' comment='caste of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="root_body_part_id" comment='ID of the root body part in the corpse or corpse piece which was reanimated to produce undead historical figure'/>
            <stl-string name="undead_name" comment='display name of reanimated creatures in legends mode'/>
            <int32_t name="disturbed_heid" ref-target='history_event'/>
            <pointer name='divination' since='v0.47.01'> bay12: divination_profilest
                <stl-vector name='deities' type-name='int32_t' ref-target='historical_figure' comment='When a divination die is rolled, the historical figure ID of the associated god is inserted here.'/>
                <stl-vector name='divination_sets' type-name='int32_t' ref-target='divination_set' comment='When a divination die is rolled, the ID of the associated divination_set is inserted here.'/>
                <stl-vector name='roll_results' type-name='int32_t' comment='When a divination die is rolled, the numerical roll result is inserted here.'/>
                <stl-vector name='year_rolled' type-name='int32_t' comment='When a divination die is rolled, the cur_year value at the time of rolling is inserted here.'/>
                <stl-vector name='year_tick_rolled' type-name='int32_t' comment='When a divination die is rolled, the cur_year_tick at the time of rolling is inserted here.'/>
                <bitfield name='flags' base-type='uint32_t'> bay12: DIVINATION_PROFILE_FLAG_*
                    <flag-bit name='fate_sealed'/>
                </bitfield>
            </pointer>
            <pointer name='experiments' since='v0.47.01'> bay12: experiment_profilest
                <stl-vector name='experiment' type-name='night_creature_experiment_type'/>
                <stl-vector name='races' type-name='int32_t' comment='contains IDs of races created by the historical figure through experimentation'/>
            </pointer>
        </pointer>

        <pointer name='books' since='v0.34.01'> bay12: inventory_profilest
            <stl-vector name='artifacts_held' pointer-type='artifact_record' comment="held as in possession, doesn't include stored"/>
            <int32_t name='army_strength_material_bonus' since='v0.44.01'/>
            <int32_t name='average_equipment_quality' since='v0.47.01'/>
            <static-array name='invp_skill_ip' type-name='int32_t' count='13' index-enum='inventory_profile_skill_type' since='v0.44.06' comment="only when specific_items flag set"/>
            <static-array name='invp_mat_strength' type-name='int32_t' count='13' index-enum='inventory_profile_skill_type' since='v0.44.06' comment="only when specific_items flag set"/>
            <bitfield name='flags' base-type='uint32_t' since='v0.44.06'> bay12: INVENTORY_PROFILE_FLAG_*
                <flag-bit name='specific_items'/>
                <flag-bit name='use_average_equipment_quality'/>
                <flag-bit name='use_mythical_substances'/>
            </bitfield>
            <enum name='using_weapon_skill' type-name='job_skill' since='v0.44.06' comment='not saved'/>
            <pointer name='building_usage_profile' since='v0.47.01'> bay12: hf_building_usage_profilest
                <stl-vector name='usage'>
                    <pointer> bay12: hf_building_usagest
                        <int32_t name='site_id' ref-target='world_site'/>
                        <int32_t name='site_property_id'/>
                    </pointer>
                </stl-vector>
                <int32_t  name='last_checked_year'/>
            </pointer>
        </pointer>

        <pointer name='reputation' since='v0.34.01'> bay12: reputation_profilest
            <stl-vector name="wanted" comment='entity_profile' pointer-type='entity_personal_reputation_profilest'/>
            <stl-vector name='cultural_identity_profile' pointer-type='ci_personal_reputation_profilest'/>
            <int32_t name="cur_identity" ref-target='identity'/>
            <stl-vector name="all_identities" type-name='int32_t' ref-target='identity'/>
            <bitfield name='flags' base-type='uint32_t' since='v0.47.01'> bay12: REPUTATION_PROFILE_FLAG_*
                <flag-bit name='have_true_name'/>
                <flag-bit name='have_villainous_identity'/>
                <flag-bit name='did_villainous_id_check'/>
                <flag-bit name='did_major_networks_pass'/>
            </bitfield>
            <pointer name='journey_profile' since='v0.44.01'> bay12: journey_profilest
                <enum name='type' base-type='int32_t'> bay12: JourneyType
                    <enum-item name='REST_AND_RECOVER'/>
                    <enum-item name='RECOVER_ARTIFACT'/>
                    <enum-item name='PILGRIMAGE_TO_HOLY_SITE'/>
                    <enum-item name='GATHER_INFORMATION'/>
                </enum>
                <int32_t name='year' comment="Seen in visitors during fort mode, logs the time that they arrived"/>
                <int32_t name='year_ticks'/>
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='dest_site' ref-target='world_site'/>
                <int32_t name='dest_structure' ref-target='abstract_building'/>
                <int32_t name='giver_hf' ref-target='historical_figure'/>
                <int32_t name='giver_en' ref-target='historical_entity'/>
                <int32_t name='return_site' ref-target='world_site'/>
                <int32_t name='return_structure' ref-target='abstract_building'/>
                <bitfield name='flags' base-type='uint32_t' since='v0.47.01'> bay12: JOURNEY_PROFILE_FLAG_*
                    <flag-bit name='preparing'/>
                </bitfield>
                <stl-vector name='milestone'>
                    <pointer> bay12: journey_milestonest
                        <enum name='type' base-type='int32_t'> bay12: JourneyMilestoneType
                            <enum-item name='STARTED_PILGRIMAGE'/>
                            <enum-item name='VIEWED_HOLY_RELIC'/>
                            <enum-item name='VISITED_HOLY_SITE'/>
                        </enum>
                        <int32_t name='main_relevant_id'/>
                        <int32_t name='site_id' ref-target='world_site'/>
                        <int32_t name='structure_id' ref-target='abstract_building'/>
                        <int32_t name='year'/>
                        <int32_t name='season_tick'/>
                    </pointer>
                </stl-vector>
                <stl-vector name='searched_sites' type-name='int32_t' since='v0.44.01' ref-target='world_site'/>
            </pointer>
        </pointer>

        <pointer name='relationships' type-name='historical_figure_relationships'/>
    </struct-type>

    <struct-type type-name='core_hf_relationshipst'>
        <int32_t name='loyalty' comment="0 - 100. Loyalty, Respect, Fear, and Trust values do not seem to affect the relationship screen description, only Love and Familiarity"/>
        <int32_t name='respect' comment="-100 - 100"/>
        <int32_t name='fear' comment="-100 - 100"/>
        <int32_t name='love' comment="-100 - 100. Affects relation description: -100: Pure Hate, LE -75: Hated, LE -50: Disliked, LE 49: Acquaintance, LE 74: Friend, LE 99: Close Friend, 100: Kindred Spirit. Lower histfig_id is sorted above higher, except Acquaintance which is sorted on Familiarity"/>
        <int32_t name='trust' comment="-100 - 100"/>
    </struct-type>

    <struct-type type-name='relationship_profile_hf_visualst'>
        <int32_t name='histfig_id' ref-target='historical_figure'/>
        <bitfield name='flags'> bay12: RELATIONSHIP_PROFILE_HF_FLAG_*
            <flag-bit name='basic_name_known'/>
        </bitfield>
        <stl-vector name='known_associated_identity_id' type-name='int32_t' ref-target='identity' comment="Involves adventurer knowing name?"/>
        <stl-vector name="attitude" type-name='reputation_type' comment="Probably ordered"/>
        <stl-vector name="counter" type-name='int32_t' comment="One element for each 'attitude' element. Guess 0 - 100"/>
        <enum name='rank' type-name='vague_relationship_type' since='v0.47.01'/>
        <compound name='core' type-name='core_hf_relationshipst'/>
        <int32_t name='meet_count' since='v0.44.10'/>
        <int32_t name='last_meet_year' comment="probably latest contact. Seen -1"/>
        <int32_t name='last_meet_season_tick'/>
        <int32_t name='abs_x' since='v0.47.01'/>
        <int32_t name='abs_y' since='v0.47.01'/>
        <int32_t name='abs_z' since='v0.47.01'/>
        <int32_t name='transient_attitude' since='v0.47.01'/>
        <int32_t name='transient_patience' since='v0.47.01'/>
        <int32_t name='transient_confidence' since='v0.47.01'/>
        <int32_t name='transient_agitation' since='v0.47.01'/>
        <int32_t name='transient_failed_persuade_attempts' since='v0.47.01'/>
        <int32_t name='transient_failed_intimidate_attempts' since='v0.47.01'/>
        <int32_t name='first_year' comment="transient_last_reset" since='v0.47.01'/>
        <int32_t name='first_year_tick' since='v0.47.01'/>
    </struct-type>

    <struct-type type-name='relationship_profile_hf_historicalst'>
        <int32_t name='histfig_id' ref-target='historical_figure'/>
        <stl-vector name='known_associated_identity_id' type-name='int32_t' ref-target='identity'/>
        <stl-vector name="attitude" type-name='reputation_type'/>
        <stl-vector name="counter" type-name='int32_t' comment="One element for each 'attitude' element"/>
        <compound name='core' type-name='core_hf_relationshipst'/>
    </struct-type>

    <struct-type type-name='historical_figure_relationships' original-name='relationship_profilest'>
        <stl-vector name='hf_visual' pointer-type='relationship_profile_hf_visualst'/>
        <!--
            Entries with a 'rank' value of zero are suppressed from display. Display order seems to depend on
            the value of the first 'attitude' entry.
            Buddy/Grudge/AnimalPartner entries forms the primary group, sorted in ascending histfig id order.
            The secondary group consists of Friendly, where the internal sort order is based on higher 'rank'.
            If the 'rank' is equal the histfig id determines the order.
            The tertiary group consists of zero length 'attitude' entries. Those are again sorted based on higher
            'rank', with histfig id breaking ties.
            Note that only the entries listed above have been observed as the first 'attitude' element, with others
            optionally added as well. This does not mean they may not exist, but that the sort order described above
            may be incomplete.
            The role of 'counter' is unknown, but might somehow tick over into an increase in rank. It does not seem
            to play any part in the display sort order.
        -->
        <stl-vector name='hf_historical' since='v0.44.01' pointer-type='relationship_profile_hf_historicalst'/>
        <stl-vector name='hf_identity' since='v0.44.01'>
            <pointer> bay12: relationship_profile_hf_identityst
                <int32_t name='identity_id' ref-target='identity'/>
                <stl-vector name="attitude" type-name='reputation_type'/>
                <stl-vector name="counter" type-name='int32_t' comment="One element for each 'attitude' element"/>
                <compound name='core' type-name='core_hf_relationshipst'/>
            </pointer>
        </stl-vector>
        <stl-vector name='identities' type-name='int32_t' ref-target='cultural_identity'/>
        <stl-vector name='artifact_claims' since='v0.44.01'>
            <pointer> bay12: relationship_profile_artifactst
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <enum name='type' type-name='artifact_claim_type'/>
                <int32_t name='year'/>
                <int32_t name='year_tick'/>
                <int32_t name='renounce_event' ref-target='history_event'/>
            </pointer>
        </stl-vector>
        <uint32_t name='flag'/> bay12: unknown flags

        <pointer name='intrigues'> bay12: intrigue_perspectivest
            <stl-vector name='potential_corrupt_reason' type-name='history_event_reason'/>
            <stl-vector name='potential_corrupt_target' type-name='int32_t'/>
            <stl-vector name='potential_corrupt_circumstance'>
                <enum type-name='unit_thought_type' base-type='int32_t'/>
            </stl-vector>
            <stl-vector name='potential_corrupt_circumstance_target' type-name='int32_t' init-value='-1'/>

            <stl-vector name='plots'>
                <pointer> bay12: intrigue_plotst
                    <int32_t name='id' comment="starts as index in parent vector"/>
                    <enum name='plot_type' base-type='int32_t'> bay12: IntriguePlotType
                        <enum-item name='None' value='-1'/>
                        <enum-item name='Grow_Funding_Network'/>
                        <enum-item name='Grow_Asset_Network'/>
                        <enum-item name='Acquire_Artifact'/> artifact id
                        <enum-item name='Grow_Corruption_Network'/>
                        <enum-item name='Attain_Rank'/>
                        <enum-item name='Assassinate_Actor'/> actor id
                        <enum-item name='Corruptly_Punish_Actor'/> actor id
                        <enum-item name='Frame_Actor'/> actor id
                        <enum-item name='Kidnap_Actor'/> actor id
                        <enum-item name='Sabotage_Actor'/> actor id
                        <enum-item name='Direct_War_To_Actor'/> actor id
                        <enum-item name='Corrupt_Actors_Government'/> actor id
                        <enum-item name='Counterintelligence'/> civ id
                        <enum-item name='Become_Immortal'/>
                        <enum-item name='Undead_World_Conquest'/>
                        <enum-item name='Infiltrate_Society'/> civ id
                    </enum>
                    <int32_t name='parameter' init-value='-1' comment="2:artifact_id, 5-11:actor_id, 12/15:entity_id"/>
                    <bitfield name='flags' base-type='uint32_t'> bay12: INTRIGUE_PLOT_FLAG_*
                        <flag-bit name='on_hold'/>
                    </bitfield>
                    <stl-vector name='plot_agreements' pointer-type='plot_agreement'/>
                    <compound name='plot_data' is-union='true'>
                        <pointer name='Sabotage_Actor'> bay12: intrigue_plot_sabotage_actorst
                            <int32_t name='target_civ' ref-target='historical_entity'/>
                            <int32_t name='target_site' ref-target='world_site'/>
                        </pointer>
                        <pointer name='Undead_World_Conquest'> bay12: intrigue_plot_undead_animator_world_conquestst
                            <stl-vector name='searched_battlefield_id' type-name='int32_t'/>
                        </pointer>
                        <pointer name='Infiltrate_Society'> bay12: intrigue_plot_infiltrate_societyst
                            <bitfield name='flags' base-type='uint32_t'> bay12: INTRIGUE_PLOT_INFILTRATE_SOCIETY_FLAG_*
                                <flag-bit name='steal'/>
                                <flag-bit name='initiate_sabotage_among_agents'/>
                                <flag-bit name='instill_terror'/>
                                <flag-bit name='prepare_coup'/>
                            </bitfield>
                            <int32_t name='last_entered_year' init-value='-1'/>
                            <int32_t name='last_entered_season_count' init-value='0'/>
                        </pointer>
                    </compound>
                    <int32_t name='delegated_plot_id' init-value='-1'/>
                    <int32_t name='delegated_plot_hfid' ref-target='historical_figure'/>
                    <int32_t name='parent_plot' init-value='-1'/>
                    <int32_t name='parent_plot_hfid' ref-target='historical_figure'/>
                    <int32_t name='agreement' ref-target='agreement'/>
                    <int32_t name='actor_nemesis_id' ref-target='nemesis_record'/>
                    <int32_t name='task_id' init-value='-1' comment="0-8 seen"/>
                    <int32_t name='plotter_nemesis_id' ref-target='nemesis_record'/>
                    <int32_t name='message_id' init-value='-1' comment="0-5 seen"/>
                </pointer>
            </stl-vector>
            <int32_t name='next_plot_id'/>

            <stl-vector name='revealed_agreements' pointer-type='agreement'/>
            <stl-vector name='agreemeents' pointer-type='agreement'/>
            <stl-vector name='intrigue'>
                <pointer> bay12: intrigue_actorst
                    <int32_t name='id' comment="index into the parent vector (at least initially)"/>
                    <bitfield name='flags' base-type='uint32_t'> bay12: INTRIGUE_ACTOR_FLAG_*
                        <flag-bit name='using_handler_for_contact'/>
                        <flag-bit name='i_promised_ia_immortality'/>
                        <flag-bit name='ia_promised_me_immortality'/>
                    </bitfield>
                    <int32_t name='hf_1' ref-target='historical_figure' comment="visual relation seen"/>
                    <int32_t name='hf_2' ref-target='historical_figure' comment="visual relation seen"/>
                    <int32_t name='identity_id' ref-target='identity'/>
                    <int32_t name='entity' ref-target='historical_entity' comment="site government seen. Target? Possible threat?"/>
                    <int32_t name='handle_actor_id' init-value='-1' comment="based on exported XML instances"/>

                    <enum name='role' type-name='plot_role_type' base-type='int32_t'/>
                    <enum name='strategy' type-name='plot_strategy_type' base-type='int32_t'/>
                    <int32_t name='strategy_enid' ref-target='historical_entity' comment="site government seen. Target? Member of/possible threat?"/>
                    <int32_t name='strategy_eppid' init-value='-1' comment='entity position assignment'/>
                    <stl-vector name='active_plot_id' type-name='int32_t'/>
                </pointer>
            </stl-vector>
            <int32_t name='next_intrigue_id'/>

            <stl-vector name='coup_check_enid' type-name='int32_t' comment="4 bytes allocated observed, which cant' host a pointer"/>
            <stl-vector name='task'>
                <pointer> bay12: taskst
                    <int32_t name='id'/>
                    <enum name='type' base-type='int32_t'>
                        <enum-item name='hire_plot_actor'/>
                        <enum-item name='satisfy_agreement'/>
                        <enum-item name='send_message'/>
                        <enum-item name='delegate_plot'/>
                    </enum>
                    <bitfield name='flags' base-type='uint32_t'> bay12: unknown flags
                        <flag-bit name='unk0'/>
                    </bitfield>
                    <compound name='data' is-union='true'>
                        <pointer name='hire_plot_actor'> bay12: task_hire_plot_actorst
                            <int32_t name='plot_origin_hfid' ref-target='historical_figure'/>
                            <int32_t name='plot_id'/>
                            <int32_t name='hire_hfid' ref-target='historical_figure'/>
                            <int32_t name='rate'/>
                        </pointer>
                        <pointer name='satisfy_agreement'> bay12: task_satisfy_agreementst
                            <int32_t name='agreement_id'/>
                            <int32_t name='plot_origin_hfid' ref-target='historical_figure'/>
                            <int32_t name='plot_id'/>
                        </pointer>
                        <pointer name='send_message'> bay12: task_send_messagest
                            <compound name='msg' type-name='messagest'/>
                            <int32_t name='recipient_hfid' ref-target='historical_figure'/>
                            <int32_t name='plot_origin_hfid' ref-target='historical_figure'/>
                            <int32_t name='plot_id'/>
                        </pointer>
                        <pointer name='delegate_plot'> bay12: task_delegate_plotst
                            <int32_t name='plot_origin_hfid' ref-target='historical_figure'/>
                            <int32_t name='plot_id'/>
                            <int32_t name='delegate_hfid' ref-target='historical_figure'/>
                            <int32_t name='rate'/>
                        </pointer>
                    </compound>
                </pointer>
            </stl-vector>
            <int32_t name='next_task_id'/>

            <stl-vector name='message' pointer-type='messagest'/>
            <int32_t name='next_message_id'/>
            <int32_t name='next_message_year' init-value='-1'/>
            <int32_t name='next_message_season_count' init-value='-1'/>
        </pointer>
    </struct-type>

    <enum-type type-name='histfig_flags'> bay12: HistoryFigureFlagType
        <enum-item name='reveal_artwork'/>
        <enum-item name='equipment_created'/>
        <enum-item name='deity'/>
        <enum-item name='force'/>
        <enum-item name='skeletal_deity'/>
        <enum-item name='rotting_deity'/>
        <enum-item name='worldgen_acted'/>
        <enum-item name='ghost'/>
        <enum-item name='skin_destroyed'/>
        <enum-item name='meat_destroyed'/>
        <enum-item name='bones_destroyed'/>
        <enum-item name='brag_on_kill'/>
        <enum-item name='kill_quest'/>
        <enum-item name='chatworthy'/>
        <enum-item name='flashes'/>
        <enum-item name='never_cull'/>
    </enum-type>

    <enum-type type-name='vague_relationship_type' base-type='int16_t'> bay12: WGRelationshipType
        <enum-item name='none' value='-1'/>
        <enum-item name='childhood_friend'/>
        <enum-item name='war_buddy'/>
        <enum-item name='jealous_obsession'/>
        <enum-item name='jealous_relationship_grudge'/>
        <enum-item name='lover'/>
        <enum-item name='former_lover' comment="bay12: BREAKUP; broke up"/>
        <enum-item name='scholar_buddy' comment='bay12: SCHOLARLY_INTEREST'/>
        <enum-item name='artistic_buddy' comment='bay12: ARTISTIC_INTEREST'/>
        <enum-item name='athlete_buddy' comment='bay12: ATHLETES'/>
        <enum-item name='athletic_rival' comment='bay12: ATHLETES_RIVALS'/>
        <enum-item name='business_rival' comment='bay12: BUSINESS_RIVALS'/>
        <enum-item name='religious_persecution_grudge'/>
        <enum-item name='grudge'/>
        <enum-item name='persecution_grudge'/>
        <enum-item name='supernatural_grudge' comment='bay12: SUPERNATURAL_VENGEANCE'/>
        <enum-item name='lieutenant' comment='bay12: INTRIGUE_LIEUTENANT'/>
        <enum-item name='worshipped_deity' comment='bay12: DEITY'/>
        <enum-item name='spouse'/>
        <enum-item name='mother'/>
        <enum-item name='father'/>
        <enum-item name='master'/>
        <enum-item name='apprentice'/>
        <enum-item name='companion'/>
        <enum-item name='ex_spouse' comment='bay12: FORMER_SPOUSE'/>
        <enum-item name='neighbor'/>
        <enum-item name='shared_entity' comment="Religion/PerformanceTroupe/MerchantCompany/Guild"/>
    </enum-type>

    <struct-type type-name='historical_figure' instance-vector='$global.world.history.figures' key-field='id'
                 original-name='history_figurest'>
        <enum base-type='int16_t' name='profession' type-name='profession'/>

        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <enum name='sex' type-name='pronoun_type'/>

        <bitfield type-name='orientation_flags' name='orientation_flags'/>
        <int32_t name='appeared_year'/>
        <int32_t name='born_year'/>
        <int32_t name='born_seconds'/>
        <int32_t name='curse_year' since='v0.34.01'/>
        <int32_t name='curse_seconds' since='v0.34.01'/>

        <int32_t name='birth_year_bias' init-value='0' since='v0.34.01'/>
        <int32_t name='birth_time_bias' init-value='0' since='v0.34.01'/>

        <int32_t name='old_year'/>
        <int32_t name='old_seconds'/>
        <int32_t name='died_year'/>
        <int32_t name='died_seconds'/>

        <compound type-name='language_name' name='name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='population_id' ref-target='entity_population'/>

        <int32_t name='breed_id' comment='from legends export'/>
        <int32_t name='cultural_identity' ref-target='cultural_identity' since='v0.40.01'/>
        <int32_t name='family_head_id' ref-target='historical_figure' since='v0.44.01' comment='When a unit is asked about their family in adventure mode, the historical figure corresponding to this ID is called the head of the family or ancestor.'/>

        <df-flagarray name='flags' index-enum='histfig_flags'/>

        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='nemesis_id' ref-target='nemesis_record' since='v0.40.01' comment='sometimes garbage'/>
        <int32_t name='id'/>

        <int32_t name='art_count'/>

        <stl-vector name='entity_links' pointer-type='histfig_entity_link'/>
        <stl-vector name='site_links' pointer-type='histfig_site_link'/>
        <stl-vector name='histfig_links' pointer-type='histfig_hf_link'/>

        <pointer name='info' type-name='historical_figure_info' comment='bay12: hf_profilest profile'/>

        <pointer name='vague_relationships' comment="Do not have to be available mutually, i.e. DF can display Legends relations forming for the other party that does not have an entry (plus time and other conditions not located)"> bay12: relationship_quick_infost
            <static-array name='hfid' ref-target='historical_figure' type-name='int32_t' init-value='0' count='6'/>
            <static-array name='relationship' type-name='vague_relationship_type' count='6' comment="unused elements are uninitialized"/>
            <int32_t name='count' comment="number of hf/relationship pairs above"/>
        </pointer>

        <pointer name="worldgen_site" type-name="world_site"/>
        <pointer name="worldgen_region" type-name="world_region"/>
        <pointer name="worldgen_layer" type-name="world_underground_region"/>
        <pointer name="worldgen_genetics" type-name='unit_genes'/>
        <pointer name="worldgen_relationships"> bay12: wg_relationship_quick_infost
            <static-array name='hfid' pointer-type='historical_figure' count='6'/>
            <static-array name='relationship' type-name='vague_relationship_type' count='6' comment="unused elements are uninitialized"/>
            <int32_t name='count' comment="number of hf/relationship pairs above"/>
            <pointer name='current_spouse' type-name='historical_figure'/>
            <static-array name='current_lover' pointer-type='historical_figure' count='2'/>
        </pointer>
        <int32_t name="temp_var"/>
        <uint32_t name="temp_flag"/>
        <int32_t name='gen_material_skill_ip_sum' init-value='-1' since='v0.40.17-19'/>
        <int32_t name='defensive_skill_ip_sum' init-value='-1'/>
        -- protected --
        <size_t name='pool_id'/>
    </struct-type>

    <enum-type type-name='identity_type' base-type='int32_t'> bay12: IdentityPurposeType
         <enum-attr name='id_tag' comment='for identity.id'/>

         <enum-item name='None'  value='-1'>
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='HidingCurse' comment='HIDDEN_PREDATOR'>
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='Impersonating' comment='GOD_PRETENDER'>
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='TrueName' comment="E.g. of demonic overlords. Can be used by adventurers to gain sway over them">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='FalseIdentity' comment="SCOUT_COVER">
            <item-attr name='id_tag' value='nemesis_id'/>
         </enum-item>

         <enum-item name='InfiltrationIdentity' comment="IMPROMPTU_SITE_ID">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='Identity' comment="VILLAIN">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>
   </enum-type>

    <struct-type type-name='identity' original-name='identityst'
                 instance-vector='$global.world.identities.all' key-field='id'>
        dtor 0x8C17FA0

        <int32_t name='id'/>
        <compound name='name' type-name='language_name' comment="Not used when Impersonating"/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int32_t name='impersonated_hf' ref-target='historical_figure' comment="only when Impersonating"/>
        <compound is-union='true' union-tag-attr='id_tag'> bay12: "originator_hfid", yet Toady apparently stores Nemesis IDs here too?
            <int32_t name='histfig_id' ref-target='historical_figure'/>
            <int32_t name='nemesis_id' ref-target='nemesis_record'/>
        </compound>

        <enum name='type' type-name='identity_type' base-type='int32_t'/>

        <int32_t name='birth_year' comment='the fake one, that is'/>
        <int32_t name='birth_second'/>
        <int32_t name='belief_system' ref-target='belief_system'/>
        <int32_t name='worship_hf' ref-target='historical_figure'/>
        <enum name='fake_practice_type' type-name='religious_practice_type'/>
        <int32_t name='fake_practice_id' init-value='-1'/>
        <enum name='profession' type-name='profession' base-type='int16_t'/>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <stl-vector name='entity_profile' pointer-type='entity_personal_reputation_profilest'/>
        <stl-vector name='cultural_identity_profile' pointer-type='ci_personal_reputation_profilest'/>
    </struct-type>

    <struct-type type-name='personal_reputationst'>
        <stl-vector name='types' type-name='reputation_type'/>
        <stl-vector name='levels' type-name='int32_t' comment='1 to 100: rumored to legendary'/>
        <int32_t name="discovered_year"/>
        <int32_t name="discovered_time"/>
        <int32_t name="unsolved_murders"/>
    </struct-type>

    <struct-type type-name='entity_personal_reputation_profilest'>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <compound name='reputation' type-name='personal_reputationst'/>
        <bitfield name='flags' base-type='uint32_t' since='v0.47.01'> bay12: ENTITY_PERSONAL_REPUTATION_FLAG_*
            <flag-bit name='exiled'/>
        </bitfield>
        <int32_t name='end_custody_sentence_year' init-value='-1' since='v0.47.01'/>
        <int32_t name='end_custody_sentence_season_tick' since='v0.47.01'/>
    </struct-type>

    <struct-type type-name='ci_personal_reputation_profilest'>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <compound name='reputation' type-name='personal_reputationst'/>
    </struct-type>


    <enum-type type-name='mental_picture_property_type' base-type='int32_t'> bay12: MentalPicturePropertyType
        <enum-item name='DATE'/>
        <enum-item name='ACTION'/>
        <enum-item name='TOOL'/>
        <enum-item name='EMOTION'/>
        <enum-item name='COLOR_PATTERN'/>
        <enum-item name='SHAPE'/>
        <enum-item name='ADJECTIVE'/>
        <enum-item name='POSITION'/>
        <enum-item name='TIME'/>
    </enum-type>

    <class-type type-name='mental_picture_propertyst'>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_property_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_property_datest' inherits-from='mental_picture_propertyst'>
        <int32_t name='year'/>
        <int32_t name='season_count'/>
    </class-type>


    <enum-type type-name='mental_picture_action_type' base-type='int32_t'> bay12: MentalPictureActionType
        <enum-item name='APPEAR'/>
        <enum-item name='DESTROY'/>
        <enum-item name='SPOKE'/>
        <enum-item name='BURN'/>
        <enum-item name='FLOOD'/>
        <enum-item name='REWARD'/>
    </enum-type>

    <class-type type-name='mental_picture_property_actionst' inherits-from='mental_picture_propertyst'>
        <enum name='action' type-name='mental_picture_action_type'/>
        <int32_t name='actor_element'/>
        <int32_t name='target_element'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: MENTAL_PICTURE_PROPERTY_ACTION_FLAG_*
            <flag-bit name='continuous'/>
        </bitfield>
    </class-type>

    <class-type type-name='mental_picture_property_toolst' inherits-from='mental_picture_propertyst'>
        <int32_t name='user_element'/>
        <int32_t name='tool_element'/>
        <int32_t name='property'/>
    </class-type>

    <class-type type-name='mental_picture_property_emotionst' inherits-from='mental_picture_propertyst'>
        <int32_t name='element'/>
        <enum name='emotion' type-name='emotion_type'/>
    </class-type>

    <class-type type-name='mental_picture_property_color_patternst' inherits-from='mental_picture_propertyst'>
        <int32_t name='element'/>
        <int32_t name='color_pattern' ref-target='descriptor_pattern'/>
    </class-type>

    <class-type type-name='mental_picture_property_shapest' inherits-from='mental_picture_propertyst'>
        <int32_t name='element'/>
        <int32_t name='shape' ref-target='descriptor_shape'/>
    </class-type>

    <enum-type type-name='mental_picture_adjective_type' base-type='int32_t'> bay12: MentalPictureAdjectiveType
        <enum-item name='UNNAMED'/>
    </enum-type>

    <class-type type-name='mental_picture_property_adjectivest' inherits-from='mental_picture_propertyst'>
        <int32_t name='element'/>
        <enum name='adjective' type-name='mental_picture_adjective_type'/>
    </class-type>

    <enum-type type-name='mental_picture_position_type' base-type='int32_t'> bay12: MentalPicturePositionType
        <enum-item name='UNNAMED'/>
    </enum-type>

    <class-type type-name='mental_picture_property_positionst' inherits-from='mental_picture_propertyst'>
        <int32_t name='element1'/>
        <int32_t name='element2'/>
        <enum name='position' type-name='mental_picture_position_type'/>
    </class-type>

    <class-type type-name='mental_picture_property_timest' inherits-from='mental_picture_propertyst'>
        <int32_t name='diff_year'/>
        <int32_t name='diff_season_count'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: MENTAL_PICTURE_PROPERTY_TIME_FLAG_*
            <flag-bit name='undetermined_past'/>
            <flag-bit name='undetermined_future'/>
        </bitfield>
    </class-type>

    <enum-type type-name='mental_picture_element_type' base-type='int32_t'> bay12: MentalPictureElementType
        <enum-item name='HF'/>
        <enum-item name='SITE'/>
        <enum-item name='REGION' comment='assuming this is actually a subregion, because REGION would refer to the entire world'/>
    </enum-type>

    <class-type type-name='mental_picture_elementst'>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_element_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_element_hfst' inherits-from='mental_picture_elementst'>
        <int32_t name='hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='mental_picture_element_sitest' inherits-from='mental_picture_elementst'>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='mental_picture_element_regionst' inherits-from='mental_picture_elementst'>
        <int32_t name='region' ref-target='world_region' comment='assuming actually subregion, not the entire world (which would not have an ID)'/>
    </class-type>


    <enum-type type-name='history_event_type' base-type='int16_t'> bay12: HistoryEventType
        <enum-item name='WAR_ATTACKED_SITE'/>
        <enum-item name='WAR_DESTROYED_SITE'/>
        <enum-item name='CREATED_SITE'/>
        <enum-item name='HIST_FIGURE_DIED'/>
        <enum-item name='ADD_HF_ENTITY_LINK'/>
        <enum-item name='REMOVE_HF_ENTITY_LINK'/>
        <enum-item name='FIRST_CONTACT'/>
        <enum-item name='FIRST_CONTACT_FAILED'/>
        <enum-item name='TOPICAGREEMENT_CONCLUDED'/>
        <enum-item name='TOPICAGREEMENT_REJECTED'/>
        <enum-item name='TOPICAGREEMENT_MADE'/>
        <enum-item name='WAR_PEACE_ACCEPTED'/>
        <enum-item name='WAR_PEACE_REJECTED'/>
        <enum-item name='DIPLOMAT_LOST'/>
        <enum-item name='AGREEMENTS_VOIDED'/>
        <enum-item name='MERCHANT'/>

        <enum-item name='ARTIFACT_HIDDEN'/>
        <enum-item name='ARTIFACT_POSSESSED'/>
        <enum-item name='ARTIFACT_CREATED'/>
        <enum-item name='ARTIFACT_LOST'/>
        <enum-item name='ARTIFACT_FOUND'/>
        <enum-item name='ARTIFACT_RECOVERED'/>
        <enum-item name='ARTIFACT_DROPPED'/>
        <enum-item name='RECLAIM_SITE'/>
        <enum-item name='HF_DESTROYED_SITE'/>
        <enum-item name='SITE_DIED'/>
        <enum-item name='SITE_RETIRED'/>
        <enum-item name='ENTITY_CREATED'/>
        <enum-item name='ENTITY_ACTION'/>
        <enum-item name='ENTITY_INCORPORATED'/>
        <enum-item name='CREATED_BUILDING'/>
        <enum-item name='REPLACED_BUILDING'/>

        <enum-item name='ADD_HF_SITE_LINK'/>
        <enum-item name='REMOVE_HF_SITE_LINK'/>
        <enum-item name='ADD_HF_HF_LINK'/>
        <enum-item name='REMOVE_HF_HF_LINK'/>
        <enum-item name='ENTITY_RAZED_BUILDING'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_CONSTRUCT'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_DYE_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM_IMPROVEMENT'/>
        <enum-item name='MASTERPIECE_CREATED_FOOD'/>
        <enum-item name='MASTERPIECE_CREATED_ENGRAVING'/>
        <enum-item name='MASTERPIECE_LOST'/>
        <enum-item name='CHANGE_HF_STATE'/>
        <enum-item name='CHANGE_HF_JOB'/>
        <enum-item name='WAR_FIELD_BATTLE'/>

        <enum-item name='WAR_PLUNDERED_SITE'/>
        <enum-item name='WAR_SITE_NEW_LEADER'/>
        <enum-item name='WAR_SITE_TRIBUTE_FORCED'/>
        <enum-item name='WAR_SITE_TAKEN_OVER'/>
        <enum-item name='BODY_ABUSED'/>
        <enum-item name='HIST_FIGURE_ABDUCTED'/>
        <enum-item name='ITEM_STOLEN'/>
        <enum-item name='HF_RAZED_BUILDING'/>
        <enum-item name='CREATURE_DEVOURED'/>
        <enum-item name='HIST_FIGURE_WOUNDED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_BATTLE_EVENT'/>
        <enum-item name='CREATED_WORLD_CONSTRUCTION'/>
        <enum-item name='HIST_FIGURE_REUNION'/>
        <enum-item name='HIST_FIGURE_REACH_SUMMIT'/>
        <enum-item name='HIST_FIGURE_TRAVEL'/>
        <enum-item name='HIST_FIGURE_NEW_PET'/>

        <enum-item name='ASSUME_IDENTITY'/>
        <enum-item name='CREATE_ENTITY_POSITION'/>
        <enum-item name='CHANGE_CREATURE_TYPE'/>
        <enum-item name='HIST_FIGURE_REVIVED'/>
        <enum-item name='HF_LEARNS_SECRET'/>
        <enum-item name='CHANGE_HF_BODY_STATE'/>
        <enum-item name='HF_ACT_ON_BUILDING'/>
        <enum-item name='HF_DOES_INTERACTION'/>
        <enum-item name='HF_CONFRONTED'/>
        <enum-item name='ENTITY_LAW'/>
        <enum-item name='HF_GAINS_SECRET_GOAL'/>
        <enum-item name='ARTIFACT_STORED'/>
        <enum-item name='AGREEMENT_FORMED'/>
        <enum-item name='SITE_DISPUTE'/>
        <enum-item name='AGREEMENT_CONCLUDED'/>
        <enum-item name='INSURRECTION_STARTED'/>

        <enum-item name='INSURRECTION_ENDED'/>
        <enum-item name='HF_ATTACKED_SITE'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='KNOWLEDGE_DISCOVERED'/>
        <enum-item name='ARTIFACT_TRANSFORMED'/>
        <enum-item name='ARTIFACT_DESTROYED'/>
        <enum-item name='HF_RELATIONSHIP_DENIED'/>
        <enum-item name='REGIONPOP_INCORPORATED_INTO_ENTITY'/>
        <enum-item name='POETIC_FORM_CREATED'/>
        <enum-item name='MUSICAL_FORM_CREATED'/>
        <enum-item name='DANCE_FORM_CREATED'/>
        <enum-item name='WRITTEN_CONTENT_COMPOSED'/>
        <enum-item name='CHANGE_HF_MOOD'/>

        <enum-item name='ARTIFACT_CLAIM_FORMED'/>
        <enum-item name='ARTIFACT_GIVEN'/>
        <enum-item name='HF_ACT_ON_ARTIFACT'/>
        <enum-item name='HF_RECRUITED_UNIT_TYPE_FOR_ENTITY'/>
        <enum-item name='HFS_FORMED_REPUTATION_RELATIONSHIP'/>
        <enum-item name='ARTIFACT_COPIED'/>
        <enum-item name='SNEAK_INTO_SITE'/>
        <enum-item name='SPOTTED_LEAVING_SITE'/>
        <enum-item name='ENTITY_SEARCHED_SITE'/>
        <enum-item name='HF_FREED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_ACTION'/>
        <enum-item name='ENTITY_RAMPAGED_IN_SITE'/>
        <enum-item name='ENTITY_FLED_SITE'/>
        <enum-item name='TACTICAL_SITUATION'/>
        <enum-item name='SQUAD_VS_SQUAD'/>
        <enum-item name='SITE_SURRENDERED'/>
        <enum-item name='ENTITY_EXPELS_HF'/>

        <enum-item name='TRADE' since='v0.47.01'/>
        <enum-item name='ADD_ENTITY_SITE_PROFILE_FLAG'/>
        <enum-item name='GAMBLE'/>
        <enum-item name='ADD_HF_ENTITY_HONOR'/>
        <enum-item name='ENTITY_DISSOLVED'/>
        <enum-item name='ENTITY_EQUIPMENT_PURCHASE'/>
        <enum-item name='MODIFIED_BUILDING'/>
        <enum-item name='BUILDING_PROFILE_ACQUIRED'/>
        <enum-item name='HF_PREACH'/>
        <enum-item name='ENTITY_PERSECUTED'/>
        <enum-item name='ENTITY_BREACH_FEATURE_LAYER'/>
        <enum-item name='ENTITY_ALLIANCE_FORMED'/>
        <enum-item name='HF_RANSOMED'/>
        <enum-item name='HF_ENSLAVED'/>
        <enum-item name='SABOTAGE'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
        <enum-item name='HFS_FORMED_INTRIGUE_RELATIONSHIP'/>
        <enum-item name='FAILED_INTRIGUE_CORRUPTION'/>
        <enum-item name='HF_CONVICTED'/>
        <enum-item name='FAILED_FRAME_ATTEMPT'/>
        <enum-item name='HF_INTERROGATED'/>
    </enum-type>

    <struct-type type-name='history_event_reason_info'> not an actual structure
        <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
        <compound name='data' is-union='true' init-value='-1'>
            <int32_t name='glorify_hf' ref-target='historical_figure'/>
            <int32_t name='sanctify_hf' ref-target='historical_figure'/>
            <int32_t name='artifact_is_heirloom_of_family_hfid' ref-target='historical_figure'/>
            <int32_t name='artifact_is_symbol_of_entity_position' ref-target='historical_entity'/>
        </compound>
    </struct-type>

    <struct-type type-name='history_event_circumstance_info'> not an actual structure
        <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
        <compound name='data' is-union='true' init-value='-1'>
            <int32_t name='Death' ref-target='historical_figure'/>
            <int32_t name='Prayer' ref-target='historical_figure'/>
            <int32_t name='DreamAbout' ref-target='historical_figure'/>
            <int32_t name='Defeated' ref-target='historical_figure'/>
            <int32_t name='Murdered' ref-target='historical_figure'/>
            <int32_t name='HistEventCollection' ref-target='history_event_collection'/>
            <int32_t name='AfterAbducting' ref-target='historical_figure'/>
        </compound>
    </struct-type>

    <enum-type type-name='history_event_flags'> bay12: HistoryEventFlagType
        <enum-item name='hidden' comment='event is hidden from legends mode when this is set'/>
        <enum-item name='realized'/>
        <enum-item name='has_support_structure' comment='related to intrigues'/>
    </enum-type>

    <class-type type-name='history_event' original-name='history_eventst'
                instance-vector='$global.world.history.events' key-field='id'>
        <int32_t name='year'/>
        <int32_t name='seconds'/>
        <df-flagarray name='flags' index-enum='history_event_flags'/>
        <int32_t name='id'/>

        <virtual-methods>
            <vmethod ret-type='history_event_type' name='getType'/>
            <vmethod ret-type='int32_t' name='getWarStatus'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getAngerModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getHappinessModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='bool' name='madeFirstContact'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>

            <vmethod ret-type='int32_t' name='getKilledHistfigID'>
                <int32_t name='killer' ref-target='historical_figure'/>
                <ret-type><int32_t ref-target='historical_figure'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigKilled'>
                <int32_t name='victim' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigRevived'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='get_subregion_encased_hfid'> once used for 40d HFS
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='get_hfid_encased_srid'> once used for 40d HFS
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>

            -- 10

            <vmethod name='getRelatedHistfigIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_figure'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteStructureIDs'>
                <pointer name='vec1'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
                <pointer name='vec2'><stl-vector type-name='int32_t' ref-target='abstract_building'/></pointer>
            </vmethod>
            <vmethod name='getRelatedArtifactIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='artifact_record'/></pointer>
            </vmethod>
            <vmethod name='getRelatedRegionIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_region'/></pointer>
            </vmethod>

            <vmethod name='getRelatedLayerIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_underground_region'/></pointer>
            </vmethod>
            <vmethod name='getRelatedEntityIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_entity'/></pointer>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteID'>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteStructure'>
                <int32_t name='site' ref-target='world_site'/>
                <int32_t name='structure' ref-target='abstract_building'/>
            </vmethod>

            -- 20

            <vmethod ret-type='bool' name='isRelatedToArtifactID'>
                <int32_t name='artifact' ref-target='artifact_record'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToRegionID'>
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToLayerID'>
                <int32_t name='region' ref-target='world_underground_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityPopulation'>
                <int32_t name='pop' ref-target='entity_population'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityID'>
                <int32_t name='entity' ref-target='historical_entity'/>
            </vmethod>

            <vmethod ret-type='bool' name='isRelatedToBreed'>
                <int32_t name='breed' ref-target='breed'/>
            </vmethod>
            <vmethod name='getSentence'>
                <pointer type-name='stl-string' name='str'/> "In x, some event happened"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='getPhrase'>
                <pointer type-name='stl-string' name='str'/> "the happening of some event"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='populateArtImage'>
                <pointer type-name='art_image' name='image'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getImportance'/>

            -- 30

            <vmethod ret-type='int32_t' name='getEraImportance'/>
            <vmethod ret-type='bool' name='isChangedHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod name='categorize' comment='inserts event into world_history.events_death if relevant'/>
            <vmethod name='uncategorize' comment='removes event from world_history.events_death if relevant'/>
            <vmethod name='generate_xml'>
                <pointer type-name='stl-fstream'/>
                <int32_t name='indent'/>
            </vmethod>

            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod name='add_to_classes' comment='records event in historical_entity.diplomacy in both directions if applicable'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_war_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_ATTACKED_SITE_FLAG_*
            <flag-bit name='attacker_scout'/>
            <flag-bit name='defender_scout'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_DESTROYED_SITE_FLAG_*
            <flag-bit name='no_defeat_mention'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_created_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='resident_civ_id' ref-target='historical_entity' since='v0.47.01'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='builder_hf' ref-target='historical_figure' since='v0.40.01'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_diedst' inherits-from='history_event'>
        <int32_t name='victim_hf' ref-target='historical_figure'/>

        <int32_t name='slayer_hf' ref-target='historical_figure'/>
        <int32_t name='slayer_race' ref-target='creature_raw'/>
        <int32_t name='slayer_caste' ref-target='caste_raw' aux-value='$$.slayer_race'/>

        <compound name='weapon' type-name='history_hit_item'/> not actually a compound

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <enum name='death_cause' type-name='death_type'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own, or an occupation ID'/>
        <int32_t name='appointer_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='promise_to_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own, or an occupation ID'/>
    </class-type>

    <class-type type-name='history_event_entity_expels_hfst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='expelled' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contactst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='contacted' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contact_failedst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='rejector' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_concludedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='result' comment='range from -3 to +2'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_madest' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_acceptedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_diplomat_lostst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='involved' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreements_voidedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_merchantst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity' comment='site government'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2' index-enum='history_event_merchant_flags'/>
    </class-type>

    <enum-type type-name='history_event_merchant_flags'> bay12: HistoryEventMerchantFlagType
        <enum-item name='vanished' comment='opposite of communicate in caravan_state'/>
        <enum-item name='hardship'/>
        <enum-item name='seized'/>
        <enum-item name='offended'/>
        <enum-item name='missing_goods'/>
        <enum-item name='tribute'/>
    </enum-type>

    <class-type type-name='history_event_artifact_hiddenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_possessedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='feature_layer_id' ref-target="world_underground_region"/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/> not actual compound
        <compound name='reason' type-name='history_event_reason_info'/> not actual compound
    </class-type>

    <class-type type-name='history_event_artifact_createdst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='creator_unit_id' ref-target='unit' comment='the unit who created the artifact'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' comment='the figure who created the artifact'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_CREATED_FLAG_*
            <flag-bit name='name_only'/>
        </bitfield>
        <compound name='circumstance' type-name='history_event_circumstance_info'/> not actual compound
        <compound name='reason' type-name='history_event_reason_info'/> not actual compound
    </class-type>

    <class-type type-name='history_event_artifact_lostst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='layer_id' since='v0.47.01' ref-target="world_underground_region"/>
    </class-type>

    <class-type type-name='history_event_artifact_foundst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id' since='v0.47.02' init-value='-1'/>
        <int32_t name='subregion_id' since='v0.47.02' ref-target='world_region'/>
        <int32_t name='layer_id' since='v0.47.02' ref-target="world_underground_region"/>
    </class-type>

    <class-type type-name='history_event_artifact_recoveredst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <enum-type type-name='history_event_artifact_dropped_flags'> bay12: HistoryEventArtifactDroppedFlagType
        <enum-item name='injury'/>
    </enum-type>

    <class-type type-name='history_event_artifact_droppedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2' index-enum='history_event_artifact_dropped_flags'/>
    </class-type>

    <class-type type-name='history_event_reclaim_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_RECLAIM_SITE_FLAG_*
            <flag-bit name='unretire'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_hf_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_diedst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_SITE_DIED_FLAG_*
            <flag-bit name='abandoned'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_site_retiredst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_SITE_RETIRED_FLAG_*
            <flag-bit name='first_time'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_entity_createdst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <enum-type type-name='entity_action_type' base-type='int32_t'> bay12: EntityActionType
        <enum-item name='entity_primary_criminals'/>
        <enum-item name='entity_relocate'/>
    </enum-type>

    <class-type type-name='history_event_entity_actionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <enum name='action' type-name='entity_action_type'/>
    </class-type>

    <class-type type-name='history_event_entity_incorporatedst' inherits-from='history_event'>
        <int32_t name='migrant_entity' ref-target='historical_entity'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='leader_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_ENTITY_INCORPORATED_FLAG_*
            <flag-bit name='partial'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_created_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='builder_hf' ref-target='historical_figure'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_CREATED_BUILDING_FLAG_*
            <flag-bit name='rebuild'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_replaced_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='old_structure' ref-target='abstract_building'/>
        <int32_t name='new_structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_add_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_add_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_razed_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>


    <class-type type-name='history_event_masterpiece_createdst' inherits-from='history_event'>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='maker_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="skill_at_time" type-name='skill_rating'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_constructst' inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='building_type'/>
        <int16_t name='building_subtype'/>
        <int32_t name='building_custom'/>
        <int32_t name='building_id' ref-target='building'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_itemst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index' comment='not int32'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_dye_itemst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
        <int16_t name='dye_mat_type' ref-target='material' aux-value='$$.dye_mat_index'/>
        <int32_t name='dye_mat_index'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_item_improvementst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
        <enum name='improvement_type' type-name='improvement_type' base-type='int16_t'/>
        <int32_t name='improvement_subtype'/>
        <int16_t name='imp_mat_type' ref-target='material' aux-value='$$.imp_mat_index'/>
        <int32_t name='imp_mat_index'/>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_foodst'
                inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='item_subtype' refers-to='$global.world.raws.itemdefs.food[$]'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_engravingst'
                inherits-from='history_event_masterpiece_createdst'>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_lostst' inherits-from='history_event'>
        <int32_t name='creation_event' ref-target='history_event'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="method" type-name='masterpiece_loss_type' base-type='int16_t'/>
    </class-type>

    <class-type type-name='history_event_change_hf_statest' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum name='state' type-name='whereabouts_type'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_jobst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum name='new_job' type-name='profession'/>
        <enum name='old_job' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_war_field_battlest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_FIELD_BATTLE_FLAG_*
            <flag-bit name='attacker_scout'/>
            <flag-bit name='defender_scout'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_plundered_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_PLUNDERED_SITE_FLAG_*
            <flag-bit name='no_defeat_mention'/>
            <flag-bit name='detected'/>
            <flag-bit name='items'/>
            <flag-bit name='livestock'/>
            <flag-bit name='was_raid'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_site_new_leaderst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='new_leaders' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_war_site_tribute_forcedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum base-type='int32_t' type-name='season' name='season'/> enum size currently mismatched
        <bitfield name='tribute_flags' base-type='uint32_t'> bay12: HISTORY_EVENT_WAR_SITE_TRIBUTE_FORCED_FLAG_*
            <flag-bit name='bled_dry' comment='tribute was demanded, but not received'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_site_taken_overst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_surrenderedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_body_abusedst' inherits-from='history_event'>
        <stl-vector name='bodies' ref-target='historical_figure' type-name='int32_t'/>
        <int32_t name='victim_entity' ref-target='historical_entity'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <enum name='abuse_type' base-type='int16_t' type-name='body_abuse_method_type'/>
        <compound name='abuse_data' is-union='true'>
            <compound name='Impaled'>
                <enum name='item_type' type-name='item_type' base-type='int32_t' comment='always WEAPON?'/>
                <int32_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
                <int32_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index'/>
            </compound>
            <compound name='Piled'>
                <enum name='pile_type' base-type='int32_t' type-name='body_abuse_sculpture_type'/>
            </compound>
            <compound name='Flayed'>
                <int32_t name='structure' ref-target='abstract_building'/>
            </compound>
            <compound name='Hung'>
                <int32_t name='tree' ref-target='plant_raw'/>
                <int32_t name='mat_type' ref-target='material' aux-value='$$.mat_index' comment='rope'/>
                <int32_t name='mat_index' comment='rope'/>
            </compound>
            <compound name='Animated'>
                <int32_t name='interaction' ref-target='interaction'/>
            </compound>
        </compound>
    </class-type>

    <class-type type-name='history_event_hist_figure_abductedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='snatcher' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_item_stolenst' inherits-from='history_event'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        <int32_t name='item' ref-target='item'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='stash_site' ref-target='world_site' comment="location to which the thief brought the loot"/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <enum name='theft_method' type-name='theft_method_type'/>
    </class-type>

    <class-type type-name='history_event_hf_razed_buildingst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_creature_devouredst' inherits-from='history_event'>
        <int32_t name='victim' ref-target='historical_figure'/>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='eater' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_woundedst' inherits-from='history_event'>
        <int32_t name='woundee' ref-target='historical_figure'/>
        <int32_t name='wounder' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='woundee_race' ref-target='creature_raw'/>
        <int16_t name='woundee_caste' ref-target='caste_raw' aux-value='$$.woundee_race'/>
        <int16_t name='body_part'/>
        <enum name='injury_type' type-name='history_damage_type'/>
        <bool name='part_lost'/>
        <bitfield name='flags2' since='v0.47.01'> bay12: HISTORY_EVENT_HIST_FIGURE_WOUNDED_FLAG_*
            <flag-bit name='torture'/>
        </bitfield>
    </class-type>

    <enum-type type-name='history_event_simple_battle_subtype' base-type='int16_t'> bay12: SimpleBattleEventType
        <enum-item name='SCUFFLE'/>
        <enum-item name='ATTACK'/>
        <enum-item name='SURPRISE'/>
        <enum-item name='AMBUSH'/>
        <enum-item name='HAPPEN_UPON'/>
        <enum-item name='CORNER'/>
        <enum-item name='CONFRONT'/>
        <enum-item name='LOSE_AFTER_RECEIVE_WOUND'/>
        <enum-item name='LOSE_AFTER_INFLICT_WOUND'/>
        <enum-item name='LOSE_AFTER_EXCHANGE_WOUND'/>
        <enum-item name='SUBDUED'/>
        <enum-item name='GOT_INTO_A_BRAWL'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_battle_eventst' inherits-from='history_event'>
        <stl-vector name='group1' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='group2' type-name='int32_t' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <enum name='subtype' type-name='history_event_simple_battle_subtype'/>
    </class-type>

    <class-type type-name='history_event_created_world_constructionst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='construction'/>
        <int32_t name='master_construction'/>
        <int32_t name='site1' ref-target='world_site'/>
        <int32_t name='site2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reunionst' inherits-from='history_event'>
        <stl-vector name='missing' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='reunited_with' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='assistant' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reach_summitst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_travelst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <bitfield name='reason' base-type='uint32_t'> bay12: HISTORY_EVENT_HIST_FIGURE_TRAVEL_FLAG_*
            <flag-bit name='is_return'/>
            <flag-bit name='is_escape'/>
        </bitfield>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_new_petst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='pets' type-name='int16_t' ref-target='creature_raw'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_assume_identityst' inherits-from='history_event'>
        <int32_t name='trickster' ref-target='historical_figure'/>
        <int32_t name='identity' ref-target='identity'/>
        <int32_t name='target' ref-target='historical_entity'/>
    </class-type>

    <enum-type type-name='position_creation_reason_type' base-type='int16_t'> bay12: EntityPositionCreationType
        <enum-item name='force_of_argument'/>
        <enum-item name='threat_of_violence'/>
        <enum-item name='collaboration'/>
        <enum-item name='wave_of_popular_support'/>
        <enum-item name='as_a_matter_of_course'/>
    </enum-type>

    <class-type type-name='history_event_create_entity_positionst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='position'/> historical_entity.position
        <enum name='reason' type-name='position_creation_reason_type'/>
    </class-type>

    <class-type type-name='history_event_change_creature_typest' inherits-from='history_event'>
        <int32_t name='changee' ref-target='historical_figure'/>
        <int32_t name='changer' ref-target='historical_figure'/>
        <int32_t name='old_race' ref-target='creature_raw'/>
        <int32_t name='old_caste' ref-target='caste_raw' aux-value='$$.race_from'/>
        <int32_t name='new_race' ref-target='creature_raw'/>
        <int32_t name='new_caste' ref-target='caste_raw' aux-value='$$.race_to'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_revivedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum name='ghost_type' type-name='ghost_type'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_HIST_FIGURE_REVIVED_FLAG_*
            <flag-bit name='again'/>
            <flag-bit name='disturbance'/>
        </bitfield>
        <int32_t name='actor_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='interaction' ref-target='interaction' since='v0.47.02'/>
        <int32_t name='interaction_effect' init-value='0' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_learns_secretst' inherits-from='history_event'>
        <int32_t name='student' ref-target='historical_figure'/>
        <int32_t name='teacher' ref-target='historical_figure'/>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='interaction_effect'/>
    </class-type>

    <enum-type type-name='histfig_body_state' base-type='int8_t'> bay12: HistFigBodyStateType
        <enum-item name='Active'/>
        <enum-item name='BuriedAtSite'/>
        <enum-item name='UnburiedAtBattlefield'/>
        <enum-item name='UnburiedAtSubregion'/>
        <enum-item name='UnburiedAtFeatureLayer'/>
        <enum-item name='EntombedAtSite'/>
        <enum-item name='UnburiedAtSite'/>
    </enum-type>

    <class-type type-name='history_event_change_hf_body_statest' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='body_state' type-name='histfig_body_state'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_buildingst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'> bay12: HFBuildingActionType
            <enum-item name='Profane'/>
            <enum-item name='Disturb'/>
            <enum-item name='PrayedInside'/>
        </enum>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_does_interactionst' inherits-from='history_event'>
        <int32_t name='doer' ref-target='historical_figure'/>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='source' ref-target='interaction_source' aux-value='$$.interaction'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <enum-type type-name='confrontation_situation_type' base-type='int32_t'> bay12: ConfrontationSituationType
        <enum-item name='GENERAL_SUSPICION'/>
    </enum-type>

    <enum-type type-name='confrontation_reason_type' base-type='int32_t'> bay12: ConfrontationReasonType
        <enum-item name='AGELESS'/>
        <enum-item name='MURDER'/>
    </enum-type>

    <class-type type-name='history_event_hf_confrontedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <enum name='situation' type-name='confrontation_situation_type'/>
        <stl-vector name='reasons' type-name='confrontation_reason_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_entity_lawst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <bitfield name='add_flags' base-type='uint32_t'> bay12: ENTITY_LAW_FLAG_*
            <flag-bit name='harsh'/>
            <flag-bit name='hostile_occupation'/>
        </bitfield>
        <bitfield name='remove_flags' base-type='uint32_t'> bay12: ENTITY_LAW_FLAG_*
            <flag-bit name='harsh'/>
            <flag-bit name='hostile_occupation'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_hf_gains_secret_goalst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='goal' type-name='goal_type'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/> not actual compound
        <compound name='reason' type-name='history_event_reason_info'/> not actual compound
    </class-type>

    <class-type type-name='history_event_artifact_storedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='building' comment="Guess. the values seen are low numbers. Legends doesn't provide any additional info"/>
    </class-type>

    <class-type type-name='history_event_agreement_formedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_AGREEMENT_FORMED_FLAG_*
            <flag-bit name='delegated'/>
        </bitfield>
    </class-type>

    <enum-type type-name='site_dispute_type' base-type='int32_t'> bay12: DisputeType
        <enum-item name='Territory'/>
        <enum-item name='WaterRights'/>
        <enum-item name='GrazingRights'/>
        <enum-item name='FishingRights'/>
        <enum-item name='RightsOfWay'/>
        <enum-item name='LivestockOwnership'/>
    </enum-type>

    <class-type type-name='history_event_site_disputest' inherits-from='history_event'>
        <enum name='dispute_type' type-name='site_dispute_type'/>
        <int32_t name='entity_1' ref-target='historical_entity'/>
        <int32_t name='entity_2' ref-target='historical_entity'/>
        <int32_t name='site_1' ref-target='world_site'/>
        <int32_t name='site_2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreement_concludedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <int32_t name='subject_id'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='concluder_hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_insurrection_startedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_insurrection_endedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='outcome' type-name='insurrection_outcome'/>
    </class-type>

    <class-type type-name='history_event_hf_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_performancest' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_competitionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <stl-vector name='competitor_hf' ref-target='historical_figure' type-name='int32_t'/>
        <stl-vector name='winner_hf' ref-target='historical_figure' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_processionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_ceremonyst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_knowledge_discoveredst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <compound name='knowledge' type-name='knowledge_scholar_category_flag'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_KNOWLEDGE_DISCOVERED_FLAG_*
            <flag-bit name='first'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_artifact_transformedst' inherits-from='history_event'>
        <int32_t name='new_artifact' ref-target='artifact_record'/>
        <stl-vector name='old_artifact' ref-target='artifact_record' type-name='int32_t'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_destroyedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='destroyer_hf' ref-target='historical_figure'/>
        <int32_t name='destroyer_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_relationship_deniedst' inherits-from='history_event'>
        <int32_t name='seeker_hf' ref-target='historical_figure'/>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <enum name='type' type-name='unit_relationship_type'/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_regionpop_incorporated_into_entityst' inherits-from='history_event'>
        <int32_t name='pop_race' ref-target='creature_raw'/>
        <int32_t name='number_moved'/>
        <int32_t name='pop_region' ref-target='world_region'/>
        <int32_t name='pop_layer' ref-target='world_underground_region'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_poetic_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='poetic_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_musical_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='musical_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_dance_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='dance_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_written_content_composedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='content' ref-target='written_content'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_change_hf_moodst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='mood' type-name='mood_type'/>
        <enum name='reason' type-name='history_event_reason'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_artifact_claim_formedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='position_profile'/>
        <enum name='claim_type' type-name='artifact_claim_type'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_artifact_givenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='giver_hf' ref-target='historical_figure'/>
        <int32_t name='giver_entity' ref-target='historical_entity'/>
        <int32_t name='receiver_hf' ref-target='historical_figure'/>
        <int32_t name='receiver_entity' ref-target='historical_entity'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <bitfield name='spec_flag' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_GIVEN_FLAG_*
            <flag-bit name='inherited'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_hf_act_on_artifactst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'> bay12: HFArtifactActionType
            <enum-item name='View'/>
            <enum-item name='AskAbout'/>
        </enum>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_recruited_unit_type_for_entityst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='profession' type-name='profession'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_reputation_relationshipst' inherits-from='history_event'>
        <int32_t name='histfig1' ref-target='historical_figure'/>
        <int32_t name='identity1' ref-target='identity'/>
        <int32_t name='histfig2' ref-target='historical_figure'/>
        <int32_t name='identity2' ref-target='identity'/>
        <enum name='rep1' type-name='reputation_type'/>
        <enum name='rep2' type-name='reputation_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_artifact_copiedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='entity_dest' ref-target='historical_entity'/>
        <int32_t name='entity_src' ref-target='historical_entity'/>
        <int32_t name='site_dest' ref-target='world_site'/>
        <int32_t name='site_src' ref-target='world_site'/>
        <int32_t name='structure_dest' ref-target='abstract_building'/>
        <int32_t name='structure_src' ref-target='abstract_building'/>
        <bitfield name='flags2' base-type='uint32_t'> bay12: HISTORY_EVENT_ARTIFACT_COPIED_FLAG_*
            <flag-bit name='from_original'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_sneak_into_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_spotted_leaving_sitest' inherits-from='history_event'>
        <int32_t name='spotter_hf' ref-target='historical_figure'/>
        <int32_t name='leaver_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_searched_sitest' inherits-from='history_event'>
        <int32_t name='searcher_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='result' base-type='int32_t'>
            <enum-item name='FoundNothing'/>
        </enum>
    </class-type>

    <class-type type-name='history_event_hf_freedst' inherits-from='history_event'>
        <int32_t name='freeing_civ' ref-target='historical_entity'/>
        <int32_t name='freeing_hf' ref-target='historical_figure'/>
        <int32_t name='holding_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='rescued_hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <enum-type type-name='simple_action_type' base-type='int32_t'> bay12: HistoryEventHistFigureSimpleActionType
        <enum-item name='carouse'/>
        <enum-item name='purchase_well_crafted_equipment'/>
        <enum-item name='purchase_finely_crafted_equipment'/>
        <enum-item name='purchase_superior_equipment'/>
        <enum-item name='purchase_exceptional_equipment'/>
        <enum-item name='purchase_masterwork_equipment'/>
        <enum-item name='performe_horrible_experiments'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_actionst' inherits-from='history_event'>
        <stl-vector name='group_hfs' type-name='int32_t' ref-target='historical_figure'/>
        <enum name='type' type-name='simple_action_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_rampaged_in_sitest' inherits-from='history_event'>
        <int32_t name='rampage_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_fled_sitest' inherits-from='history_event'>
        <int32_t name='fled_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='tactical_situation' base-type='int32_t'> bay12: TacticalSituationType
        <enum-item name='attacker_strongly_favored'/>
        <enum-item name='attacker_favored'/>
        <enum-item name='attacker_slightly_favored'/>
        <enum-item name='defender_strongly_favored'/>
        <enum-item name='defender_favored'/>
        <enum-item name='defender_slightly_favored'/>
        <enum-item name='neither_favored'/>
    </enum-type>

    <class-type type-name='history_event_tactical_situationst' inherits-from='history_event'>
        <int32_t name='a_tactician_hfid' ref-target='historical_figure'/>
        <int32_t name='d_tactician_hfid' ref-target='historical_figure'/>

        <int32_t name='a_tactics_roll'/>
        <int32_t name='d_tactics_roll'/>

        <enum name='situation' type-name='tactical_situation'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <bitfield name='tactics_flags' base-type='uint32_t'> bay12: HISTORY_EVENT_TACTICAL_SITUATION_FLAG_*
            <flag-bit name='start'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_squad_vs_squadst' inherits-from='history_event'>
        <int32_t name='a_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='a_leadership_roll'/>
        <stl-vector name='a_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='a_squad_id'/>
        <int32_t name='a_race' ref-target='creature_raw'/>
        <int32_t name='a_interaction'/>
        <int32_t name='a_effect'/>
        <int32_t name='a_number'/>
        <int32_t name='a_slain'/>

        <int32_t name='d_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='d_leadership_roll'/>
        <stl-vector name='d_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='d_squad_id'/>
        <int32_t name='d_race' ref-target='creature_raw'/>
        <int32_t name='d_interaction'/>
        <int32_t name='d_effect'/>
        <int32_t name='d_number'/>
        <int32_t name='d_slain'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_tradest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity' comment='the guild to which the figure belongs?'/>
      <int32_t name='source_site' ref-target='world_site'/>
      <int32_t name='dest_site' ref-target='world_site'/>
      <int32_t name='production_zone'/>
      <enum name='allotment' type-name='resource_allotment_specifier_type'/>
      <int32_t name='allotment_index'/>
      <int32_t name='account_shift'/>
    </class-type>

    <class-type type-name='history_event_add_entity_site_profile_flagst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='added_flags' type-name='entity_site_link_flags'/>
    </class-type>

    <class-type type-name='history_event_gamblest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure'/>
      <int32_t name='account_before'/>
      <int32_t name='account_after'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_honorst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity_id' ref-target='historical_entity'/>
      <int32_t name='hfid' ref-target='historical_figure'/>
      <int32_t name='honor_id' comment='index into historical_entity.honors'/>
    </class-type>

    <class-type type-name='history_event_entity_dissolvedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_entity_equipment_purchasest' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <enum name='quality' type-name='item_quality' base-type='int32_t'/>
        <stl-vector name='hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_modified_buildingst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure' comment='index into world_site.buildings'/>
      <int32_t name='hf' ref-target='historical_figure'/>
      <enum name='ab_type' type-name='abstract_building_type' base-type='int32_t'/>
      <bitfield name='modification' base-type='uint32_t'> bay12: ABSTRACT_BUILDING_TOWER_FLAG_*
        <flag-bit name='dungeon'/>
        <flag-bit name='fortifications'/>
        <flag-bit name='courtyard'/>
        <flag-bit name='feast_hall'/>
      </bitfield>
    </class-type>

    <enum-type type-name='building_profile_acquisition_method' base-type='int32_t'> bay12: SBPAcquisitionMethodType
        <enum-item name='PURCHASE_UNOWNED'/>
        <enum-item name='INHERITED'/>
        <enum-item name='REBUILT_RUINED'/>
    </enum-type>

    <class-type type-name='history_event_building_profile_acquiredst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='building_profile'/>
      <int32_t name='acquirer_hf' ref-target='historical_figure'/>
      <int32_t name='acquirer_entity' ref-target='historical_entity'/>
      <enum name='acquisition_type' type-name='building_profile_acquisition_method'/>
      <int32_t name='previous_owner_hf' ref-target='historical_figure'/>
      <int32_t name='previous_owner_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_preachst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='speaker_hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <enum type-name='meeting_topic' name='topic'/>
      <int32_t name='entity1' ref-target='historical_entity'/>
      <int32_t name='entity2' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_entity_persecutedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='persecuting_hf' ref-target='historical_figure'/>
      <int32_t name='persecuting_entity' ref-target='historical_entity'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
      <stl-vector name='property_confiscated_from_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='destroyed_structures' type-name='int32_t' ref-target='abstract_building'/>
      <int32_t name='shrines_destroyed'/>
      <stl-vector name='expelled_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='expelled_populations' type-name='int32_t' ref-target='entity_population'/>
      <stl-vector name='expelled_races' type-name='int32_t' ref-target='creature_raw'/>
      <stl-vector name='expelled_counts' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_breach_feature_layerst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='site_entity' ref-target='historical_entity'/>
      <int32_t name='civ_entity' ref-target='historical_entity'/>
      <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_alliance_formedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <stl-vector name='joining_entities' type-name='int32_t' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_ransomedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='ransomed_hf' ref-target='historical_figure'/>
      <int32_t name='ransomer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hf_enslavedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='enslaved_hf' ref-target='historical_figure'/>
      <int32_t name='seller_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_sabotagest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='saboteur_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_overthrownst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='overthrown_hf' ref-target='historical_figure'/>
      <int32_t name='position_taker_hf' ref-target='historical_figure'/>
      <int32_t name='instigator_hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t name='position_profile_id'/>
      <stl-vector name='conspirator_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_intrigue_relationshipst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity' ref-target='identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity' ref-target='identity'/>
      <enum name='target_role' type-name='plot_role_type'/>
      <enum name='corruptor_role' type-name='plot_role_type'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_failed_intrigue_corruptionst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity' ref-target='identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity' ref-target='identity'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_convictedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='convicted_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_hf' ref-target='historical_figure'/>
      <stl-vector name='implicated_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='corrupt_hf' ref-target='historical_figure'/>
      <int32_t name='behest_of_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='surveillance_hf' ref-target='historical_figure'/>
      <int32_t name='co_conspirator_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <enum name='crime' type-name='crime_type'/>
      <compound name='punishment' type-name='punishmentst'/>
      <bitfield name='plot_flags' base-type='uint32_t'> bay12: HISTORY_EVENT_HF_CONVICTED_FLAG_*
        <flag-bit name='wrongful' comment='wrongful conviction'/>
        <flag-bit name='plot_surveillance' comment='due to ongoing surveillance as the plot unfolded'/>
        <flag-bit name='target_surveillance' comment='due to ongoing surveillance on the target'/>
        <flag-bit name='implicated_others' comment='implicated others during interrogation'/>
        <flag-bit name='co_conspirator_surveillance' comment='due to ongoing surveillance on a coconspirator'/>
        <flag-bit name='go_between' comment='convicted as go-between'/>
        <flag-bit name='revealed_nothing' comment='revealed nothing during interrogation'/>
      </bitfield>
    </class-type>

    <class-type type-name='history_event_failed_frame_attemptst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='plotter_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <enum name='crime' type-name='crime_type'/>
    </class-type>

    <class-type type-name='history_event_hf_interrogatedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <int32_t name='arresting_entity' ref-target='historical_entity'/>
        <int32_t name='interrogator_hf' ref-target='historical_figure'/>
        <stl-vector name='implicated_hfs' ref-target='historical_figure' type-name='int32_t' />
        <bitfield name='interrogation_flags' base-type='uint32_t'> bay12: HISTORY_EVENT_HF_INTERROGATED_FLAG_*
            <flag-bit name='recognized'/>
            <flag-bit name='refused_to_reveal'/>
        </bitfield>
    </class-type>

    <enum-type type-name='history_event_collection_type' base-type='int16_t'> bay12: HistoryEventCollectionType
        <enum-item name='WAR'/>
        <enum-item name='BATTLE'/>
        <enum-item name='DUEL'/>
        <enum-item name='SITE_CONQUERED'/>
        <enum-item name='ABDUCTION'/>
        <enum-item name='THEFT'/>
        <enum-item name='BEAST_ATTACK'/>
        <enum-item name='JOURNEY'/>
        <enum-item name='INSURRECTION'/>
        <enum-item name='OCCASION'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='PURGE'/>
        <enum-item name='RAID'/>
        <enum-item name='PERSECUTION'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
    </enum-type>

    <class-type type-name='history_event_collection' original-name='history_event_collectionst'
                instance-vector='$global.world.history.event_collections.all' key-field='id'>
        <stl-vector name='events' type-name='int32_t' ref-target='history_event'/>
        <stl-vector name='collections' type-name='int32_t' ref-target='history_event_collection'/>
        <int32_t name='start_year'/>
        <int32_t name='end_year'/>
        <int32_t name='start_seconds'/>
        <int32_t name='end_seconds'/>
        <df-flagarray name='flags' comment='none actually used'/>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='history_event_collection_type' name='getType'/>
            <vmethod name='generate_xml'>
                <pointer type-name='stl-fstream'/>
                <int32_t name='indent'/>
            </vmethod>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod name='categorize'/>

            <vmethod name='uncategorize'/>
            <vmethod name='getName'><pointer name='string' type-name='stl-string'/></vmethod>
            <vmethod name='getRegionCoords'><pointer name='x' type-name='int16_t'/><pointer name='y' type-name='int16_t'/></vmethod>
            <vmethod name='getParent' ret-type='int32_t'/>
            <vmethod name='getEraImportance' ret-type='int32_t'/>

            -- 10

            <vmethod name='getDiplomacyValue' ret-type='int32_t'><int32_t name='civ'/><int32_t name='target'/></vmethod>
            <vmethod name='updateEndTime'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <enum-type type-name='diplomatic_factor_type' base-type='int16_t'> bay12: DiplomaticFactorType
        <enum-item name='GODLESS'/>
        <enum-item name='RELIGION_OPPOSED_TO_RELIGION_SPHERE'/>
        <enum-item name='RELIGION_OPPOSED_TO_LEADER_MPP_SPHERE'/>
        <enum-item name='MPP_OPPOSED_TO_RELIGION_SPHERE'/>
        <enum-item name='MPP_OPPOSED_TO_LEADER_MPP_SPHERE'/>
        <enum-item name='HISTORICAL_EVENT'/>
        <enum-item name='HISTORICAL_COLLECTION'/>
        <enum-item name='ETHIC'/>
        <enum-item name='CANNOT_COMMUNICATE'/>
        <enum-item name='RELATIVES'/>
        <enum-item name='POSSESS_CLAIMED_ARTIFACT'/>
        <enum-item name='KILL_EVERYBODY'/>
        <enum-item name='DISTURBING_ONCE_ETERNAL_REST'/>
    </enum-type>

    <struct-type type-name='diplomatic_evaluationst'>
        <stl-vector name='personal_type' type-name='diplomatic_factor_type'/>
        <stl-vector name='personal_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='personal_idx1' type-name='int32_t' comment="varies based on factor"/>
        <stl-vector name='personal_idx2' type-name='int32_t' comment="varies based on factor"/>
        <stl-vector name='personal_value' type-name='int32_t'/>
        <int32_t name='total_personal'/>

        <stl-vector name='general_type' type-name='diplomatic_factor_type'/>
        <stl-vector name='general_idx1' type-name='int32_t' comment="varies based on factor"/>
        <stl-vector name='general_idx2' type-name='int32_t' comment="varies based on factor"/>
        <stl-vector name='general_value' type-name='int32_t'/>
        <int32_t name='total_general'/>

        <stl-vector name='historical_type' type-name='diplomatic_factor_type'/>
        <stl-vector name='historical_id_idx' ref-target='history_event' type-name='int32_t'/>
        <stl-vector name='historical_value' type-name='int32_t'/>
        <int32_t name='total_historical'/>
    </struct-type>

    <class-type type-name='history_event_collection_warst' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='involved_civ' type-name='int32_t' ref-target='historical_entity'/>
        <compound name='dipeval' type-name='diplomatic_evaluationst'/>
    </class-type>

    <class-type type-name='history_event_collection_battlest' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='attacker_role' type-name='uint32_t' comment="Tentatively 0: regular, 1/2 merc"/>
        <stl-vector name='defender_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='defender_role' type-name='uint32_t' comment="same as for attacker role, i.e. 0-2, with 1/2 being mercs"/>
        <stl-vector name='noncombat_hf' type-name='int32_t' ref-target='historical_figure' comment="saw being beheaded, but that's only one checked"/>
        <bitfield name='merc_roles' base-type='uint32_t'> bay12: HEC_BATTLE_FLAG_*
            <flag-bit name='attacker_scout'/>
            <flag-bit name='defender_scout'/>
        </bitfield>
        <int32_t name='attacker_mercs' ref-target='historical_entity'/>
        <int32_t name='defender_mercs' ref-target='historical_entity'/>
        <stl-vector name='attacker_merc_hfs' ref-target='historical_figure' type-name='int32_t'/>
        <stl-vector name='defender_merc_hfs' ref-target='historical_figure' type-name='int32_t'/>

        <stl-vector name='attacker_squad_entity_pop' type-name='int32_t' ref-target='entity_population'/>
        <stl-vector name='attacker_squad_counts' type-name='int32_t'/>
        <stl-vector name='attacker_squad_deaths' type-name='int32_t'/>
        <stl-vector name='attacker_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='attacker_squad_sites' type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='attacker_squad_flag' type-name='uint32_t' comment="1=animated"/>

        <stl-vector name='defender_squad_entity_pops' type-name='int32_t' ref-target='entity_population'/>
        <stl-vector name='defender_squad_counts' type-name='int32_t'/>
        <stl-vector name='defender_squad_deaths' type-name='int32_t'/>
        <stl-vector name='defender_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='defender_squad_sites' type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='defender_squad_flag' type-name='uint32_t' comment="1=animated"/>

        <enum name='outcome' type-name='battle_outcome_type'/>
    </class-type>

    <class-type type-name='history_event_collection_duelst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_hf' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
        <int8_t name='attacker_won'/>
    </class-type>

    <class-type type-name='history_event_collection_site_conqueredst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='site' ref-target='world_site'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <enum name='main_event_type' type-name='history_event_type'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_abductionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>

        <stl-vector name='snatcher_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='victim_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='attempted_victim_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_theftst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='thief_civ' ref-target='historical_entity'/>
        <int32_t name='victim_civ' ref-target='historical_entity'/>

        <stl-vector name='thief_hf' type-name='int32_t' ref-target='historical_figure'/>

        <stl-vector name='stolen_item_types'><enum base-type='int16_t' type-name='item_type'/></stl-vector>
        <stl-vector name='stolen_item_subtypes'><int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent._parent.stolen_item_types[$$._key] $)'/></stl-vector>
        <stl-vector name='stolen_mat_types'><int16_t ref-target='material' aux-value='$$._parent.stolen_mat_indices[$._key]'/></stl-vector>
        <stl-vector name='stolen_mat_indices' type-name='int32_t'/>
        <stl-vector name='stolen_item_ids' type-name='int32_t' ref-target='item'/>
        <stl-vector name='stolen_item_civ' type-name='int32_t' ref-target='historical_entity'/>

        <stl-vector name='attempted_stolen_item_types'><enum base-type='int16_t' type-name='item_type'/></stl-vector>
        <stl-vector name='attempted_stolen_item_subtypes'><int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent._parent.stolen_item_types[$$._key] $)'/></stl-vector>
        <stl-vector name='attempted_stolen_mat_types'><int16_t ref-target='material' aux-value='$$._parent.stolen_mat_indices[$._key]'/></stl-vector>
        <stl-vector name='attempted_stolen_mat_indices' type-name='int32_t'/>
        <stl-vector name='attempted_stolen_item_ids' type-name='int32_t' ref-target='item'/>
        <stl-vector name='attempted_stolen_item_civ' type-name='int32_t' ref-target='historical_entity'/>

        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_beast_attackst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_journeyst' inherits-from='history_event_collection'>
        <stl-vector name='traveler_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_insurrectionst' inherits-from='history_event_collection'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_occasionst' inherits-from='history_event_collection'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_performancest' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion' comment="0-11 seen"/>
        <int32_t name='schedule' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_competitionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion' comment="0-13 seen"/>
        <int32_t name='schedule' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_processionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion' comment="0-14 seen"/>
        <int32_t name='schedule' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_ceremonyst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion' comment="0-14 seen"/>
        <int32_t name='schedule' comment="0-10 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_purgest' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='site' ref-target='world_site'/>
        <stl-string name='adjective'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_raidst' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector name='thieves' type-name='int32_t' ref-target='historical_figure' comment="all of the ones examined were mentioned stealing things during the same raid on the site"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_persecutionst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_entity_overthrownst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <enum-type type-name='era_type' base-type='int16_t'> bay12: EraType
        <enum-item name='ThreePowers'/>
        <enum-item name='TwoPowers'/>
        <enum-item name='OnePower'/>
        <enum-item name='Myth'/>
        <enum-item name='Legends'/>
        <enum-item name='Twilight'/>
        <enum-item name='FairyTales'/>
        <enum-item name='Race'/>
        <enum-item name='Heroes'/>
        <enum-item name='Golden'/>
        <enum-item name='Death'/>
        <enum-item name='Civilization'/>
        <enum-item name='Emptiness'/>
    </enum-type>

    <struct-type type-name='history_era' original-name='erast'>
        <int32_t name='year'/>
        <compound name='title'> bay12: era_infost
            <enum type-name='era_type' name='type'/>
            <int32_t name='histfig_1' ref-target='historical_figure' comment='or race'/>
            <int32_t name='histfig_2' ref-target='historical_figure' comment='or race'/>
            <int32_t name='ordinal'/>
            <stl-string name='name'/>
            <int32_t name='percent' comment='either percentage of single race or percentage of mundane'/>
        </compound>
        <compound name='details'> bay12: era_determinerst
            <int32_t name='living_powers'/>
            <int32_t name='living_megabeasts'/>
            <int32_t name='living_semimegabeasts'/>
            <static-array name='power_hf' count='3' type-name='int32_t' ref-target='historical_figure'/>
            <stl-vector name='civilized_races' type-name='int32_t' index-refers-to='(find-creature $)'/>
            <int32_t name='civilized_total'/>
            <int32_t name='civilized_mundane'/>
        </compound>
    </struct-type>

    <struct-type type-name='relationship_event' original-name='history_relationship_event_blockst'>
        <static-array name='event' type-name='int32_t' count='1024' comment="not included in the main list"/>
        <static-array name='relationship' type-name='vague_relationship_type' count='1024'/>
        <static-array name='source_hf' type-name='int32_t' count='1024' ref-target='historical_figure' comment='bay12: hfid_1'/>
        <static-array name='target_hf' type-name='int32_t' count='1024' ref-target='historical_figure' comment='bay12: hfid_2'/>
        <static-array name='year' type-name='int32_t' count='1024'/>
        <int32_t name='next_element' comment="bay12: number; 1024 for all vectors except the last one"/>
        <int32_t name='start_year' comment="first year of the events contained in the element"/>
    </struct-type>

    <struct-type type-name='relationship_event_supplement' original-name='history_relationship_eventst'>
        <int32_t name='event' comment="bay12: global_id; can be found in the relationship_events"/>
        <int32_t name='occasion_type' comment="bay12: Circumstance circumstance; only 245/246 seen. 245:scholarly lecture, 246: performance"/>
        <int32_t name='site' ref-target='world_site' comment='bay12: circumstance_id'/>
        <enum name='reason' type-name='history_event_reason' comment="only 81 seen"/>
        <enum name='profession' type-name='profession' comment='bay12: reason_id'/>
    </struct-type>

    <struct-type type-name='world_history' original-name='historyst'>
        dtor 8532fa0

        <stl-vector name='events' pointer-type='history_event'/>
        <stl-vector name='events_death' pointer-type='history_event'/>

        <stl-vector name='relationship_events' pointer-type='relationship_event' since='v0.47.01'/>
        <stl-vector name='relationship_event_supplements' pointer-type='relationship_event_supplement' since='v0.47.01' comment="supplemental info for artistic/scholar buddies"/>

        <stl-vector name='figures' pointer-type='historical_figure'/>

        <compound name='event_collections'>
            <stl-vector name='all' pointer-type='history_event_collection'/>
            <static-array name='other' count='18' index-enum='history_event_collection_type'>
                <stl-vector pointer-type='history_event_collection'/>
            </static-array>
        </compound>

        <stl-vector name='eras' pointer-type='history_era'/>
        <stl-vector name='discovered_art_image_id' type-name='int32_t' ref-target='art_image_chunk'/>
        <stl-vector name='discovered_art_image_subid' type-name='int16_t' ref-target='art_image' aux-value='$$.discovered_art_image_id[$._key]'/>

        <int32_t name='total_art'/> some value during worldgen, and at the end equals to the number of entities plus that value
        <int32_t name='total_powers' comment='also includes megabeasts'/>
        <int32_t name='total_megabeasts'/>
        <int32_t name='total_semimegabeasts'/>
        <stl-vector name='secret_heid'/>
        <uint32_t name='first_philosophy_flag'/>
        <uint32_t name='first_philosophy_flag2'/>
        <uint32_t name='first_mathematics_flag'/>
        <uint32_t name='first_mathematics_flag2'/>
        <uint32_t name='first_history_flag'/>
        <uint32_t name='first_astronomy_flag'/>
        <uint32_t name='first_naturalist_flag'/>
        <uint32_t name='first_chemistry_flag'/>
        <uint32_t name='first_geography_flag'/>
        <uint32_t name='first_medicine_flag'/>
        <uint32_t name='first_medicine_flag2'/>
        <uint32_t name='first_medicine_flag3'/>
        <uint32_t name='first_engineering_flag'/>
        <uint32_t name='first_engineering_flag2'/>

        <stl-vector name='intrigues' since='v0.47.01' pointer-type='intrigue' comment='bay12: history_support_event'/>
        <stl-vector name='live_megabeasts' pointer-type='historical_figure'/>
        <stl-vector name='live_semimegabeasts' pointer-type='historical_figure'/>
        <stl-vector name='hf_allbeasts' pointer-type='historical_figure' comment='megabeasts AND semimegabeasts'/>
        <stl-vector name='hf_beast_actors' pointer-type='historical_figure'/>
        <stl-vector name='hf_civ_actors' pointer-type='historical_figure'/>
        <stl-vector name='hf_plotters' pointer-type='historical_figure'/>

        11 - necromancers
        <static-array name='hf_teachers' since='v0.40.01' count='15' index-enum='goal_type'>
            <stl-vector pointer-type='historical_figure'/>
        </static-array>

        <stl-vector name='hf_artists' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_poets' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_bards' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_dancers' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_scholars' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_heros' since='v0.40.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_underbelly' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_religious' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_merchant' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='new_hf_merchant' since='v0.47.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_custodial_prisoner' since='v0.47.01' pointer-type='historical_figure'/>
        <stl-vector name='hf_personal_prisoner' since='v0.47.01' pointer-type='historical_figure'/>
        <stl-vector type-name='int32_t' name='deleted_hfid' since='v0.47.01'/>

        <bool name='do_not_remove_from_vector'/>
        <stl-vector name='active_event_collections' pointer-type='history_event_collection'/>
        <bool name='hf_temp_var_clear'/>
        <int32_t name='hf_temp_var_start'/>
        <int32_t name='hf_temp_var_last_advance'/>
        <pointer name='active_mission' type-name='mission_report'/>
    </struct-type>

    <struct-type type-name='intrigue' instance-vector='$global.world.history.intrigues' key-field='event_id' original-name='history_support_eventst'>
        <int32_t name='event_id' ref-target='history_event' comment="NOTE: can be culled. Seen: failed_intrigue_corruption, event_agreement_formed, hfs_formed_intrigue_relationship"/>
        <pointer name='corruption' type-name='intrigue_corruption' comment="Mutually exclusive with circumstance. Exactly one is present. Presumably 'bring into network' action doesn't provide membership"/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
    </struct-type>

    <enum-type type-name='intrigue_corruption_result_rel_factor_type' base-type='int32_t'> bay12: IntrigueCorruptionResultRelFactorType
        <enum-item name='None' value='-1'/>
        <enum-item name='Trust'/>
        <enum-item name='Loyalty'/>
        <enum-item name='Love'/>
        <enum-item name='Fear'/>
        <enum-item name='Respect'/>
    </enum-type>

    <struct-type type-name='intrigue_corruption' original-name='intrigue_corruption_resultst'>
        <enum name='action' type-name='intrigue_corruption_action_type'/>
        <int32_t name='corruptor_id' ref-target='historical_figure'/>
        <int32_t name='target_id' ref-target='historical_figure'/>
        <enum name='target_relationship' type-name='vague_relationship_type' comment="set if and only if action = BringIntoNetwork"/>
        <int32_t name='target_relationship_entity_id' ref-target='historical_entity' comment="Only set when relation = CommonEntity. Common Religion/PerformanceTroupe/MerchantCompany/Guild seen."/>
        <int32_t name='lurer_id' ref-target='historical_figure' comment="Can be set with action = CorruptInPlace, not otherwise"/>

        <enum name='manipulation_type' base-type='int32_t' type-name='intrigue_corruption_method_type'/>
        <int32_t name='method_perceived_modifier' comment="-16 to 315 seen"/>
        <int32_t name='method_modifier' comment="-141 to 351 seen"/>

        <enum name='manipulated_facet' type-name='personality_facet_type'/>
        <int32_t name='facet_rating'/>
        <int32_t name='facet_roll'/>

        <enum name='manipulated_value' type-name='value_type'/>
        <int32_t name='value_rating'/>
        <int32_t name='value_roll'/>

        <enum name='manipulated_emotion' type-name='intrigue_corruption_result_rel_factor_type'/>
        <int32_t name='emotion_rating' comment="-100 to 125 seen"/>
        <int32_t name='emotion_roll' comment="-10 to 12 seen"/>

        <bitfield name='flags' base-type='uint32_t'> bay12: INTRIGUE_CORRUPTION_RESULT_FLAG_*
            <flag-bit name='succeeded'/>
            <flag-bit name='misread_target'/>
        </bitfield>

        <int32_t name='position_entity_id' ref-target='historical_entity' comment="Used to pull rank"/>
        <int32_t name='position_assignment_id' ref-target='entity_position_assignment' aux-value='$$.position_entity_id'/>

        <int32_t name='offered_id' ref-target='historical_figure' comment='deity or revenge target'/>
        <enum name='offered_relationship' type-name='vague_relationship_type' base-type='int32_t'/>

        <int32_t name='corruptor_ally_roll'/>
        <int32_t name='target_ally_roll'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
