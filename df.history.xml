<data-definition>
    <struct-type type-name='historical_kills'>
        -- Important

        <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>

        -- Misc

        <stl-vector name="killed_race" type-name='int16_t' ref-target='creature_raw'/>
        <stl-vector name="killed_caste" type-name='int16_t' ref-target='caste_raw' aux-value='$$._parent.killed_race[$._key]'/>
        <stl-vector name="killed_underground_region" type-name='int32_t' ref-target='world_underground_region'/>
        <stl-vector name="killed_region" type-name='int32_t' ref-target='world_region'/>
        <stl-vector name="killed_site" type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='killed_undead'>
            <bitfield type-name='undead_flags'/>
        </stl-vector>
        <stl-vector name="killed_count" type-name='int32_t'/>
    </struct-type>

    <struct-type type-name='history_hit_item'>
        <int32_t name='item' ref-target='item'/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        -- If shot by a ranged weapon:
        <int32_t name='shooter_item' ref-target='item'/>
        <enum base-type='int16_t' name='shooter_item_type' type-name='item_type'/>
        <int16_t name='shooter_item_subtype' refers-to='(item-subtype-target $$._parent.shooter_item_type $)'/>
        <int16_t name='shooter_mattype' ref-target='material' aux-value='$$.shooter_matindex'/>
        <int32_t name='shooter_matindex'/>
    </struct-type>

    <enum-type type-name='reputation_type' base-type='int32_t'>
        <enum-item name='Hero'/>
        <enum-item name='AnimalPartner'/>
        <enum-item name='Brawler'/>
        <enum-item name='Psycho'/>
        <enum-item name='TradePartner'/>
        <enum-item name='Friendly'/>
        <enum-item name='Killer'/>
        <enum-item name='Murderer'/>

        <enum-item name='Comrade'/>
        <enum-item name='RespectedGroup'/>
        <enum-item name='HatedGroup'/>
        <enum-item name='EnemyFighter'/>
        <enum-item name='FriendlyFighter'/>
        <enum-item name='Bully'/>
        <enum-item name='Brigand'/>
        <enum-item name='LoyalSoldier'/>
        <enum-item name='Monster'/>
        <enum-item name='Storyteller'/>

        <enum-item name='Poet'/>
        <enum-item name='Bard'/>
        <enum-item name='Dancer'/>
        <enum-item name='Quarreler'/>
        <enum-item name='Flatterer'/>
        <enum-item name='Hunter'/>
        <enum-item name='ProtectorOfWeak'/>
        <enum-item name='TreasureHunter'/>
        <enum-item name='Thief'/>
        <enum-item name='InformationSource'/>

        <enum-item name='PreserverOfKnowledge'/>
        <enum-item name='Intruder'/>
        <enum-item name='Preacher'/>
    </enum-type>

    <!-- This enum is tentative -->
    <enum-type type-name='whereabouts_type' base-type='int16_t' comment='bay12: HistFigState'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='wanderer' comment="bay12: WANDERING; wandering the wilds/region/depths of the world (none/region/underground_region)"/>
        <enum-item name='settler' comment="bay12: SETTLED; site/region, region only for dead 'monsters'"/>
        <enum-item name='refugee' comment="bay12: REFUGEE; into region only for dead. refugees and abucted-imprisoned-turned"/>
        <enum-item name='army_died' comment="bay12: IN_ARMY; either no record of participation in battle, or character died and defender won (character on either side)"/>
        <enum-item name='army_survived' comment="bay12: IN_ARMY_CAMPING_AT_CZ_ALTERATION; either no record of participation in battle, or character survived and defender won (character on either side)"/>
        <enum-item name='visitor' comment="bay12: VISITING; 'visited' as last movement seems to be the key"/>
    </enum-type>

    <enum-type type-name='season' base-type='int8_t'>
        <enum-item name='None' value='-1'/>
        <enum-item name='Spring'/>
        <enum-item name='Summer'/>
        <enum-item name='Autumn'/>
        <enum-item name='Winter'/>
    </enum-type>

    <enum-type type-name='death_condition_type' base-type='int8_t' comment='bay12: HistFigBodyState'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='no_statement' comment="bay12: ACTIVE; alive or dead, but death conditions not registered here"/>
        <enum-item name='site_battle' comment="bay12: BURIED_AT_SITE; parameters: site id + optional structure"/>
        <enum-item name='region_battle' comment="bay12: UNBURIED_AT_BATTLEFIELD; parameters: two unknown values, usually small, with same pair being the same region, but neither is region_id"/>
        <enum-item name='wilderness' comment="bay12: UNBURIED_AT_SUBREGION; parameters: region_id + -1"/>
        <enum-item name='feature_layer' comment='bay12: UNBURIED_AT_FEATURE_LAYER'/>
        <enum-item name='entombed' comment="bay12: ENTOMBED_AT_SITE; same parameters as for site_battle, but structure seems to always be present and be a tomb"/>
        <enum-item name='site' comment="bay12: UNBURIED_AT_SITE; same parameters as for site_battle, old age and deadly confrontation seen"/>
    </enum-type>

    <enum-type type-name='plot_role_type' base-type='int32_t'>
        <enum-item name='None' value='-1'/>
        <enum-item name='Possible_Threat'/>
        <enum-item name='Rebuffed'/>
        <enum-item name='Source_Of_Funds'/>
        <enum-item name='Source_Of_Funds_For_Master'/>
        <enum-item name='Master'/>
        <enum-item name='Suspected_Criminal'/>
        <enum-item name='Asset'/>
        <enum-item name='Lieutenant'/>
        <enum-item name='Usable_Thief'/>
        <enum-item name='Potential_Employer'/>

        <enum-item name='Indirect_Director' comment="Seen as 'possibly unknown director' in actor's exported XML when influencing the plotter using an intermediary in Legends Mode"/>
        <enum-item name='Corrupt_Position_Holder'/>
        <enum-item name='Delivery_Target'/>
        <enum-item name='Handler'/>
        <enum-item name='Usable_Assassin'/>
        <enum-item name='Director' comment="Seen with no role or 'potential employer' in actor's exported XML, and as the one influencing the plotter in Legends Mode"/>
        <enum-item name='Enemy'/>
        <enum-item name='Usable_Snatcher'/>
        <enum-item/>
        <enum-item/>
        <enum-item name='Underworld_Contact'/>
        <enum-item name='Possibly_Unknown_Director'/>
    </enum-type>

    <enum-type type-name='plot_strategy_type' base-type='int32_t'>
        <enum-item name='None' value='-1'/>
        <enum-item name='Corrupt_And_Pacify'/>
        <enum-item name='Obey'/>
        <enum-item name='Avoid'/>
        <enum-item name='Use'/>
        <enum-item name='Tax'/>
        <enum-item name='Neutralize'/>
        <enum-item name='Monitor'/>
        <enum-item name='Work_If_Suited'/>
        <enum-item name='Torment'/>
    </enum-type>

    <struct-type type-name='plot_agreement'>
        <int32_t name='actor_id' ref-target='historical_figure'/>
        <enum name='plot_role' type-name='plot_role_type'/>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <bool name='agreement_has_messenger'/>
    </struct-type>

    <struct-type type-name='state_profilest'>
        <enum name='state' type-name='whereabouts_type' base-type='int16_t'/>
        <int32_t name="site_id" ref-target='world_site' init-value='-1'/>
        <int32_t name="subregion_id" ref-target='world_region' init-value='-1'/>
        <int32_t name="feature_layer_id" ref-target='world_underground_region' init-value='-1'/>
        <int32_t name="army_id" ref-target='army' init-value='-1'/>
        <int32_t name='cz_id' init-value='-1'/>
        <int32_t name='cz_bld_num' init-value='-1'/>
        <int32_t init-value='-1' name='abs_smm_x' comment='same coordinate system as army'/>
        <int32_t init-value='-1' name='abs_smm_y'/>
        <bitfield name='flags'>
            <flag-bit name='XY_LOCATION_SMM_LEVEL'/>
            <flag-bit name='XY_LOCATION_IN_SUL'/>
        </bitfield>
        <enum name='body_state' type-name='death_condition_type' base-type='int8_t' init-value='NONE'/>
        <int32_t name='body_state_id' init-value='-1' comment="-1/site     /?/region_id/?/site     /site"/>
        <int32_t name='body_state_sub_id' init-value='-1' comment="-1/structure/?/-1       /?/structure/structure"/>
        <int32_t name='year' since='v0.42.01' init-value='-1' comment="time of arrival at site/region_id, not time of death"/>
        <int32_t name='year_tick' since='v0.42.01' init-value='-1'/>
    </struct-type>

    <struct-type type-name='knowledge_profilest'>
        <stl-vector name='known_secrets' pointer-type='interaction' comment="bay12: interation_ptr; Interactions inflicted upon the figure through an I_SOURCE:SECRET means are recorded here; this appears to prevent the interaction from affecting the figure again on subsequent exposure (when rereading a necromancy slab, for example). For interactions with both I_SOURCE:SECRET and another source (I_SOURCE:INGESTION, for example), exposure to the interaction through the non-secret route does not result in the interaction being listed here."/>
        <int32_t name='next_intervention_resistance_year' init-value='-1' comment="All are gods with the DEATH sphere having created slabs, but the value isn't the id of the slab"/>
        <stl-vector name='known_written_contents' type-name='int32_t' ref-target='written_content' comment="bay12: read_written_content_id; ID of written_contents known to the historical figure. Aside from the contents of read books, these so-called written contents also include known derivations of poetic forms, dance forms and musical forms" since='v0.42.01'/>
        <stl-vector name="known_identities" type-name='int32_t' ref-target='identity' comment="bay12: identity_known_id; identity ID of identities known to the historical figure, such as demon true names"/>
        <stl-vector name='known_witness_reports' pointer-type='witness_incidentst' comment='bay12: witness_incident'/>
        <!-- compound rumor_infost -->
        <stl-vector name='known_events' pointer-type='entity_event'/>
        <!-- end compound rumor_infost -->
        <stl-vector name='heard_of_guide_hfid' type-name='int32_t'/>
        <stl-vector name='heard_of_stid' type-name='int32_t'/>
        <compound name='opinion_info' comment='bay12: type is opinion_infost'>
            <stl-vector name='entity_id' type-name='int32_t' comment="same length as next vector. Some are definitely entities (e.g. player fortress or attacker site government), but others make no such sense"/>
            <stl-vector name='entity_opinion' type-name='int32_t' comment="5, 7, 8 seen. 7/8 only seen on humanoid experiments"/>
        </compound>
        <stl-vector name='creature_knowledge'>
            <pointer>
                <!-- creature_knowledgest -->
                <int32_t name='unk_1'/>
                <int32_t name='unk_2'/>

                <stl-vector name='unk_3' type-name='int32_t'/>
                <stl-vector name='unk_4' type-name='int32_t'/>
                <stl-vector name='unk_5' type-name='int32_t'/>

                <int32_t name='unk_6' since='v0.42.01'/>
            </pointer>
        </stl-vector>
        <stl-vector name="known_poetic_forms" type-name='int32_t' ref-target='poetic_form' since='v0.42.01' comment='bay12: poetic_form_known_id'/>
        <stl-vector name="known_musical_forms" type-name='int32_t' ref-target='musical_form' since='v0.42.01' comment='bay12: musical_form_known_id'/>
        <stl-vector name="known_dance_forms" type-name='int32_t' ref-target='dance_form' since='v0.42.01' comment='bay12: dance_form_known_id'/>
        <pointer name="knowledge" since='v0.42.01'>
            <!-- scholar_knowledgest -->
            <bitfield type-name='knowledge_scholar_flags_0' name='philosophy'/>
            <bitfield type-name='knowledge_scholar_flags_1' name='philosophy2'/>
            <bitfield type-name='knowledge_scholar_flags_2' name='math'/>
            <bitfield type-name='knowledge_scholar_flags_3' name='math2'/>
            <bitfield type-name='knowledge_scholar_flags_4' name='history'/>
            <bitfield type-name='knowledge_scholar_flags_5' name='astronomy'/>
            <bitfield type-name='knowledge_scholar_flags_6' name='naturalist'/>
            <bitfield type-name='knowledge_scholar_flags_7' name='chemistry'/>
            <bitfield type-name='knowledge_scholar_flags_8' name='geography'/>
            <bitfield type-name='knowledge_scholar_flags_9' name='medicine'/>
            <bitfield type-name='knowledge_scholar_flags_10' name='medicine2'/>
            <bitfield type-name='knowledge_scholar_flags_11' name='medicine3'/>
            <bitfield type-name='knowledge_scholar_flags_12' name='engineering'/>
            <bitfield type-name='knowledge_scholar_flags_13' name='engineering2'/>
            <uint32_t name='knowledge_goal_category'/>
            <uint32_t name='unk_1'/>
            <uint32_t name='unk_2'/>
            <uint32_t name='unk_3'/>
            <bitfield name='knowledge_goal'>
                <flag-bit name='unk0'/>
            </bitfield>
            <uint32_t name='research_points' comment='research is finished at 100k? amount gained depends on skills, attributes'/>
            <uint32_t name='times_pondered' comment='one per ponder no matter what. turns into research_points somewhere around 40-60.'/>
        </pointer>
        <pointer name='belief_systems' comment="found in prophets; contains the ID of the belief system developed by that particular prophet">
            <!-- hf_religious_datast -->
            <stl-vector type-name='int32_t' ref-target='belief_system'/>
        </pointer>
        <pointer name='known_locations'>
            <!-- ab_review_infost -->
            <stl-vector>
                <pointer>
                    <int32_t name='site_id' ref-target='world_site'/>
                    <int32_t name='location_id' ref-target='abstract_building' aux-value='$$.site_id'/>
                    <int32_t name='unk_2' init-value='-1'/>
                    <int32_t name='unk_3' init-value='-1'/>
                    <int32_t name='unk_4' init-value='-1'/>
                    <int32_t name='unk_5' init-value='-1'/>
                    <int32_t name='unk_6' comment='increases by 10 when eating in a location'/>
                    <int32_t name='room_quality' comment='15 times the best dfhack_room_quality_level seen when using this room for an activity'/>
                    <int32_t name='unk_8'/>
                    <int32_t name='unk_9'/>
                    <int32_t name='unk_10'/>
                    <int32_t name='used_as_temple'/>
                    <int32_t name='used_as_library'/>
                    <int32_t name='used_as_tavern'/>
                </pointer>
            </stl-vector>
        </pointer>
        <stl-vector name='known_agreement_id' type-name='int32_t' since='v0.47.01'/>
    </struct-type>

    <struct-type type-name='historical_figure_info' original-name='hf_profilest'>
        <pointer name="spheres">
            <stl-vector name="spheres">
                <enum base-type='int16_t' type-name='sphere_type'/>
            </stl-vector>
            <stl-vector name='unk_1' type-name='int32_t' since='v0.47.01'/>
        </pointer>

        <pointer name="skills">
            <stl-vector name="skills">
                <enum base-type='int16_t' type-name='job_skill'/>
            </stl-vector>
            <stl-vector name="points" type-name='int32_t' index-refers-to='$$._parent.skills[$]'/>
            <stl-vector name="professions_held">
                <enum base-type='int16_t' type-name='profession'/>
            </stl-vector>
            <stl-vector name="profession_years" type-name='int32_t' comment="Number of years on each profession above. Need not be consecutive, so non registered periods can happen"/>

            only a guess since most of figures have 102 (STANDARD); some have stuff like CLERK, SCOUT, BEAST_HUNTER, etc
            <enum base-type='int16_t' name='profession' type-name='profession'/>
            <int32_t name='unk_1' since='v0.44.01'/>
            <int32_t name="account_balance" comment = "Abstract tracker of this individual's wealth" since='v0.47.01'/>
            <pointer name='employment_held' since='v0.47.01'>
                <stl-vector name='employment'>
                    <pointer>
                        <int32_t name='employer' ref-target='historical_entity'/>
                        <stl-vector type-name='int32_t' ref-target='honors_type' name='held_honors'/>
                        <int32_t name='battle_count'/>
                        <int32_t name='kill_count'/>
                        <int32_t name='employment_year'/>
                        <int32_t name='employment_year_tick'/>
                    </pointer>
                </stl-vector>
                <int32_t name='resignment_year'/>
                <int32_t name='resignment_year_tick'/>
            </pointer>
        </pointer>

        <pointer name="pets">
            <stl-vector type-name='int16_t' ref-target='creature_raw'/>
        </pointer>

        <pointer name='personality'>
            <compound name='personality' type-name='unit_personality'/>
            <int16_t name='unk_1' since='v0.44.01'/>
        </pointer>

        <pointer name="masterpieces">
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-vector name="events2" type-name='int32_t' ref-target='history_event' comment='ones that were stolen or destroyed?'/>
            <stl-vector name='unk_v43_1' type-name='int32_t' since='v0.42.06'/>
            <stl-vector name='unk_v43_2' type-name='int16_t' since='v0.42.06'/>
            <static-array name='unk_v50_1' count='100' type-name='int32_t'/>
            <int32_t name='unk_v50_2' comment='amount used in unk_v50_1'/>
            <int32_t name='unk_v50_3'/>
        </pointer>

        <pointer type-name='state_profilest' name='whereabouts'/>

        <pointer name="kills" type-name='historical_kills'/>

        <pointer name="wounds">
            <stl-vector name="events" type-name='int32_t' ref-target='history_event'/>
            <stl-bit-vector name="status">
                <code-helper name='index-refers-to'>
                    (let* ((info $$._parent._parent._parent)
                           (figure $info._parent._parent)
                           (caste (find-instance $caste_raw $figure.caste $figure.race)))
                      $caste.body_parts[$])
                </code-helper>
            </stl-bit-vector>
            <int32_t name='childbirth_year'/>
            <int32_t name='childbirth_tick'/>
            <bitfield name='unk_flags' since='v0.40.19'>
                <flag-bit/>
            </bitfield>
        </pointer>

        <pointer name='known_info' type-name='knowledge_profilest' since='v0.34.01' comment='knowledge_profile'/>

        <pointer name='curse' since='v0.34.01'>
            <stl-vector name="active_interactions" pointer-type='interaction'/>
            <stl-vector name="active_effects" pointer-type='interaction_effect'/>
            <stl-vector name="can_do" pointer-type='interaction'/>
            <int32_t name="unk_30"/>
            <int32_t name="unk_34"/>
            <bitfield name="unk_38">
                <flag-bit/>
                <flag-bit/>
                <flag-bit/>
            </bitfield>
            <bitfield name="unk_3c">
                <flag-bit/>
                <flag-bit/>
                <flag-bit/>
            </bitfield>
            <int8_t name="unk_40"/>
            <stl-string name="name"/>
            <stl-string name="name_plural"/>
            <stl-string name="name_adjective"/>
            <int32_t name='race' ref-target='creature_raw'/>
            <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
            <stl-vector name='body_transformation_effects' type-name='int32_t' ref-target='creature_interaction_effect'/>
            <stl-vector name='unk_b0' type-name='int32_t'/>
            <stl-vector name='body_mat_interaction_effects' type-name='int32_t' ref-target='creature_interaction_effect'/>
            <int32_t name="original_histfig_id" ref-target='historical_figure' comment='ID of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_race" ref-target='creature_raw' comment='race of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="original_caste" ref-target='caste_raw' aux-value='$$.original_race' comment='caste of the historical figure who was reanimated to produce undead historical figure'/>
            <int32_t name="root_body_part_id" comment='ID of the root body part in the corpse or corpse piece which was reanimated to produce undead historical figure'/>
            <stl-string name="undead_name" comment='display name of reanimated creatures in legends mode'/>
            <int32_t name="unk_fc"/>
            <pointer name='divination' since='v0.47.01'>
                <stl-vector name='deities' type-name='int32_t' ref-target='historical_figure' comment='When a divination die is rolled, the historical figure ID of the associated god is inserted here.'/>
                <stl-vector name='divination_sets' type-name='int32_t' ref-target='divination_set' comment='When a divination die is rolled, the ID of the associated divination_set is inserted here.'/>
                <stl-vector name='roll_results' type-name='int32_t' comment='When a divination die is rolled, the numerical roll result is inserted here.'/>
                <stl-vector name='year_rolled' type-name='int32_t' comment='When a divination die is rolled, the cur_year value at the time of rolling is inserted here.'/>
                <stl-vector name='year_tick_rolled' type-name='int32_t' comment='When a divination die is rolled, the cur_year_tick at the time of rolling is inserted here.'/>
                <int32_t name='fate_sealed' comment='This is set to 1 when a divination die is rolled excessively in a given timespan, preventing all future divination die rolls from having an effect. Attempts at further divination will produce the following message instead: Your fate is sealed.'/>
            </pointer>
            <pointer name='experiments' since='v0.47.01'>
                <stl-vector name='unk_1' type-name='int32_t'/>
                <stl-vector name='races' type-name='int32_t' comment='contains IDs of races created by the historical figure through experimentation'/>
            </pointer>
        </pointer>

        <pointer name='books' since='v0.34.01' comment="seems to be misnamed. Artifacts seen have been of all kinds">
            <stl-vector name='artifacts_held' pointer-type='artifact_record' comment="held as in possession, doesn't include stored"/>
            <int32_t name='unk_1' since='v0.44.01' comment="values seen: 0, 3, 69, 164, 178, 226, 514"/>
            <int32_t name='unk_2' since='v0.47.01' comment="values seen: 0-5"/>
            <static-array name='unk_3' type-name='int32_t' count='13' since='v0.44.06' comment="wildly varying contents. Probably unitialized, as at least some change when same save reloaded"/>
            <static-array name='unk_4' type-name='int32_t' count='13' since='v0.44.06' comment="ditto"/>
            <bitfield name='flags' base-type='uint32_t' since='v0.44.06'>
                <flag-bit/>
                <flag-bit/>
                <flag-bit/>
                <flag-bit/>
            </bitfield>
            <int16_t name='unk_5' since='v0.44.06' comment='not saved'/>
            <pointer name='unk_6' since='v0.47.01'>
                <stl-vector name='unk_1'>
                    <pointer>
                        <int32_t name='unk_1'/>
                        <int32_t name='unk_2'/>
                    </pointer>
                </stl-vector>
                <int32_t  name='unk_2'/>
            </pointer>
        </pointer>

        <pointer name='reputation' since='v0.34.01'>
            <stl-vector name="wanted">
                <pointer>
                    <compound name='unk'>
                        <int32_t name='entity_id' ref-target='historical_entity'/>
                        <stl-vector name='types'><enum type-name='reputation_type'/></stl-vector>
                        <stl-vector name='levels' type-name='int32_t' comment='1 to 100: rumored to legendary'/>
                        <int32_t name="discovered_year"/>
                        <int32_t name="discovered_time"/>
                        <int32_t name="unsolved_murders"/>
                        there's an unused dword here on 64-bit
                    </compound>
                    <int32_t name='unk_1' since='v0.47.01'/>
                    <int32_t name='unk_2' init-value='-1' since='v0.47.01'/>
                    <int32_t name='unk_3' since='v0.47.01'/>
                </pointer>
            </stl-vector>
            <stl-vector name='unk_1'> different from above - this might be wanted.unk
                <pointer>
                    <int32_t name='entity_id' ref-target='historical_entity'/>

                    Constructor and save/load code handles the following 5 fields as if they were a compound, separate from the integer above
                    <stl-vector name='unk_1' type-name='int32_t'/>
                    <stl-vector name='unk_2' type-name='int32_t'/>
                    <int32_t name="discovered_year"/>
                    <int32_t name="discovered_time"/>
                    <int32_t name="unsolved_murders"/>
                </pointer>
            </stl-vector>
            <int32_t name="cur_identity" ref-target='identity'/>
            <stl-vector name="all_identities" type-name='int32_t' ref-target='identity'/>
            <int32_t name='next_identity_idx'/>
            <pointer name='unk_2c' since='v0.44.01'>
                <int32_t name='unk_1'/>
                <int32_t name='year' comment="Seen in visitors during fort mode, logs the time that they arrived"/>
                <int32_t name='year_ticks'/>
                <int32_t name='unk_4'/>
                <int32_t name='unk_5'/>
                <int32_t name='unk_6'/>
                <int32_t name='unk_7'/>
                <int32_t name='unk_8'/>
                <int32_t name='unk_9'/>
                <int32_t name='unk_10'/>
                <int32_t name='unk_11'/>
                <stl-vector name='unk_12'>
                    <pointer>
                        <int32_t name='unk_1'/>
                        <int32_t name='unk_2'/>
                        <int32_t name='unk_3'/>
                        <int32_t name='unk_4'/>
                        <int32_t name='unk_5'/>
                        <int32_t name='unk_6'/>
                    </pointer>
                </stl-vector>
                <stl-vector name='unk_13' type-name='int32_t' since='v0.44.01'/>
            </pointer>
        </pointer>

        <pointer name='relationships' type-name='historical_figure_relationships'/>
    </struct-type>

    <struct-type type-name='historical_figure_relationships'>
        <stl-vector name='hf_visual'>
            <pointer>
                <int32_t name='histfig_id' ref-target='historical_figure'/>
                <bitfield name='flags'>
                    <flag-bit name='information_source'/>
                    <flag-bit/>
                    <flag-bit name='believes_false_identity'/>
                </bitfield>
                <stl-vector name='unk_2v' type-name='int32_t' ref-target='identity' comment="Involves adventurer knowing name?"/>
                <stl-vector name="attitude">
                    <enum type-name='reputation_type' comment="Probably ordered"/>
                </stl-vector>
                <stl-vector name="counter" type-name='int32_t' comment="One element for each 'attitude' element. Guess 0 - 100"/>
                <int16_t name='rank' init-value='-1' comment="seems to be fixed. Might not be used anymore" since='v0.47.01'/>
                <int32_t name='loyalty' comment="0 - 100. Loyalty, Respect, Fear, and Trust values do not seem to affect the relationship screen description, only Love and Familiarity"/>
                <int32_t name='respect' comment="-100 - 100"/>
                all 0xfff0bdc0 = -1000000
                <int32_t name='fear' comment="-100 - 100"/>
                <int32_t name='love' comment="-100 - 100. Affects relation description: -100: Pure Hate, LE -75: Hated, LE -50: Disliked, LE 49: Acquaintance, LE 74: Friend, LE 99: Close Friend, 100: Kindred Spirit. Lower histfig_id is sorted above higher, except Acquaintance which is sorted on Familiarity"/>
                <int32_t name='trust' comment="-100 - 100"/>
                <int32_t name='familiarity' comment="Shifts from 'Passing' to 'Long-term' Acquaintance at 30, but a Love value other than Acquaintance takes presedence. Higher Familiarity is sorted above lower, with lower histfig_id is sorted above higher on a tie"/>
                <int32_t name='last_meet_year' comment="probably latest contact. Seen -1"/>
                <int32_t name='last_meet_seconds72'/>
                <int32_t name='meet_count' since='v0.44.10'/>
                <int32_t name='unk_2' comment='duplicates meet_count?' since='v0.44.10'/>
                <int32_t name='unk_3' comment='duplicates meet_count?' since='v0.44.10'/>
                <int32_t name='unk_4' since='v0.47.01'/>
                <int32_t name='unk_5' since='v0.47.01'/>
                <int32_t name='unk_6' since='v0.47.01'/>
                <int32_t name='unk_7' since='v0.47.01'/>
                <int32_t name='unk_8' comment='only seen 0' since='v0.47.01'/>
                <int32_t name='unk_9' comment='only seen 0' since='v0.47.01'/>
                <int32_t name='first_year' comment="pair less than or equal to year. Guessing it's first contact" since='v0.47.01'/>
                <int32_t name='first_year_tick' since='v0.47.01'/>
            </pointer>
        </stl-vector>
        <!--
            Entries with a 'rank' value of zero are suppressed from display. Display order seems to depend on
            the value of the first 'attitude' entry.
            Buddy/Grudge/AnimalPartner entries forms the primary group, sorted in ascending histfig id order.
            The secondary group consists of Friendly, where the internal sort order is based on higher 'rank'.
            If the 'rank' is equal the histfig id determines the order.
            The tertiary group consists of zero length 'attitude' entries. Those are again sorted based on higher
            'rank', with histfig id breaking ties.
            Note that only the entries listed above have been observed as the first 'attitude' element, with others
            optionally added as well. This does not mean they may not exist, but that the sort order described above
            may be incomplete.
            The role of 'counter' is unknown, but might somehow tick over into an increase in rank. It does not seem
            to play any part in the display sort order.
        -->
        <stl-vector name='hf_historical' since='v0.44.01'>
            <pointer>
                <int32_t name='histfig_id' ref-target='historical_figure'/>
                <stl-vector name='unk_1' type-name='int32_t'/>
                <stl-vector name='unk_2' type-name='int32_t'/>
                <stl-vector name='unk_3' type-name='int32_t'/>
                <int32_t name='loyalty' comment="0 - 100" since='v0.47.01'/>
                <int32_t name='respect' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='fear' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='love' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='trust' comment="-100 - 100" since='v0.47.01'/>
            </pointer>
        </stl-vector>
        <stl-vector name='unk_1' since='v0.44.01'>
            <pointer>
                <int32_t name='unk_1'/>
                <stl-vector name='unk_2' type-name='int32_t'/>
                <stl-vector name='unk_3' type-name='int32_t'/>
                guessing these are the same 5 fields as above, since they have the same version threshold
                <int32_t name='loyalty' comment="0 - 100" since='v0.47.01'/>
                <int32_t name='respect' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='fear' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='love' comment="-100 - 100" since='v0.47.01'/>
                <int32_t name='trust' comment="-100 - 100" since='v0.47.01'/>
            </pointer>
        </stl-vector>
        <stl-vector name='identities' type-name='int32_t' ref-target='cultural_identity'/>
        <stl-vector name='artifact_claims' since='v0.44.01'>
            <pointer>
                <int32_t name='artifact_id' ref-target='artifact_record'/>
                <int32_t name='unk_1' comment="only 2 seen"/>
                <int32_t name='year'/>
                <int32_t name='year_tick'/>
                <int32_t name='unk_2' init-value='-1'/>
            </pointer>
        </stl-vector>
        <int32_t name='unk_2'/>
        <pointer name='intrigues'>
            <stl-vector name='potential_corrupt_skill'>
                <comment>
                    only CONVERSATION, INTIMIDATION, and LYING seen;
                    could easily be an entirely different type
                </comment>
                <enum type-name='job_skill' base-type='int32_t'/>
            </stl-vector>
            <stl-vector name='potential_corrupt_target'>
                <compound is-union='true' union-tag-field='potential_corrupt_skill'>
                    <int32_t init-value='-1' name='LYING'/>
                    <int32_t ref-target='historical_entity' name='INTIMIDATION'/>
                    <enum type-name='value_type' base-type='int32_t' name='CONVERSATION'/>
                </compound>
            </stl-vector>
            <stl-vector name='potential_corrupt_circumstance'>
                <enum type-name='unit_thought_type' base-type='int32_t'/>
            </stl-vector>
            <stl-vector name='potential_corrupt_unk4' type-name='int32_t' init-value='-1' comment='only -1 seen'/>
            <stl-vector name='plots'>
                <pointer>
                    <int32_t name='id' comment="starts as index in parent vector"/>
                    <enum name='plot_type' base-type='int32_t'>
                        <enum-item name='None' value='-1'/>
                        <enum-item name='Grow_Funding_Network'/>
                        <enum-item name='Grow_Asset_Network'/>
                        <enum-item name='Acquire_Artifact'/>
                        <enum-item name='Grow_Corruption_Network'/>
                        <enum-item name='Attain_Rank'/>
                        <enum-item name='Assassinate_Actor'/>
                        <enum-item name='Corruptly_Punish_Actor'/>
                        <enum-item name='Frame_Actor'/>
                        <enum-item name='Kidnap_Actor'/>
                        <enum-item name='Sabotage_Actor'/>
                        <enum-item name='Direct_War_To_Actor'/>
                        <enum-item name='Corrupt_Actors_Government'/>
                        <enum-item name='Counterintelligence'/>
                        <enum-item name='Become_Immortal'/>
                        <enum-item name='Undead_World_Conquest'/>
                        <enum-item name='Infiltrate_Society'/>
                    </enum>
                    <int32_t name='parameter' init-value='-1' comment="0/3/5:local_id, 2:artifact_id, 7/8/9/10/11:actor_id, 12/15:entity_id, 1/4:not seen"/>
                    <int32_t name='on_hold'/>
                    <stl-vector name='plot_agreements' pointer-type='plot_agreement'/>
                    <compound name='plot_data' is-union='true'>
                        <pointer name='None' comment="seems uninitialized"/>
                        <pointer name='Grow_Funding_Network' comment="seems uninitialized"/>
                        <pointer name='Grow_Asset_Network' comment="pointer not seen"/>
                        <pointer name='Acquire_Artifact' comment="seems uninitialized"/>
                        <pointer name='Grow_Corruption_Network' comment="seems uninitialized"/>
                        <pointer name='Attain_Rank' comment="pointer not seen"/>
                        <pointer name='Assassinate_Actor' comment="pointer not seen"/>
                        <pointer name='Corruptly_Punish_Actor'/>
                        <pointer name='Frame_Actor' comment="seems uninitialized"/>
                        <pointer name='Kidnap_Actor' comment="pointer not seen"/>
                        <pointer name='Sabotage_Actor'>
                            <int32_t name='unk_1' init-value='-1' comment="not seen anything else"/>
                            <int32_t name='unk_2' init-value='-1' comment="not seen anything else"/>
                        </pointer>
                        <pointer name='Direct_War_To_Actor' comment="pointer not seen"/>
                        <pointer name='Corrupt_Actors_Government' comment="pointer not seen"/>
                        <pointer name='Counterintelligence' comment="pointer not seen"/>
                        <pointer name='Become_Immortal' comment="pointer not seen"/>

                        <pointer name='Undead_World_Conquest'>
                            <stl-vector name='unk5_t14_1' type-name='int32_t' comment="seems like sorted sequence of double digit numbers"/>
                        </pointer>
                        <pointer name='Infiltrate_Society'>
                            <int32_t name='action' comment="8:prepare coup, 9:steal treasures and prepare coup. Bitmap?"/>
                            <int32_t name='unk5_t15_2' init-value='-1' comment="not seen anything else"/>
                            <int32_t name='unk5_t15_3' init-value='0' comment="not seen anything else"/>
                        </pointer>
                    </compound>
                    <int32_t name='delegated_plot_id' init-value='-1'/>
                    <int32_t name='delegated_plot_hfid' ref-target='historical_figure'/>
                    <int32_t name='parent_plot' init-value='-1'/>
                    <int32_t name='parent_plot_hfid' ref-target='historical_figure'/>
                    <int32_t name='agreement' ref-target='agreement'/>
                    <int32_t name='actor_nemesis_id' ref-target='nemesis_record'/>
                    <int32_t name='unk5_13' init-value='-1' comment="0-8 seen"/>
                    <int32_t name='plotter_nemesis_id' ref-target='nemesis_record'/>
                    <int32_t name='unk5_15' init-value='-1' comment="0-5 seen"/>
                </pointer>
            </stl-vector>
            <int32_t name='next_plot_id'/>
            <stl-vector name='revealed_agreements' pointer-type='agreement'/>
            <stl-vector name='agreemeents' pointer-type='agreement'/>
            <stl-vector name='intrigue'>
                <pointer>
                    <int32_t name='id' comment="index into the parent vector (at least initially)"/>
                    <int32_t name='unk9_2' comment="0 seen"/>
                    <int32_t name='hf_1' ref-target='historical_figure' comment="visual relation seen"/>
                    <int32_t name='hf_2' ref-target='historical_figure' comment="visual relation seen"/>
                    <int32_t name='unk9_5' init-value='-1'/>
                    <int32_t name='unk9_6' ref-target='historical_entity' comment="site government seen. Target? Possible threat?"/>
                    <int32_t name='handle_actor_id' init-value='-1' comment="based on exported XML instances"/>
                    <enum name='role' type-name='plot_role_type' base-type='int32_t'/>
                    <enum name='strategy' type-name='plot_strategy_type' base-type='int32_t'/>
                    <int32_t name='unk9_10' ref-target='historical_entity' comment="site government seen. Target? Member of/possible threat?"/>
                    <int32_t name='unk9_11' init-value='-1' comment='1 seen'/>
                    <stl-vector name='unk9_12' type-name='int32_t'/>
                </pointer>
            </stl-vector>
            <int32_t name='next_intrigue_id'/>
            <stl-vector name='unk11' type-name='int32_t' comment="4 bytes allocated observed, which cant' host a pointer"/>
            <stl-vector name='unk12'>
                <pointer>
                    <int32_t name='unk_1'/>
                    <enum name='type' base-type='int32_t'>
                        <enum-item name='type_0'/>
                        <enum-item name='type_1'/>
                        <enum-item name='type_2'/>
                    </enum>
                    <int32_t name='unk_2'/>
                    <compound name='data' is-union='true'>
                        <pointer name='type_0'>
                            <int32_t name='unk_1'/>
                            <int32_t name='unk_2'/>
                            <int32_t name='unk_3'/>
                            <int32_t name='unk_4'/>
                        </pointer>
                        <pointer name='type_1'>
                            <int32_t name='unk_1'/>
                            <int32_t name='unk_2'/>
                            <int32_t name='unk_3'/>
                        </pointer>
                        <pointer name='type_2'>
                            <compound name='unk_1'>
                                <int32_t name='unk_0'/>
                                <int32_t name='unk_type'/>
                                <int32_t name='unk_2'/>
                                <int32_t name='unk_3'/>
                                <int32_t name='unk_4'/>
                                types 0+5 - a+b+c+d+e
                                types 1+3 - a+b+c+d
                                types 2+4 - a+b+c
                                <int32_t name='unk_5a'/>
                                <int32_t name='unk_5b'/>
                                <int32_t name='unk_5c'/>
                                <int32_t name='unk_5d'/>
                                <int32_t name='unk_5e'/>
                                <int32_t name='unk_6'/>
                            </compound>
                            <int32_t name='unk_2'/>
                            <int32_t name='unk_3'/>
                            <int32_t name='unk_4'/>
                        </pointer>
                    </compound>
                </pointer>
            </stl-vector>
            <int32_t name='unk13'/>
            <stl-vector name='unk14'>
                <pointer/> - this is the same 6-subtype 11-integer union seen immediately above in ptr_3
            </stl-vector>
            <int32_t name='unk15'/>
            <int32_t name='unk16' init-value='-1'/>
            <int32_t name='unk17' init-value='-1'/>
        </pointer>
    </struct-type>

    <enum-type type-name='histfig_flags'>
        <enum-item name='reveal_artwork'/>
        <enum-item name='equipment_created'/>
        <enum-item name='deity'/>
        <enum-item name='force'/>
        <enum-item name='skeletal_deity'/>
        <enum-item name='rotting_deity'/>
        <enum-item name='worldgen_acted'/>
        <enum-item name='ghost'/>
        <enum-item name='skin_destroyed'/>
        <enum-item name='meat_destroyed'/>
        <enum-item name='bones_destroyed'/>
        <enum-item name='brag_on_kill'/>
        <enum-item name='kill_quest'/>
        <enum-item name='chatworthy'/>
        <enum-item name='flashes'/>
        <enum-item name='never_cull'/>
    </enum-type>

    <enum-type type-name='histfig_relationship_type' base-type='int16_t'>
        -- Can be checked through viewscreen_layer_unit_relationshipst
        <enum-item name='None' value='-1'/>
        <enum-item name='Mother'/>
        <enum-item name='Father'/>
        <enum-item name='Parent'/>
        <enum-item name='Husband'/>
        <enum-item name='Wife'/>
        <enum-item name='Spouse'/>
        <enum-item name='SonEldest'/>
        <enum-item name='SonEldest2'/>
        <enum-item name='SonEldest3'/>
        <enum-item name='SonEldest4'/>
        --  10
        <enum-item name='SonEldest5'/>
        <enum-item name='SonEldest6'/>
        <enum-item name='SonEldest7'/>
        <enum-item name='SonEldest8'/>
        <enum-item name='SonEldest9'/>
        <enum-item name='SonEldest10'/>
        <enum-item name='Son'/>
        <enum-item name='SonYoungest'/>
        <enum-item name='SonOnly'/>
        <enum-item name='DaughterEldest'/>
        --  20
        <enum-item name='DaughterEldest2'/>
        <enum-item name='DaughterEldest3'/>
        <enum-item name='DaughterEldest4'/>
        <enum-item name='DaughterEldest5'/>
        <enum-item name='DaughterEldest6'/>
        <enum-item name='DaughterEldest7'/>
        <enum-item name='DaughterEldest8'/>
        <enum-item name='DaughterEldest9'/>
        <enum-item name='DaughterEldest10'/>
        <enum-item name='Daughter'/>
        --  30
        <enum-item name='DaughterOnly'/>
        <enum-item name='DaughterYoungest'/>
        <enum-item name='ChildEldest'/>
        <enum-item name='ChildEldest2'/>
        <enum-item name='ChildEldest3'/>
        <enum-item name='ChildEldest4'/>
        <enum-item name='ChildEldest5'/>
        <enum-item name='ChildEldest6'/>
        <enum-item name='ChildEldest7'/>
        <enum-item name='ChildEldest8'/>
        --  40
        <enum-item name='ChildEldest9'/>
        <enum-item name='ChildEldest10'/>
        <enum-item name='Child'/>
        <enum-item name='ChildYoungest'/>
        <enum-item name='ChildOnly'/>
        <enum-item name='PaternalGrandmother'/>
        <enum-item name='PaternalGrandfather'/>
        <enum-item name='MaternalGrandmother'/>
        <enum-item name='MaternalGrandfather'/>
        <enum-item name='Grandmother'/>
        --  50
        <enum-item name='Grandfather'/>
        <enum-item name='Grandparent'/>
        <enum-item name='OlderBrother'/>
        <enum-item name='OlderSister'/>
        <enum-item name='OlderSibling'/>
        <enum-item name='YoungerBrother'/>
        <enum-item name='YoungerSister'/>
        <enum-item name='YoungerSibling'/>
        <enum-item name='Cousin'/>
        <enum-item name='Aunt'/>
        --  60
        <enum-item name='Uncle'/>
        <enum-item name='Niece'/>
        <enum-item name='Nephew'/>
        <enum-item name='Sibling'/>
        <enum-item name='Grandchild'/>
        <enum-item name='OlderHalfBrother' since='v0.47.01' comment="'since' valid for this entry and those below"/>
        <enum-item name='OlderHalfSister'/>
        <enum-item name='OlderHalfSibling'/>
        <enum-item name='YoungerHalfBrother'/>
        <enum-item name='YoungerHalfSister'/>
        --  70
        <enum-item name='YoungerHalfSibling'/>
        <enum-item name='HalfSibling'/>
    </enum-type>

    <enum-type type-name='vague_relationship_type' base-type='int16_t' comment="bay12: WGRelationship; not a great name given that lovers, ex lovers, and lieutenants appear here, but histfig and unit are both used...">
        <enum-item name='none' value='-1'/>
        <enum-item name='childhood_friend'/>
        <enum-item name='war_buddy'/>
        <enum-item name='jealous_obsession'/>
        <enum-item name='jealous_relationship_grudge'/>
        <enum-item name='lover'/>
        <enum-item name='former_lover' comment="bay12: BREAKUP; broke up"/>
        <enum-item name='scholar_buddy' comment='bay12: SCHOLARLY_INTEREST'/>
        <enum-item name='artistic_buddy' comment='bay12: ARTISTIC_INTEREST'/>
        <enum-item name='athlete_buddy' comment='bay12: ATHLETES'/>
        <enum-item name='athletic_rival' comment='bay12: ATHLETES_RIVALS'/>
        <enum-item name='business_rival' comment='bay12: BUSINESS_RIVALS'/>
        <enum-item name='religious_persecution_grudge'/>
        <enum-item name='grudge'/>
        <enum-item name='persecution_grudge'/>
        <enum-item name='supernatural_grudge' comment='bay12: SUPERNATURAL_VENGEANCE'/>
        <enum-item name='lieutenant' comment='bay12: INTRIGUE_LIEUTENANT'/>
        <enum-item name='worshipped_deity' comment='bay12: DEITY'/>
        <enum-item name='spouse'/>
        <enum-item name='mother'/>
        <enum-item name='father'/>
        <enum-item name='master'/>
        <enum-item name='apprentice'/>
        <enum-item name='companion'/>
        <enum-item name='ex_spouse' comment='bay12: FORMER_SPOUSE'/>
        <enum-item name='neighbor'/>
        <enum-item name='shared_entity' comment="Religion/PerformanceTroupe/MerchantCompany/Guild"/>
    </enum-type>

    <struct-type type-name='historical_figure' instance-vector='$global.world.history.figures' key-field='id'
                 original-name='history_figurest'>
        <enum base-type='int16_t' name='profession' type-name='profession'/>

        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <enum name='sex' type-name='pronoun_type'/>

        <bitfield type-name='orientation_flags' name='orientation_flags'/>
        <int32_t name='appeared_year'/>
        <int32_t name='born_year'/>
        <int32_t name='born_seconds'/>
        <int32_t name='curse_year' since='v0.34.01'/>
        <int32_t name='curse_seconds' since='v0.34.01'/>

        <int32_t name='birth_year_bias' init-value='0' since='v0.34.01'/>
        <int32_t name='birth_time_bias' init-value='0' since='v0.34.01'/>

        <int32_t name='old_year'/>
        <int32_t name='old_seconds'/>
        <int32_t name='died_year'/>
        <int32_t name='died_seconds'/>

        <compound type-name='language_name' name='name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='population_id' ref-target='entity_population'/>

        <int32_t name='breed_id' comment='from legends export'/>
        <int32_t name='cultural_identity' ref-target='cultural_identity' since='v0.40.01'/>
        <int32_t name='family_head_id' ref-target='historical_figure' since='v0.44.01' comment='When a unit is asked about their family in adventure mode, the historical figure corresponding to this ID is called the head of the family or ancestor.'/>

        <df-flagarray name='flags' index-enum='histfig_flags'/>

        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='nemesis_id' ref-target='nemesis_record' since='v0.40.01' comment='sometimes garbage'/>
        <int32_t name='id'/>

        <int32_t name='art_count'/>

        <stl-vector name='entity_links' pointer-type='histfig_entity_link'/>
        <stl-vector name='site_links' pointer-type='histfig_site_link'/>
        <stl-vector name='histfig_links' pointer-type='histfig_hf_link'/>

        <pointer name='info' type-name='historical_figure_info' comment='bay12: hf_profilest profile'/>

        <pointer name='vague_relationships' comment="Do not have to be available mutually, i.e. DF can display Legends relations forming for the other party that does not have an entry (plus time and other conditions not located)">
            <static-array name='hfid' ref-target='historical_figure' type-name='int32_t' init-value='0' count='6'/>
            <static-array name='relationship' type-name='vague_relationship_type' count='6' comment="unused elements are uninitialized"/>
            <int32_t name='count' comment="number of hf/relationship pairs above"/>
        </pointer>
        <pointer name="unk_f0" type-name="world_site"/>
        <pointer name="unk_f4" type-name="world_region"/>
        <pointer name="unk_f8" type-name="world_underground_region"/>
        <pointer name="unk_fc">
            <df-array name="unk_0" type-name='uint8_t'/>
            <df-array name="unk_8" type-name='int16_t'/>
        </pointer>
        <pointer name="unk_v47_2">
            <pointer name='unk_1' type-name='historical_figure'/>
            <pointer name='unk_2' type-name='historical_figure'/>
            <pointer name='unk_3' type-name='historical_figure'/>
            <pointer name='unk_4' type-name='historical_figure'/>
            <pointer name='unk_5' type-name='historical_figure'/>
            <pointer name='unk_6' type-name='historical_figure'/>
            <int16_t name='unk_7'/>
            <int16_t name='unk_8'/>
            <int16_t name='unk_9'/>
            <int16_t name='unk_10'/>
            <int16_t name='unk_11'/>
            <int16_t name='unk_12'/>
            <int32_t name='unk_13'/>
            <pointer name='unk_14' type-name='historical_figure'/>
            <pointer name='unk_15' type-name='historical_figure'/>
            <pointer name='unk_16' type-name='historical_figure'/>
        </pointer>
        <int32_t name="unk_v47_3"/>
        <int32_t name="unk_v47_4"/>
        <int32_t name='unk_v4019_1' init-value='-1' since='v0.40.17-19'/>
        <int32_t name='unk_5' init-value='-1'/>
        -- protected --
        <size_t name='pool_id'/>
    </struct-type>

    <enum-type type-name='identity_type' base-type='int32_t'>
         <enum-attr name='id_tag' comment='for identity.id'/>

         <enum-item name='None'  value='-1' comment="Seen on adventurer assuming an identity for reasons unknown">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='HidingCurse' comment="Inferred from Units.cpp after examining code using 'unk_4c'">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='Impersonating' comment="Seen where primeval creatures impersonate 'real' gods in modded game">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='TrueName' comment="E.g. of demonic overlords. Can be used by adventurers to gain sway over them">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='FalseIdentity' comment="For underhanded purposes">
            <item-attr name='id_tag' value='nemesis_id'/>
         </enum-item>

         <enum-item name='InfiltrationIdentity' comment="A guess. The cases seen all had the HFs fool the same entity that they were members of it, but no actual purpose was seen">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>

         <enum-item name='Identity' comment="Claim a new official identity, seen when religious appointments are received">
            <item-attr name='id_tag' value='histfig_id'/>
         </enum-item>
   </enum-type>

    <struct-type type-name='identity'
                 instance-vector='$global.world.identities.all' key-field='id'>
        dtor 0x8C17FA0

        <int32_t name='id'/>
        <compound name='name' type-name='language_name' comment="Not used when Impersonating"/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int32_t name='impersonated_hf' ref-target='historical_figure' comment="only when Impersonating"/>
        <compound is-union='true' union-tag-attr='id_tag'>
            <int32_t name='histfig_id' ref-target='historical_figure'/>
            <int32_t name='nemesis_id' ref-target='nemesis_record'/>
        </compound>

        <enum name='type' type-name='identity_type' base-type='int32_t'/>

        <int32_t name='birth_year' comment='the fake one, that is'/>
        <int32_t name='birth_second'/>
        <int32_t name='unk_2'/>
        <int32_t name='unk_3'/>
        <int16_t name='unk_v47_1' init-value='-1'/>
        <int32_t name='unk_v47_2' init-value='-1'/>
        <enum name='profession' type-name='profession' base-type='int16_t'/>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <stl-vector name='unk_4' pointer-type='identity_unk_94'/>
        <stl-vector name='unk_5' pointer-type='identity_unk_95'/>
    </struct-type>

    <struct-type type-name='identity_unk_94'>
        <int32_t name='unk_0'/>
        <stl-vector name='unk_1' type-name='int32_t'/>
        <stl-vector name='unk_2' type-name='int32_t'/>
        <int32_t name='unk_3' init-value='-1'/>
        <int32_t name='unk_4' init-value='-1'/>
        <int32_t name='unk_5'/>
        <int32_t name='unk_6' comment='uninitialized'/>
        <int32_t name='unk_7'/>
        <int32_t name='unk_8' init-value='-1'/>
        <int32_t name='unk_9' comment='uninitialized'/>
    </struct-type>

    <struct-type type-name='identity_unk_95'>
        <int32_t name='unk_0' init-value='-1'/>
        <stl-vector name='unk_1' type-name='int32_t'/>
        <stl-vector name='unk_2' type-name='int32_t'/>
        <int32_t name='unk_3' init-value='-1'/>
        <int32_t name='unk_4' init-value='-1'/>
        <int32_t name='unk_5'/>
    </struct-type>

    <enum-type type-name='mental_picture_property_type'>
        <enum-item name='DATE'/>
        <enum-item name='ACTION'/>
        <enum-item name='TOOL'/>
        <enum-item name='EMOTION'/>
        <enum-item name='COLOR_PATTERN'/>
        <enum-item name='SHAPE'/>
        <enum-item name='ADJECTIVE'/>
        <enum-item name='POSITION'/>
        <enum-item name='TIME'/>
    </enum-type>

    <class-type type-name='mental_picture_propertyst'>
        <int32_t name='unk_0'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_property_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_property_datest' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='mental_picture_property_actionst' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
        <int32_t name='unk_3'/>
        <int32_t name='unk_4'/>
    </class-type>

    <class-type type-name='mental_picture_property_toolst' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
        <int32_t name='unk_3'/>
    </class-type>

    <class-type type-name='mental_picture_property_emotionst' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='mental_picture_property_color_patternst' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='mental_picture_property_shapest' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='mental_picture_property_adjectivest' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='mental_picture_property_positionst' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
        <int32_t name='unk_3'/>
    </class-type>

    <class-type type-name='mental_picture_property_timest' inherits-from='mental_picture_propertyst'>
        <int32_t name='unk_1'/>
        <int32_t name='unk_2'/>
        <int32_t name='unk_3'/>
    </class-type>


    <enum-type type-name='mental_picture_element_type'>
        <enum-item name='HF'/>
        <enum-item name='SITE'/>
        <enum-item name='REGION'/>
    </enum-type>

    <class-type type-name='mental_picture_elementst'>
        <int32_t name='unk_1'/>
        <virtual-methods>
            <vmethod ret-type='mental_picture_element_type' name='getType'/>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='mental_picture_element_hfst' inherits-from='mental_picture_elementst'>
        <int32_t name='unk_1'/>
    </class-type>

    <class-type type-name='mental_picture_element_sitest' inherits-from='mental_picture_elementst'>
        <int32_t name='unk_1'/>
    </class-type>

    <class-type type-name='mental_picture_element_regionst' inherits-from='mental_picture_elementst'>
        <int32_t name='unk_1'/>
    </class-type>


    <enum-type type-name='history_event_type'>
        <enum-item name='WAR_ATTACKED_SITE'/>
        <enum-item name='WAR_DESTROYED_SITE'/>
        <enum-item name='CREATED_SITE'/>
        <enum-item name='HIST_FIGURE_DIED'/>
        <enum-item name='ADD_HF_ENTITY_LINK'/>
        <enum-item name='REMOVE_HF_ENTITY_LINK'/>
        <enum-item name='FIRST_CONTACT'/>
        <enum-item name='FIRST_CONTACT_FAILED'/>
        <enum-item name='TOPICAGREEMENT_CONCLUDED'/>
        <enum-item name='TOPICAGREEMENT_REJECTED'/>
        <enum-item name='TOPICAGREEMENT_MADE'/>
        <enum-item name='WAR_PEACE_ACCEPTED'/>
        <enum-item name='WAR_PEACE_REJECTED'/>
        <enum-item name='DIPLOMAT_LOST'/>
        <enum-item name='AGREEMENTS_VOIDED'/>
        <enum-item name='MERCHANT'/>

        <enum-item name='ARTIFACT_HIDDEN'/>
        <enum-item name='ARTIFACT_POSSESSED'/>
        <enum-item name='ARTIFACT_CREATED'/>
        <enum-item name='ARTIFACT_LOST'/>
        <enum-item name='ARTIFACT_FOUND'/>
        <enum-item name='ARTIFACT_RECOVERED'/>
        <enum-item name='ARTIFACT_DROPPED'/>
        <enum-item name='RECLAIM_SITE'/>
        <enum-item name='HF_DESTROYED_SITE'/>
        <enum-item name='SITE_DIED'/>
        <enum-item name='SITE_RETIRED'/>
        <enum-item name='ENTITY_CREATED'/>
        <enum-item name='ENTITY_ACTION'/>
        <enum-item name='ENTITY_INCORPORATED'/>
        <enum-item name='CREATED_BUILDING'/>
        <enum-item name='REPLACED_BUILDING'/>

        <enum-item name='ADD_HF_SITE_LINK'/>
        <enum-item name='REMOVE_HF_SITE_LINK'/>
        <enum-item name='ADD_HF_HF_LINK'/>
        <enum-item name='REMOVE_HF_HF_LINK'/>
        <enum-item name='ENTITY_RAZED_BUILDING'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_CONSTRUCT'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_DYE_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM_IMPROVEMENT'/>
        <enum-item name='MASTERPIECE_CREATED_FOOD'/>
        <enum-item name='MASTERPIECE_CREATED_ENGRAVING'/>
        <enum-item name='MASTERPIECE_LOST'/>
        <enum-item name='CHANGE_HF_STATE'/>
        <enum-item name='CHANGE_HF_JOB'/>
        <enum-item name='WAR_FIELD_BATTLE'/>

        <enum-item name='WAR_PLUNDERED_SITE'/>
        <enum-item name='WAR_SITE_NEW_LEADER'/>
        <enum-item name='WAR_SITE_TRIBUTE_FORCED'/>
        <enum-item name='WAR_SITE_TAKEN_OVER'/>
        <enum-item name='BODY_ABUSED'/>
        <enum-item name='HIST_FIGURE_ABDUCTED'/>
        <enum-item name='ITEM_STOLEN'/>
        <enum-item name='HF_RAZED_BUILDING'/>
        <enum-item name='CREATURE_DEVOURED'/>
        <enum-item name='HIST_FIGURE_WOUNDED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_BATTLE_EVENT'/>
        <enum-item name='CREATED_WORLD_CONSTRUCTION'/>
        <enum-item name='HIST_FIGURE_REUNION'/>
        <enum-item name='HIST_FIGURE_REACH_SUMMIT'/>
        <enum-item name='HIST_FIGURE_TRAVEL'/>
        <enum-item name='HIST_FIGURE_NEW_PET'/>

        <enum-item name='ASSUME_IDENTITY'/>
        <enum-item name='CREATE_ENTITY_POSITION'/>
        <enum-item name='CHANGE_CREATURE_TYPE'/>
        <enum-item name='HIST_FIGURE_REVIVED'/>
        <enum-item name='HF_LEARNS_SECRET'/>
        <enum-item name='CHANGE_HF_BODY_STATE'/>
        <enum-item name='HF_ACT_ON_BUILDING'/>
        <enum-item name='HF_DOES_INTERACTION'/>
        <enum-item name='HF_CONFRONTED'/>
        <enum-item name='ENTITY_LAW'/>
        <enum-item name='HF_GAINS_SECRET_GOAL'/>
        <enum-item name='ARTIFACT_STORED'/>
        <enum-item name='AGREEMENT_FORMED'/>
        <enum-item name='SITE_DISPUTE'/>
        <enum-item name='AGREEMENT_CONCLUDED'/>
        <enum-item name='INSURRECTION_STARTED'/>

        <enum-item name='INSURRECTION_ENDED'/>
        <enum-item name='HF_ATTACKED_SITE'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='KNOWLEDGE_DISCOVERED'/>
        <enum-item name='ARTIFACT_TRANSFORMED'/>
        <enum-item name='ARTIFACT_DESTROYED'/>
        <enum-item name='HF_RELATIONSHIP_DENIED'/>
        <enum-item name='REGIONPOP_INCORPORATED_INTO_ENTITY'/>
        <enum-item name='POETIC_FORM_CREATED'/>
        <enum-item name='MUSICAL_FORM_CREATED'/>
        <enum-item name='DANCE_FORM_CREATED'/>
        <enum-item name='WRITTEN_CONTENT_COMPOSED'/>
        <enum-item name='CHANGE_HF_MOOD'/>

        <enum-item name='ARTIFACT_CLAIM_FORMED'/>
        <enum-item name='ARTIFACT_GIVEN'/>
        <enum-item name='HF_ACT_ON_ARTIFACT'/>
        <enum-item name='HF_RECRUITED_UNIT_TYPE_FOR_ENTITY'/>
        <enum-item name='HFS_FORMED_REPUTATION_RELATIONSHIP'/>
        <enum-item name='ARTIFACT_COPIED'/>
        <enum-item name='SNEAK_INTO_SITE'/>
        <enum-item name='SPOTTED_LEAVING_SITE'/>
        <enum-item name='ENTITY_SEARCHED_SITE'/>
        <enum-item name='HF_FREED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_ACTION'/>
        <enum-item name='ENTITY_RAMPAGED_IN_SITE'/>
        <enum-item name='ENTITY_FLED_SITE'/>
        <enum-item name='TACTICAL_SITUATION'/>
        <enum-item name='SQUAD_VS_SQUAD'/>
        <enum-item name='SITE_SURRENDERED'/>
        <enum-item name='ENTITY_EXPELS_HF'/>

        <enum-item name='TRADE' since='v0.47.01'/>
        <enum-item name='ADD_ENTITY_SITE_PROFILE_FLAG'/>
        <enum-item name='GAMBLE'/>
        <enum-item name='ADD_HF_ENTITY_HONOR'/>
        <enum-item name='ENTITY_DISSOLVED'/>
        <enum-item name='ENTITY_EQUIPMENT_PURCHASE'/>
        <enum-item name='MODIFIED_BUILDING'/>
        <enum-item name='BUILDING_PROFILE_ACQUIRED'/>
        <enum-item name='HF_PREACH'/>
        <enum-item name='ENTITY_PERSECUTED'/>
        <enum-item name='ENTITY_BREACH_FEATURE_LAYER'/>
        <enum-item name='ENTITY_ALLIANCE_FORMED'/>
        <enum-item name='HF_RANSOMED'/>
        <enum-item name='HF_ENSLAVED'/>
        <enum-item name='SABOTAGE'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
        <enum-item name='HFS_FORMED_INTRIGUE_RELATIONSHIP'/>
        <enum-item name='FAILED_INTRIGUE_CORRUPTION'/>
        <enum-item name='HF_CONVICTED'/>
        <enum-item name='FAILED_FRAME_ATTEMPT'/>
        <enum-item name='HF_INTERROGATED'/>
    </enum-type>

    <enum-type type-name='history_event_reason' base-type='int32_t' comment="bay12: Reason; Some of these require at least one parameter of varying type. The text is what DF provides without parameter">
        <enum-attr name='caption'/>
        <enum-item name='none' value='-1'/>

        <enum-item name='insurrection'>
            <item-attr name='caption' value='for an insurrection'/>
        </enum-item>
        <enum-item name='adventure'>
            <item-attr name='caption' value='to adventure'/>
        </enum-item>
        <enum-item name='guide'>
            <item-attr name='caption' value='as a guide'/>
        </enum-item>
        <enum-item name='rescued'>
            <item-attr name='caption' value='in order to be rescued'/>
        </enum-item>
        <enum-item name='sphere_alignment'>
            <item-attr name='caption' value='due to their cosmic similarity'/>
        </enum-item>
        <enum-item name='maintain_balance_in_universe'>
            <item-attr name='caption' value='in order to maintain balance in the universe'/>
        </enum-item>
        <enum-item name='highlight_boundaries_between_worlds'>
            <item-attr name='caption' value='to create a monument to the boundaries between realities'/>
        </enum-item>
        <enum-item name='sow_the_seeds_of_chaos_in_the_world'>
            <item-attr name='caption' value='to sow the seeds of chaos within'/>
        </enum-item>
        <enum-item name='provide_opportunities_for_courage'>
            <item-attr name='caption' value='to provide opportunities for courage to rise'/>
        </enum-item>
        <enum-item name='bring_death_to_the_world'>
            <item-attr name='caption' value='that more might die'/>
        </enum-item>

        -- 10

        <enum-item name='liked_appearance'>
            <item-attr name='caption' value='that all should gaze upon a truly gruesome visage'/>
        </enum-item>
        <enum-item name='because_it_was_destined'>
            <item-attr name='caption' value='because it was destined'/>
        </enum-item>
        <enum-item name='great_fortresses_built_and_tested'>
            <item-attr name='caption' value='that great fortresses might be raised and tested in siege'/>
        </enum-item>
        <enum-item name='whim'>
            <item-attr name='caption' value='on a whim'/>
        </enum-item>
        <enum-item name='bring_misery_to_the_world'>
            <item-attr name='caption' value='that it might bathe in misery forever'/>
        </enum-item>
        <enum-item name='bring_murder_to_the_world'>
            <item-attr name='caption' value='that more might be murdered'/>
        </enum-item>
        <enum-item name='bring_nightmares_into_reality'>
            <item-attr name='caption' value='in order to make nightmares reality'/>
        </enum-item>
        <enum-item name='bring_thralldom_to_the_world'>
            <item-attr name='caption' value='in order to make thralls of everyone'/>
        </enum-item>
        <enum-item name='bring_torture_to_the_world'>
            <item-attr name='caption' value='in order that acts of torture be perpetrated'/>
        </enum-item>
        <enum-item name='provide_opportunities_for_acts_of_valor'>
            <item-attr name='caption' value='to provide opportunities for acts of valor to be performed'/>
        </enum-item>

        -- 20

        <enum-item name='bring_war_to_the_world'>
            <item-attr name='caption' value='that war might rage forever'/>
        </enum-item>
        <enum-item name='find_relative'>
            <item-attr name='caption' value='in order to find a relative'/>
        </enum-item>
        <enum-item name='offer_condolences'>
            <item-attr name='caption' value='to offer condolences'/>
        </enum-item>
        <enum-item name='be_brought_to_safety'>
            <item-attr name='caption' value='in order to be brought to safety'/>
        </enum-item>
        <enum-item name='help_with_rescue'>
            <item-attr name='caption' value='to help with a rescue'/>
        </enum-item>
        <enum-item name='insufficient_work'>
            <item-attr name='caption' value='due to insufficient work'/>
        </enum-item>
        <enum-item name='work_request'>
            <item-attr name='caption' value='to request work'/>
        </enum-item>
        <enum-item name='make_weapon'>
            <item-attr name='caption' value='that weapons be made'/>
        </enum-item>
        <enum-item name='vent_at_boss'>
            <item-attr name='caption' value='to vent at somebody in charge'/>
        </enum-item>
        <enum-item name='cry_on_boss'>
            <item-attr name='caption' value='to cry on somebody in charge'/>
        </enum-item>

        -- 30

        <enum-item name='should_have_reached_goal'>
            <item-attr name='caption' value='as the goal was not reached'/>
        </enum-item>
        <enum-item name='insufficient_progress_toward_goal'>
            <item-attr name='caption' value='as insufficient progress was made toward the goal'/>
        </enum-item>
        <enum-item name='going_wrong_direction'>
            <item-attr name='caption' value='after going the wrong direction'/>
        </enum-item>
        <enum-item name='arrived_at_location'>
            <item-attr name='caption' value='after arriving at the location'/>
        </enum-item>
        <enum-item name='entity_no_longer_rules'>
            <item-attr name='caption' value='as the relevant government was no longer in control'/>
        </enum-item>
        <enum-item name='left_site'>
            <item-attr name='caption' value='after leaving the site'/>
        </enum-item>
        <enum-item name='reunited_with_loved_one'>
            <item-attr name='caption' value='after being reunited with a loved one'/>
        </enum-item>
        <enum-item name='violent_disagreement'>
            <item-attr name='caption' value='after a violent disagreement'/>
        </enum-item>
        <enum-item name='adopted'>
            <item-attr name='caption' value='after adoption'/>
        </enum-item>
        <enum-item name='true_name_invocation'>
            <item-attr name='caption' value='after invocation of the true name'/>
        </enum-item>

        -- 40

        <enum-item name='arrived_at_person'>
            <item-attr name='caption' value='after finding an unknown creature'/>
        </enum-item>
        <enum-item name='eradicate_beasts'>
            <item-attr name='caption' value='in order to eradicate beasts'/>
        </enum-item>
        <enum-item name='entertain_people'>
            <item-attr name='caption' value='in order to entertain people'/>
        </enum-item>
        <enum-item name='make_a_living_as_a_warrior'>
            <item-attr name='caption' value='in order to make a living as a warrior'/>
        </enum-item>
        <enum-item name='study'>
            <item-attr name='caption' value='in order to study'/>
        </enum-item>
        <enum-item name='flight'>
            <item-attr name='caption' value='in order to flee'/>
        </enum-item>
        <enum-item name='scholarship'>
            <item-attr name='caption' value='in order to pursue scholarship'/>
        </enum-item>
        <enum-item name='be_with_master'>
            <item-attr name='caption' value='in order to be with the master'/>
        </enum-item>
        <enum-item name='become_citizen'>
            <item-attr name='caption' value='in order to become a citizen'/>
        </enum-item>
        <enum-item name='prefers_working_alone'>
            <item-attr name='caption' value='in order to continue working alone'/>
        </enum-item>

        -- 50

        <enum-item name='jealousy'>
            <item-attr name='caption' value='due to jealousy'/>
        </enum-item>
        <enum-item name='glorify_hf'>
            <item-attr name='caption' value='in order to glorify an unknown creature'/>
        </enum-item>
        <enum-item name='have_not_performed'>
            <item-attr name='caption' value='due to a lack of performances'/>
        </enum-item>
        <enum-item name='prevented_from_leaving'>
            <item-attr name='caption' value='after being prevented from leaving'/>
        </enum-item>
        <enum-item name='curiosity'>
            <item-attr name='caption' value='out of curiosity'/>
        </enum-item>
        <enum-item name='hire_on_as_mercenary'>
            <item-attr name='caption' value='to fill a role as a mercenary'/>
        </enum-item>
        <enum-item name='hire_on_as_performer'>
            <item-attr name='caption' value='to fill a role as a performer'/>
        </enum-item>
        <enum-item name='hire_on_as_scholar'>
            <item-attr name='caption' value='to fill a role as a scholar'/>
        </enum-item>
        <enum-item name='drink'>
            <item-attr name='caption' value='in order to drink'/>
        </enum-item>
        <enum-item name='admire_architecture'>
            <item-attr name='caption' value='in order to admire achitecture'/>
        </enum-item>

        -- 60

        <enum-item name='pray'>
            <item-attr name='caption' value='in order to pray'/>
        </enum-item>
        <enum-item name='relax'>
            <item-attr name='caption' value='in order to relax'/>
        </enum-item>
        <enum-item name='danger'>
            <item-attr name='caption' value='to experience danger'/>
        </enum-item>
        <enum-item name='cannot_find_artifact'>
            <item-attr name='caption' value='after being unable to find an artifact'/>
        </enum-item>
        <enum-item name='failed_mood'>
            <item-attr name='caption' value='after failing to create an artifact'/>
        </enum-item>
        <enum-item name='lack_of_sleep'>
            <item-attr name='caption' value='due to a lack of sleep'/>
        </enum-item>
        <enum-item name='trapped_in_cage'>
            <item-attr name='caption' value='after being trapped in a cage'/>
        </enum-item>
        <enum-item name='great_deal_of_stress'>
            <item-attr name='caption' value='after a great deal of stress'/>
        </enum-item>
        <enum-item name='unable_to_leave_location'>
            <item-attr name='caption' value='after being unable to leave a location'/>
        </enum-item>
        <enum-item name='sanctify_hf'>
            <item-attr name='caption' value='in order to sanctify an unknown creature'/>
        </enum-item>

        -- 70

        <enum-item name='artifact_is_heirloom_of_family_hfid'>
            <item-attr name='caption' value='as an heirloom of the an unknown creature family'/>
        </enum-item>
        <enum-item name='cement_bonds_of_friendship'>
            <item-attr name='caption' value='in order to cement the bonds of friendship'/>
        </enum-item>
        <enum-item name='as_a_symbol_of_everlasting_peace'>
            <item-attr name='caption' value='as a symbol of everlasting peace'/>
        </enum-item>
        <enum-item name='on_a_pilgrimage'>
            <item-attr name='caption' value='on a pilgrimage'/>
        </enum-item>
        <enum-item name='gather_information'>
            <item-attr name='caption' value='to gather information'/>
        </enum-item>
        <enum-item name='seek_sanctuary'>
            <item-attr name='caption' value='in order to find sactuary'/>
        </enum-item>
        <enum-item name='part_of_trade_negotiation'>
            <item-attr name='caption' value='as part of a trade negotiation'/>
        </enum-item>
        <enum-item name='artifact_is_symbol_of_entity_position'>
            <item-attr name='caption' value='as a symbol of authority within an unknown civilization'/>
        </enum-item>
        <enum-item name='fear_of_persecution' since='v0.47.01' comment='The ones below were introduced in 0.47.01 as well'>
            <item-attr name='caption' value='due to fear of persecution'/>
        </enum-item>
        <enum-item name='smooth_operation'>
            <item-attr name='caption' value='to smooth the operation of an unknown civilization'/>
        </enum-item>

        -- 80

        <enum-item name='nuance_belief'>
            <item-attr name='caption' value='due to a belief in nuances of'/>
        </enum-item>
        <enum-item name='shared_interest'>
            <item-attr name='caption' value='due to a shared interest in'/>
        </enum-item>
        <enum-item name='envy_living'>
            <item-attr name='caption' value='due to envy of those that live on'/>
        </enum-item>
        <enum-item name='death_panic'>
            <item-attr name='caption' value='due to panic about what happens after death'/>
        </enum-item>
        <enum-item name='death_fear'>
            <item-attr name='caption' value='due to fear of death'/>
        </enum-item>
        <enum-item name='avoid_judgement'>
            <item-attr name='caption' value='unable to face any possible judgment and the afterlife'/>
        </enum-item>
        <enum-item name='death_pride'>
            <item-attr name='caption' value='being too proud to give in to death'/>
        </enum-item>
        <enum-item name='death_vain'>
            <item-attr name='caption' value='being too vain to give in to death'/>
        </enum-item>
        <enum-item name='death_ambition'>
            <item-attr name='caption' value='having ambitions for which death was only a small obstacle'/>
        </enum-item>
        <enum-item name='lack_of_funds'>
            <item-attr name='caption' value='due to lack of funds'/>
        </enum-item>

        -- 90

        <enum-item name='battle_losses'>
            <item-attr name='caption' value='after taking heavy losses in battle'/>
        </enum-item>
        <enum-item name='conviction_exile'>
            <item-attr name='caption' value='after being exiled following a criminal conviction'/>
        </enum-item>
        <enum-item name='priest_vent'>
            <item-attr name='caption' value='to vent at a priest'/>
        </enum-item>
        <enum-item name='priest_cry'>
            <item-attr name='caption' value='to cry on a priest'/>
        </enum-item>
    </enum-type>

    <struct-type type-name='history_event_reason_info'>
        <enum name='type' type-name='history_event_reason' base-type='int32_t'/>
        <compound name='data' is-union='true' init-value='-1'>
            <int32_t name='glorify_hf' ref-target='historical_figure'/>
            <int32_t name='sanctify_hf' ref-target='historical_figure'/>
            <int32_t name='artifact_is_heirloom_of_family_hfid' ref-target='historical_figure'/>
            <int32_t name='artifact_is_symbol_of_entity_position' ref-target='historical_entity'/>
        </compound>
    </struct-type>

    <struct-type type-name='history_event_circumstance_info'>
        <enum name='type' type-name='unit_thought_type' base-type='int32_t'/>
        <compound name='data' is-union='true' init-value='-1'>
            <int32_t name='Death' ref-target='historical_figure'/>
            <int32_t name='Prayer' ref-target='historical_figure'/>
            <int32_t name='DreamAbout' ref-target='historical_figure'/>
            <int32_t name='Defeated' ref-target='historical_figure'/>
            <int32_t name='Murdered' ref-target='historical_figure'/>
            <int32_t name='HistEventCollection' ref-target='history_event_collection'/>
            <int32_t name='AfterAbducting' ref-target='historical_figure'/>
        </compound>
    </struct-type>

    <struct-type type-name='history_event_context' original-name='contextst'>
        <bitfield name='flags'>
            <flag-bit name='is_interrogation_report'/>
            <flag-bit name='do_markup'/>
        </bitfield>
        <pointer name='interrogator_relationships' type-name='historical_figure_relationships'/> evidence_repositoryst
        <pointer name='interrogation'> TODO: check size - interrogation_reportst
            <int32_t name='unk_00' init-value='-1'/>
            <int32_t name='unk_04' init-value='-1'/>
            <int32_t name='interrogator_id' ref-target='historical_figure'/>
            <int32_t name='subject_id' ref-target='historical_figure'/>
        </pointer>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <int32_t name='histfig_id' ref-target='historical_figure'/>
        <int32_t name='speaker_id' ref-target='historical_figure'/>
        <int32_t name='site_id' ref-target='world_site'/>
        <int32_t name='region_id' ref-target='world_region'/>
        <int32_t name='layer_id' ref-target='world_underground_region'/>
        <int32_t name='unk_34' init-value='-1' comment='passed to history_event::isRelatedToAgreementID, but all implementations of that function are broken currently'/>
        <int32_t name='abstract_building_id' ref-target='abstract_building'/>
        <enum name='sphere' type-name='sphere_type'/>
        <enum name='architectural_element' type-name='architectural_element'/>
        <int16_t name='unk_40' init-value='-1'/>
        <enum name='family_relationship' type-name='histfig_relationship_type' comment='not initialized'/>
        <int32_t name='number' init-value='1'/>
        <int16_t name='unk_48' init-value='-1'/>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='unk_4c' init-value='-1'/>
        <int32_t name='unk_50' init-value='-1'/>
        <int8_t name='unk_54' init-value='-1'/>
        <int16_t name='caste' ref-target='caste_raw'/>
        <bitfield name='undead_flags' type-name='undead_flags'/>
        <int16_t name='unk_5a' init-value='-1'/>
        <int32_t name='squad_id' ref-target='squad'/>
        <int32_t name='formation_id' init-value='-1' comment='ID within world.formations.all'/>
        <int32_t name='activity_id' ref-target='activity_entry'/>
        <int32_t name='breed_id' ref-target='breed'/>
        <int32_t name='battlefield_id' ref-target='battlefield'/>
        <int32_t name='interaction_instance_id' ref-target='interaction_instance'/>
        <int32_t name='written_content_id' ref-target='written_content'/>
        <int32_t name='identity_id' ref-target='identity'/>
        <int32_t name='incident_id' ref-target='incident'/>
        <int32_t name='crime_id' ref-target='crime'/>
        <int32_t name='region_weather_id' ref-target='region_weather'/>
        <int32_t name='creation_zone_id' ref-target='world_object_data'/>
        <int32_t name='vehicle_id' ref-target='vehicle'/>
        <int32_t name='army_id' ref-target='army'/>
        <int32_t name='army_controller_id' ref-target='army_controller'/>
        <int32_t name='army_tracking_info_id' init-value='-1' comment='ID within world.army_tracking_info.all'/>
        <int32_t name='cultural_identity_id' ref-target='cultural_identity'/>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <int32_t name='poetic_form_id' ref-target='poetic_form'/>
        <int32_t name='musical_form_id' ref-target='musical_form'/>
        <int32_t name='dance_form_id' ref-target='dance_form'/>
        <int32_t name='scale_id' ref-target='scale'/>
        <int32_t name='rhythm_id' ref-target='rhythm'/>
        <int32_t name='occupation_id' ref-target='occupation'/>
        <int32_t name='belief_system_id' ref-target='belief_system'/>
        <int32_t name='image_set_id' ref-target='image_set'/>
        <int32_t name='divination_set_id' ref-target='divination_set'/>
    </struct-type>

    <enum-type type-name='architectural_element' base-type='int16_t'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='paved_outdoor_area'/>
        <enum-item name='uneven_pillars'/>
        <enum-item name='square_of_pillars'/>
        <enum-item name='pillars_on_the_perimeter'/>
        <enum-item name='upper_floors'/>
        <enum-item name='lower_floors'/>
        <enum-item name='water_pool'/>
        <enum-item name='lava_pool'/>
        <enum-item name='stagnant_pool'/>
        <enum-item name='open_structure'/>
        <enum-item name='paved_indoor_areas'/>
        <enum-item name='detailed_surfaces'/>
    </enum-type>

    <enum-type type-name='history_event_flags'>
        <enum-item name='hidden' comment='event is hidden from legends mode when this is set'/>
        <enum-item/>
        <enum-item comment='related to intrigues (checked in df::history_event_failed_intrigue_corruptionst::getRelatedHistfigIDs)'/>
    </enum-type>

    <bitfield-type type-name='merc_role_type' base-type='uint8_t' since='v0.47.02' comment="regular if bit not set">
        <flag-bit name='attacker_scout'/>
        <flag-bit name='defender_scout'/>
    </bitfield-type>

    <class-type type-name='history_event' original-name='history_eventst'
                instance-vector='$global.world.history.events' key-field='id'>
        <int32_t name='year'/>
        <int32_t name='seconds'/>
        <df-flagarray name='flags' index-enum='history_event_flags'/>
        <int32_t name='id'/>

        <virtual-methods>
            <vmethod ret-type='history_event_type' name='getType'/>
            <vmethod ret-type='int32_t' name='getWarStatus'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getAngerModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getHappinessModifier'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
            </vmethod>
            <vmethod ret-type='bool' name='madeFirstContact'>
                <int32_t name='entity1' ref-target='historical_entity'/>
                <int32_t name='entity2' ref-target='historical_entity'/>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>

            <vmethod ret-type='int32_t' name='getKilledHistfigID'>
                <int32_t name='killer' ref-target='historical_figure'/>
                <ret-type><int32_t ref-target='historical_figure'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigKilled'>
                <int32_t name='victim' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='wasHistfigRevived'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='int32_t' comment='returns -1'/>
            <vmethod ret-type='int32_t' comment='returns -1'/>

            -- 10

            <vmethod name='getRelatedHistfigIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_figure'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
            </vmethod>
            <vmethod name='getRelatedSiteStructureIDs'>
                <pointer name='vec1'><stl-vector type-name='int32_t' ref-target='world_site'/></pointer>
                <pointer name='vec2'><stl-vector type-name='int32_t' ref-target='abstract_building'/></pointer>
            </vmethod>
            <vmethod name='getRelatedArtifactIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='artifact_record'/></pointer>
            </vmethod>
            <vmethod name='getRelatedRegionIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_region'/></pointer>
            </vmethod>

            <vmethod name='getRelatedLayerIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='world_underground_region'/></pointer>
            </vmethod>
            <vmethod name='getRelatedEntityIDs'>
                <pointer name='vec'><stl-vector type-name='int32_t' ref-target='historical_entity'/></pointer>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteID'>
                <int32_t name='site' ref-target='world_site'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToSiteStructure'>
                <int32_t name='site' ref-target='world_site'/>
                <int32_t name='structure' ref-target='abstract_building'/>
            </vmethod>

            -- 20

            <vmethod ret-type='bool' name='isRelatedToArtifactID'>
                <int32_t name='artifact' ref-target='artifact_record'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToRegionID'>
                <int32_t name='region' ref-target='world_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToLayerID'>
                <int32_t name='region' ref-target='world_underground_region'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToAgreementID' comment='broken; always returns false'>
                <int32_t name='agreement' ref-target='agreement'/>
            </vmethod>
            <vmethod ret-type='bool' name='isRelatedToEntityID'>
                <int32_t name='entity' ref-target='historical_entity'/>
            </vmethod>

            <vmethod ret-type='bool' comment='always returns false; seems to be related to breeds at the places where it is called, but is only implemented in events related to agreements, where it is identical to isRelatedToAgreementID'>
                <int32_t/>
            </vmethod>
            <vmethod name='getSentence'>
                <pointer type-name='stl-string' name='str'/> "In x, some event happened"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='getPhrase'>
                <pointer type-name='stl-string' name='str'/> "the happening of some event"
                <pointer type-name='history_event_context' name='context'/>
            </vmethod>
            <vmethod name='populateArtImage'>
                <pointer type-name='art_image' name='image'/>
            </vmethod>
            <vmethod ret-type='int32_t' comment='possibly something related to event importance; return values include 10, 20, 25, 50, 100, 120, 140'/>

            -- 30

            <vmethod ret-type='int32_t'/>
            <vmethod ret-type='bool' name='isChangedHistfigID'>
                <int32_t name='histfig' ref-target='historical_figure'/>
            </vmethod>
            <vmethod name='categorize' comment='inserts event into world_history.events_death if relevant'/>
            <vmethod name='uncategorize' comment='removes event from world_history.events_death if relevant'/>
            <vmethod name='generate_xml'>
                <pointer type-name='stl-fstream'/>
                <int32_t name='indent'/>
            </vmethod>

            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod comment='records event in historical_entity.unknown1b.diplomacy in both directions if applicable'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_war_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' type-name='merc_role_type' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_war_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='unk_1'/>
    </class-type>

    <class-type type-name='history_event_created_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='resident_civ_id' ref-target='historical_entity' since='v0.47.01'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='builder_hf' ref-target='historical_figure' since='v0.40.01'/>
    </class-type>

    <enum-type type-name='death_type' base-type='int16_t' comment='bay12: KillCause'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='OLD_AGE'/>
        <enum-item name='HUNGER'/>
        <enum-item name='THIRST'/>
        <enum-item name='SHOT'/>
        <enum-item name='BLEED'/>
        <enum-item name='DROWN'/>
        <enum-item name='SUFFOCATE'/>
        <enum-item name='STRUCK_DOWN'/>
        <enum-item name='SCUTTLE' comment='stuck wagons'/>
        <enum-item name='COLLISION'/>
        <enum-item name='MAGMA' comment='does not happen anymore?'/>
        <enum-item name='MAGMA_MIST' comment='does not happen anymore?'/>
        <enum-item name='DRAGONFIRE'/>
        <enum-item name='FIRE'/>
        <enum-item name='SCALD' comment='does not happen anymore?'/>
        <enum-item name='CAVEIN'/>
        <enum-item name='DRAWBRIDGE'/>
        <enum-item name='FALLING_ROCKS' comment='does not happen anymore?'/>
        <enum-item name='CHASM'/>
        <enum-item name='CAGE'/>
        <enum-item name='MURDER'/>
        <enum-item name='TRAP'/>
        <enum-item name='VANISH' comment='bogeyman'/>
        <enum-item name='QUIT' comment='Give in to starvation as adventurer'/>
        <enum-item name='ABANDON'/>
        <enum-item name='HEAT'/>
        <enum-item name='COLD'/>
        <enum-item name='SPIKE'/>
        <enum-item name='ENCASE_LAVA'/>
        <enum-item name='ENCASE_MAGMA'/>
        <enum-item name='ENCASE_ICE'/>
        <enum-item name='BEHEAD' comment='execution during worldgen'/>
        <enum-item name='CRUCIFY' comment='execution during worldgen'/>
        <enum-item name='BURY_ALIVE' comment='execution during worldgen'/>
        <enum-item name='DROWN_ALT' comment='execution during worldgen'/>
        <enum-item name='BURN_ALIVE' comment='execution during worldgen'/>
        <enum-item name='FEED_TO_BEASTS' comment='execution during worldgen'/>
        <enum-item name='HACK_TO_PIECES' comment='execution during worldgen'/>
        <enum-item name='LEAVE_OUT_IN_AIR' comment='execution during worldgen'/>
        <enum-item name='BOIL' comment='material state change'/>
        <enum-item name='MELT' comment='material state change'/>
        <enum-item name='CONDENSE' comment='material state change'/>
        <enum-item name='SOLIDIFY' comment='material state change'/>
        <enum-item name='INFECTION'/>
        <enum-item name='MEMORIALIZE' comment='put to rest'/>
        <enum-item name='SCARE'/>
        <enum-item name='DARKNESS' comment='died in the dark'/>
        <enum-item name='COLLAPSE' comment='used in 0.31 for undead'/>
        <enum-item name='DRAIN_BLOOD'/>
        <enum-item name='SLAUGHTER'/>
        <enum-item name='VEHICLE'/>
        <enum-item name='FALLING_OBJECT'/>
        <enum-item name='LEAPT_FROM_HEIGHT'/>
        <enum-item name='DROWN_ALT2'/>
        <enum-item name='EXECUTION_GENERIC'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_diedst' inherits-from='history_event'>
        <int32_t name='victim_hf' ref-target='historical_figure'/>

        <int32_t name='slayer_hf' ref-target='historical_figure'/>
        <int32_t name='slayer_race' ref-target='creature_raw'/>
        <int32_t name='slayer_caste' ref-target='caste_raw' aux-value='$$.slayer_race'/>

        <compound name='weapon' type-name='history_hit_item'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <enum name='death_cause' type-name='death_type' base-type='int16_t'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own'/>
        <int32_t name='appointer_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='promise_to_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='link_type' type-name='histfig_entity_link_type' base-type='int32_t'/>
        <int32_t name='position_id' comment='index into entity.positions.own'/>
    </class-type>

    <class-type type-name='history_event_entity_expels_hfst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='expelled' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contactst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='contacted' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_first_contact_failedst' inherits-from='history_event'>
        <int32_t name='contactor' ref-target='historical_entity'/>
        <int32_t name='rejector' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_concludedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='result' comment='range from -3 to +2'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_topicagreement_madest' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_acceptedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_war_peace_rejectedst' inherits-from='history_event'>
        <enum name='topic' type-name='meeting_topic' base-type='int16_t'/>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_diplomat_lostst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='involved' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreements_voidedst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_merchantst' inherits-from='history_event'>
        <int32_t name='source' ref-target='historical_entity'/>
        <int32_t name='destination' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2' index-enum='history_event_merchant_flags'/>
    </class-type>

    <enum-type type-name='history_event_merchant_flags'>
        <enum-item name='vanished' comment='opposite of communicate in caravan_state'/>
        <enum-item name='hardship'/>
        <enum-item name='seized'/>
        <enum-item name='offended'/>
        <enum-item name='missing_goods'/>
        <enum-item name='tribute'/>
    </enum-type>

    <class-type type-name='history_event_artifact_hiddenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_possessedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='feature_layer_id'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_artifact_createdst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='creator_unit_id' ref-target='unit' comment='the unit who created the artifact'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' comment='the figure who created the artifact'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='name_only'/>
        </bitfield>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_artifact_lostst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id'/>
        <int32_t name='subregion_id' ref-target='world_region'/>
        <int32_t name='unk_1' since='v0.47.01' init-value='-1' comment="probably feature_layer_id, based on other events, but haven't seen non -1"/>
    </class-type>

    <class-type type-name='history_event_artifact_foundst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='site_property_id' since='v0.47.02' init-value='-1'/>
        <int32_t name='unk_1' init-value='-1' since='v0.47.02' comment="probably subregion_id, based on other events, but haven't seen non -1"/>
        <int32_t name='unk_2' init-value='-1' since='v0.47.02' comment="probably feature_layer_id, based on other events, but haven't seen non -1"/>
    </class-type>

    <class-type type-name='history_event_artifact_recoveredst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_artifact_droppedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <df-flagarray name='flags2'/> 1=due to injury
    </class-type>

    <class-type type-name='history_event_reclaim_sitest' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='unretire'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_hf_destroyed_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_diedst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='abandoned'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_site_retiredst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='first_time'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_entity_createdst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='creator_hfid' ref-target='historical_figure' since='v0.47.02'/>
    </class-type>

    <enum-type type-name='entity_action_type'>
        <enum-item name='entity_primary_criminals'/>
        <enum-item name='entity_relocate'/>
    </enum-type>

    <class-type type-name='history_event_entity_actionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <enum name='action' type-name='entity_action_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_incorporatedst' inherits-from='history_event'>
        <int32_t name='migrant_entity' ref-target='historical_entity'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='leader_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='site' ref-target='world_site'/>
        <bool name='partial' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_created_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='builder_hf' ref-target='historical_figure'/>
        <bool name='rebuild' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_replaced_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='old_structure' ref-target='abstract_building'/>
        <int32_t name='new_structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_add_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_site_linkst' inherits-from='history_event'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <enum name='type' type-name='histfig_site_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_add_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <int32_t name='hf_target' ref-target='historical_figure'/>
        <enum name='type' type-name='histfig_hf_link_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_razed_buildingst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>


    <class-type type-name='history_event_masterpiece_createdst' inherits-from='history_event'>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='maker_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="skill_at_time" type-name='skill_rating' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_constructst' inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='building_type'/>
        <int16_t name='building_subtype'/>
        <int32_t name='building_custom'/>
        <int32_t name='unk_2'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_itemst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_dye_itemst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='unk_2'/>
        <int16_t name='dye_mat_type' ref-target='material' aux-value='$$.dye_mat_index'/>
        <int32_t name='dye_mat_index'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_item_improvementst' inherits-from='history_event_masterpiece_createdst'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='unk_2'/>
        <enum name='improvement_type' type-name='improvement_type' base-type='int16_t'/>
        <int32_t name='improvement_subtype'/>
        <int16_t name='imp_mat_type' ref-target='material' aux-value='$$.imp_mat_index'/>
        <int32_t name='imp_mat_index'/>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_foodst'
                inherits-from='history_event_masterpiece_createdst'>
        <int16_t name='item_subtype' refers-to='$global.world.raws.itemdefs.food[$]'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_engravingst'
                inherits-from='history_event_masterpiece_createdst'>
        <int32_t name='art_id' ref-target='art_image_chunk'/>
        <int16_t name='art_subid' ref-target='art_image' aux-value='$$.art_id'/>
    </class-type>

    <enum-type type-name='masterpiece_loss_type' base-type='int16_t'>
        <enum-item name='MELT'/>
        <enum-item name='MAGMA'/>
        <enum-item name='FORTIFICATION'/>
        <enum-item name='MINING'/>
        <enum-item name='CAVEIN'/>
        <enum-item name='VEGETATION'/>
    </enum-type>

    <class-type type-name='history_event_masterpiece_lostst' inherits-from='history_event'>
        <int32_t name='creation_event' ref-target='history_event'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name="method" type-name='masterpiece_loss_type' base-type='int16_t'/>
    </class-type>

    <class-type type-name='history_event_change_hf_statest' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum base-type='int16_t' type-name='whereabouts_type' name='state'/>
        <enum name='reason' type-name='history_event_reason' base-type='int32_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_jobst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum name='new_job' type-name='profession' base-type='int16_t'/>
        <enum name='old_job' type-name='profession' base-type='int16_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_war_field_battlest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_general_hf' ref-target='historical_figure'/>
        <int32_t name='defender_general_hf' ref-target='historical_figure'/>
        <int32_t name='attacker_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <int32_t name='defender_merc_enid' ref-target='historical_entity' since='v0.47.02'/>
        <bitfield name='merc_roles' type-name='merc_role_type' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_war_plundered_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='unk_1' init-value='-1' since='v0.47.01' comment="2=detected"/>
    </class-type>

    <class-type type-name='history_event_war_site_new_leaderst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='new_leaders' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_war_site_tribute_forcedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum base-type='int32_t' type-name='season' name='season'/>
        <bitfield name='tribute_flags' base-type='uint32_t'>
            <flag-bit name='bled_dry' comment='tribute was demanded, but not received'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_war_site_taken_overst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='new_site_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_site_surrenderedst' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_body_abusedst' inherits-from='history_event'>
        <stl-vector name='bodies' ref-target='historical_figure' type-name='int32_t'/>
        <int32_t name='victim_entity' ref-target='historical_entity'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
        <enum name='abuse_type' base-type='int16_t'>
            <enum-item name='Impaled'/>
            <enum-item name='Piled'/>
            <enum-item name='Flayed'/>
            <enum-item name='Hung'/>
            <enum-item name='Mutilated'/>
            <enum-item name='Animated'/>
        </enum>
        <compound name='abuse_data' is-union='true'>
            <compound name='Impaled'>
                <enum name='item_type' type-name='item_type' base-type='int16_t' comment='always WEAPON?'/>
                <int32_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index'/>
            </compound>
            <compound name='Piled'>
                <enum name='pile_type' base-type='int32_t'>
                    <enum-item name='GrislyMound'/>
                    <enum-item name='GrotesquePillar'/>
                    <enum-item name='GruesomeSculpture'/>
                </enum>
            </compound>
            <compound name='Flayed'>
                <int32_t name='structure' ref-target='abstract_building'/>
            </compound>
            <compound name='Hung'>
                <int32_t name='tree' ref-target='plant_raw'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index' comment='rope'/>
                <int32_t name='mat_index' comment='rope'/>
            </compound>
            <compound name='Animated'>
                <int32_t name='interaction' ref-target='interaction'/>
                <int32_t name='unk_1' init-value='0'/>
                <int32_t name='unk_2' init-value='-1'/>
                <int32_t name='unk_3' init-value='-1'/>
            </compound>
        </compound>
    </class-type>

    <class-type type-name='history_event_hist_figure_abductedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='snatcher' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <enum-type type-name='theft_method_type' base-type='int32_t'>
        <enum-item name='Theft'/>
        <enum-item name='Confiscated'/>
        <enum-item name='Looted'/>
        <enum-item name='Recovered'/>
    </enum-type>

    <class-type type-name='history_event_item_stolenst' inherits-from='history_event'>
        <enum name='item_type' type-name='item_type' base-type='int16_t'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        <int32_t name='item' ref-target='item'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='stash_site' ref-target='world_site' comment="location to which the thief brought the loot"/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <enum name='theft_method' type-name='theft_method_type' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_hf_razed_buildingst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_creature_devouredst' inherits-from='history_event'>
        <int32_t name='victim' ref-target='historical_figure'/>
        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='eater' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_woundedst' inherits-from='history_event'>
        <int32_t name='woundee' ref-target='historical_figure'/>
        <int32_t name='wounder' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='woundee_race' ref-target='creature_raw'/>
        <int16_t name='woundee_caste' ref-target='caste_raw' aux-value='$$.woundee_race'/>
        <int16_t name='body_part'/>
        <enum name='injury_type' base-type='int16_t'>
            <enum-item name='Smash'/>
            <enum-item name='Slash'/>
            <enum-item name='Stab'/>
            <enum-item name='Rip'/>
            <enum-item name='Burn'/>
        </enum>
        <bool name='part_lost'/>
        <bitfield name='flags2' since='v0.47.01'>
            <flag-bit name='torture'/>
        </bitfield>
    </class-type>

    <enum-type type-name='history_event_simple_battle_subtype' base-type='int16_t'>
        <enum-item name='SCUFFLE'/>
        <enum-item name='ATTACK'/>
        <enum-item name='SURPRISE'/>
        <enum-item name='AMBUSH'/>
        <enum-item name='HAPPEN_UPON'/>
        <enum-item name='CORNER'/>
        <enum-item name='CONFRONT'/>
        <enum-item name='LOSE_AFTER_RECEIVE_WOUND'/>
        <enum-item name='LOSE_AFTER_INFLICT_WOUND'/>
        <enum-item name='LOSE_AFTER_EXCHANGE_WOUND'/>
        <enum-item name='SUBDUED'/>
        <enum-item name='GOT_INTO_A_BRAWL'/>
    </enum-type>

    <enum-type type-name='artifact_claim_type' base-type='int32_t'>
        <enum-item name='Symbol'/>
        <enum-item name='Heirloom'/>
        <enum-item name='Treasure'/>
        <enum-item name='HolyRelic'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_battle_eventst' inherits-from='history_event'>
        <stl-vector name='group1' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='group2' type-name='int32_t' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <enum base-type='int16_t' name='subtype' type-name='history_event_simple_battle_subtype'/>
    </class-type>

    <class-type type-name='history_event_created_world_constructionst' inherits-from='history_event'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='construction'/>
        <int32_t name='master_construction'/>
        <int32_t name='site1' ref-target='world_site'/>
        <int32_t name='site2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reunionst' inherits-from='history_event'>
        <stl-vector name='missing' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='reunited_with' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='assistant' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reach_summitst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_travelst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum name='reason' base-type='int32_t'>
            <enum-item name='Journey' comment='made a journey to'/>
            <enum-item name='Return' comment='returned to'/>
            <enum-item name='Escape' comment='escaped from'/>
        </enum>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_new_petst' inherits-from='history_event'>
        <stl-vector name='group' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='pets' type-name='int16_t' ref-target='creature_raw'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>

        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_assume_identityst' inherits-from='history_event'>
        <int32_t name='trickster' ref-target='historical_figure'/>
        <int32_t name='identity' ref-target='identity'/>
        <int32_t name='target' ref-target='historical_entity'/>
    </class-type>

    <enum-type type-name='position_creation_reason_type' base-type='int16_t'>
        <enum-item name='force_of_argument'/>
        <enum-item name='threat_of_violence'/>
        <enum-item name='collaboration'/>
        <enum-item name='wave_of_popular_support'/>
        <enum-item name='as_a_matter_of_course'/>
    </enum-type>

    <class-type type-name='history_event_create_entity_positionst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='position'/> historical_entity.position
        <enum name='reason' type-name='position_creation_reason_type' base-type='int16_t'/>
    </class-type>

    <class-type type-name='history_event_change_creature_typest' inherits-from='history_event'>
        <int32_t name='changee' ref-target='historical_figure'/>
        <int32_t name='changer' ref-target='historical_figure'/>
        <int32_t name='old_race' ref-target='creature_raw'/>
        <int32_t name='old_caste' ref-target='caste_raw' aux-value='$$.race_from'/>
        <int32_t name='new_race' ref-target='creature_raw'/>
        <int32_t name='new_caste' ref-target='caste_raw' aux-value='$$.race_to'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_revivedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <enum base-type='int16_t' name='ghost_type' type-name='ghost_type'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='again'/>
        </bitfield>
        <int32_t name='actor_hfid' ref-target='historical_figure' since='v0.47.02'/>
        <int32_t name='interaction' ref-target='interaction' since='v0.47.02'/>
        <int32_t name='unk_1' init-value='0' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_learns_secretst' inherits-from='history_event'>
        <int32_t name='student' ref-target='historical_figure'/>
        <int32_t name='teacher' ref-target='historical_figure'/>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='unk_1'/>
    </class-type>

    <enum-type type-name='histfig_body_state' base-type='int8_t'>
        <enum-item name='Active'/>
        <enum-item name='BuriedAtSite'/>
        <enum-item name='UnburiedAtBattlefield'/>
        <enum-item name='UnburiedAtSubregion'/>
        <enum-item name='UnburiedAtFeatureLayer'/>
        <enum-item name='EntombedAtSite'/>
        <enum-item name='UnburiedAtSite'/>
    </enum-type>

    <class-type type-name='history_event_change_hf_body_statest' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='body_state' type-name='histfig_body_state' base-type='int8_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_buildingst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'>
            <enum-item name='Profane'/>
            <enum-item name='Disturb'/>
            <enum-item name='PrayedInside'/>
        </enum>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_does_interactionst' inherits-from='history_event'>
        <int32_t name='doer' ref-target='historical_figure'/>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='interaction' ref-target='interaction'/>
        <int32_t name='source' ref-target='interaction_source' aux-value='$$.interaction'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hf_confrontedst' inherits-from='history_event'>
        <int32_t name='target' ref-target='historical_figure'/>
        <int32_t name='accuser' ref-target='historical_figure'/>
        <stl-vector name='reasons' type-name='int32_t' comment="0 = ageless, 1 = murder"/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_entity_lawst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <bitfield name='add_flags' base-type='uint32_t'>
            <flag-bit name='harsh'/>
        </bitfield>
        <bitfield name='remove_flags' base-type='uint32_t'>
            <flag-bit name='harsh'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_hf_gains_secret_goalst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure' comment='bay12: hist_figure_id'/>
        <enum name='goal' type-name='goal_type' base-type='int32_t' comment='bay12: PersonalityGoal personality_goal'/>
        <enum name='thought' type-name='unit_thought_type' since='v0.47.02' init-value='None' comment='bay12: Circumstance'/>
        <int32_t name='target_hf' since='v0.47.02' init-value='-1' ref-target='historical_figure' comment='bay12: circumstance_id'/>
        <enum name='reason' type-name='history_event_reason' base-type='int32_t' since='v0.47.02'/>
        <enum name='value' type-name='value_type' since='v0.47.02' init-value='NONE' comment='bay12: reason_id'/>
    </class-type>

    <class-type type-name='history_event_artifact_storedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='building' comment="Guess. the values seen are low numbers. Legends doesn't provide any additional info"/>
    </class-type>

    <class-type type-name='history_event_agreement_formedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <bool name='delegated' since='v0.47.02'/>
    </class-type>

    <enum-type type-name='site_dispute_type'>
        <enum-item name='Territory'/>
        <enum-item name='WaterRights'/>
        <enum-item name='GrazingRights'/>
        <enum-item name='FishingRights'/>
        <enum-item name='RightsOfWay'/>
        <enum-item name='LivestockOwnership'/>
    </enum-type>

    <class-type type-name='history_event_site_disputest' inherits-from='history_event'>
        <enum name='dispute_type' type-name='site_dispute_type' base-type='int32_t'/>
        <int32_t name='entity_1' ref-target='historical_entity'/>
        <int32_t name='entity_2' ref-target='historical_entity'/>
        <int32_t name='site_1' ref-target='world_site'/>
        <int32_t name='site_2' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_agreement_concludedst' inherits-from='history_event'>
        <int32_t name='agreement_id' ref-target='agreement'/>
        <int32_t name='subject_id'/>
        <enum name='reason' type-name='history_event_reason' base-type='int32_t'/>
        <int32_t name='concluder_hf' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_insurrection_startedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='insurrection_outcome'>
        <enum-item name='LeadershipOverthrown'/>
        <enum-item name='PopulationGone'/>
        <enum-item name='Crushed'/>
    </enum-type>

    <class-type type-name='history_event_insurrection_endedst' inherits-from='history_event'>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <enum name='outcome' type-name='insurrection_outcome' base-type='int32_t'/>
    </class-type>

    <class-type type-name='history_event_hf_attacked_sitest' inherits-from='history_event'>
        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_performancest' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_competitionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <stl-vector name='competitor_hf' ref-target='historical_figure' type-name='int32_t'/>
        <stl-vector name='winner_hf' ref-target='historical_figure' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_processionst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_ceremonyst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='schedule'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_knowledge_discoveredst' inherits-from='history_event'>
        <int32_t name='hf' ref-target='historical_figure'/>
        <compound name='knowledge' type-name='knowledge_scholar_category_flag'/>
        <int8_t name='first'/>
    </class-type>

    <class-type type-name='history_event_artifact_transformedst' inherits-from='history_event'>
        <int32_t name='new_artifact' ref-target='artifact_record'/>
        <stl-vector name='old_artifact' ref-target='artifact_record' type-name='int32_t'/>
        <int32_t name='unit' ref-target='unit'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_artifact_destroyedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='destroyer_hf' ref-target='historical_figure'/>
        <int32_t name='destroyer_civ' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_relationship_deniedst' inherits-from='history_event'>
        <int32_t name='seeker_hf' ref-target='historical_figure'/>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <enum name='type' type-name='unit_relationship_type' base-type='int32_t'/>
        <enum name='reason' type-name='history_event_reason' base-type='int32_t'/>
        <int32_t name='reason_id' ref-target='historical_figure' comment='the historical figure that the reason describes'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_regionpop_incorporated_into_entityst' inherits-from='history_event'>
        <int32_t name='pop_race' ref-target='creature_raw'/>
        <int32_t name='number_moved'/>
        <int32_t name='pop_region' ref-target='world_region'/>
        <int32_t name='pop_layer' ref-target='world_underground_region'/>
        <int32_t name='join_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_poetic_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='poetic_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_musical_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='musical_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_dance_form_createdst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='form' ref-target='dance_form'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_written_content_composedst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='content' ref-target='written_content'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_change_hf_moodst' inherits-from='history_event'>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='mood' type-name='mood_type' base-type='int16_t'/>
        <enum name='reason' type-name='history_event_reason' base-type='int32_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_artifact_claim_formedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='position_profile'/>
        <enum name='claim_type' type-name='artifact_claim_type' base-type='int32_t'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_artifact_givenst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='giver_hf' ref-target='historical_figure'/>
        <int32_t name='giver_entity' ref-target='historical_entity'/>
        <int32_t name='receiver_hf' ref-target='historical_figure'/>
        <int32_t name='receiver_entity' ref-target='historical_entity'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <bool name='inherited' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_artifactst' inherits-from='history_event'>
        <enum name='action' base-type='int32_t'>
            <enum-item name='View'/>
            <enum-item name='AskAbout'/>
        </enum>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
    </class-type>

    <class-type type-name='history_event_hf_recruited_unit_type_for_entityst' inherits-from='history_event'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='histfig' ref-target='historical_figure'/>
        <enum name='profession' type-name='profession' base-type='int16_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_reputation_relationshipst' inherits-from='history_event'>
        <int32_t name='histfig1' ref-target='historical_figure'/>
        <int32_t name='identity1' ref-target='identity'/>
        <int32_t name='histfig2' ref-target='historical_figure'/>
        <int32_t name='identity2' ref-target='identity'/>
        <enum name='rep1' type-name='reputation_type' base-type='int32_t'/>
        <enum name='rep2' type-name='reputation_type' base-type='int32_t'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_artifact_copiedst' inherits-from='history_event'>
        <int32_t name='artifact' ref-target='artifact_record'/>
        <int32_t name='entity_dest' ref-target='historical_entity'/>
        <int32_t name='entity_src' ref-target='historical_entity'/>
        <int32_t name='site_dest' ref-target='world_site'/>
        <int32_t name='site_src' ref-target='world_site'/>
        <int32_t name='structure_dest' ref-target='abstract_building'/>
        <int32_t name='structure_src' ref-target='abstract_building'/>
        <bitfield name='flags2' base-type='uint32_t'>
            <flag-bit name='from_original'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_sneak_into_sitest' inherits-from='history_event'>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_spotted_leaving_sitest' inherits-from='history_event'>
        <int32_t name='spotter_hf' ref-target='historical_figure'/>
        <int32_t name='leaver_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_searched_sitest' inherits-from='history_event'>
        <int32_t name='searcher_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='result' comment='0 = found nothing'/>
    </class-type>

    <class-type type-name='history_event_hf_freedst' inherits-from='history_event'>
        <int32_t name='freeing_civ' ref-target='historical_entity'/>
        <int32_t name='freeing_hf' ref-target='historical_figure'/>
        <int32_t name='holding_civ' ref-target='historical_entity'/>
        <int32_t name='site_civ' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <stl-vector name='rescued_hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <enum-type type-name='simple_action_type' base-type='int32_t'>
        <enum-item name='carouse'/>
        <enum-item name='purchase_well_crafted_equipment'/>
        <enum-item name='purchase_finely_crafted_equipment'/>
        <enum-item name='purchase_superior_equipment'/>
        <enum-item name='purchase_exceptional_equipment'/>
        <enum-item name='purchase_masterwork_equipment'/>
        <enum-item name='performe_horrible_experiments'/>
    </enum-type>

    <class-type type-name='history_event_hist_figure_simple_actionst' inherits-from='history_event'>
        <stl-vector name='group_hfs' type-name='int32_t' ref-target='historical_figure'/>
        <enum name='type' type-name='simple_action_type'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_rampaged_in_sitest' inherits-from='history_event'>
        <int32_t name='rampage_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_fled_sitest' inherits-from='history_event'>
        <int32_t name='fled_civ_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='tactical_situation'>
        <enum-item name='attacker_strongly_favored'/>
        <enum-item name='attacker_favored'/>
        <enum-item name='attacker_slightly_favored'/>
        <enum-item name='defender_strongly_favored'/>
        <enum-item name='defender_favored'/>
        <enum-item name='defender_slightly_favored'/>
        <enum-item name='neither_favored'/>
    </enum-type>

    <class-type type-name='history_event_tactical_situationst' inherits-from='history_event'>
        <int32_t name='a_tactician_hfid' ref-target='historical_figure'/>
        <int32_t name='d_tactician_hfid' ref-target='historical_figure'/>

        <int32_t name='a_tactics_roll'/>
        <int32_t name='d_tactics_roll'/>

        <enum name='situation' base-type='int32_t' type-name='tactical_situation'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>

        <bitfield name='tactics_flags' base-type='uint32_t'>
            <flag-bit name='start'/>
        </bitfield>
    </class-type>

    <class-type type-name='history_event_squad_vs_squadst' inherits-from='history_event'>
        <int32_t name='a_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='a_leadership_roll'/>
        <stl-vector name='a_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='a_squad_id'/>
        <int32_t name='a_race' ref-target='creature_raw'/>
        <int32_t name='a_interaction'/>
        <int32_t name='a_effect'/>
        <int32_t name='a_number'/>
        <int32_t name='a_slain'/>

        <int32_t name='d_leader_hfid' ref-target='historical_figure'/>
        <int32_t name='d_leadership_roll'/>
        <stl-vector name='d_hfid' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='d_squad_id'/>
        <int32_t name='d_race' ref-target='creature_raw'/>
        <int32_t name='d_interaction'/>
        <int32_t name='d_effect'/>
        <int32_t name='d_number'/>
        <int32_t name='d_slain'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='structure' ref-target='abstract_building'/>
        <int32_t name='subregion' ref-target='world_region'/>
        <int32_t name='feature_layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_tradest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity' comment='the guild to which the figure belongs?'/>
      <int32_t name='source_site' ref-target='world_site'/>
      <int32_t name='dest_site' ref-target='world_site'/>
      <int32_t name='production_zone'/>
      <int32_t name='allotment'/>
      <int32_t name='allotment_index'/>
      <int32_t name='account_shift'/>
    </class-type>

    <class-type type-name='history_event_add_entity_site_profile_flagst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
        <bitfield name='added_flags' type-name='entity_site_link_flags'/>
    </class-type>

    <class-type type-name='history_event_gamblest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure'/>
      <int32_t name='account_before'/>
      <int32_t name='account_after'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_honorst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity_id' ref-target='historical_entity'/>
      <int32_t name='hfid' ref-target='historical_figure'/>
      <int32_t name='honor_id' comment='index into historical_entity.honors'/>
    </class-type>

    <class-type type-name='history_event_entity_dissolvedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
        <compound name='reason' type-name='history_event_reason_info'/>
    </class-type>

    <class-type type-name='history_event_entity_equipment_purchasest' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='entity' ref-target='historical_entity'/>
        <enum name='quality' type-name='item_quality' base-type='int32_t'/>
        <stl-vector name='hfs' type-name='int32_t' ref-target='historical_figure'/>
    </class-type>

    <class-type type-name='history_event_modified_buildingst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='structure' comment='index into world_site.buildings'/>
      <int32_t name='hf' ref-target='historical_figure'/>
      <int32_t name='unk_1'/> always 12?
      <bitfield name='modification' base-type='uint32_t'>
        <flag-bit name='dungeon'/>
        <flag-bit name='fortifications'/>
        <flag-bit name='courtyard'/>
        <flag-bit name='feast_hall'/>
      </bitfield>
    </class-type>

    <class-type type-name='history_event_building_profile_acquiredst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='building_profile'/>
      <int32_t name='acquirer_hf' ref-target='historical_figure'/>
      <int32_t name='acquirer_entity' ref-target='historical_entity'/>
      <int32_t name='acquisition_type' comment="0: purchased, 1: inherited, 2: rebuilt. Doesn't match. Seen purchased_unowned, inherited, and rebuilt_ruined together when value = 0"/>
      <int32_t name='previous_owner_hf' ref-target='historical_figure'/>
      <int32_t name='unk_1' init-value='-1'/>
    </class-type>

    <class-type type-name='history_event_hf_preachst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='speaker_hf' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
      <enum base-type='int16_t' type-name='reputation_type' name='topic'/>
      <int32_t name='entity1' ref-target='historical_entity'/>
      <int32_t name='entity2' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_entity_persecutedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='persecuting_hf' ref-target='historical_figure'/>
      <int32_t name='persecuting_entity' ref-target='historical_entity'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
      <stl-vector name='property_confiscated_from_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='destroyed_structures' type-name='int32_t'/>
      <int32_t name='shrines_destroyed'/>
      <stl-vector name='expelled_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <stl-vector name='expelled_populations' type-name='int32_t'/>
      <stl-vector name='expelled_races' type-name='int32_t'/>
      <stl-vector name='expelled_counts' type-name='int32_t'/>
    </class-type>

    <class-type type-name='history_event_entity_breach_feature_layerst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='site_entity' ref-target='historical_entity'/>
      <int32_t name='civ_entity' ref-target='historical_entity'/>
      <int32_t name='layer' ref-target='world_underground_region'/>
    </class-type>

    <class-type type-name='history_event_entity_alliance_formedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='entity' ref-target='historical_entity'/>
      <stl-vector name='joining_entities' type-name='int32_t' ref-target='historical_entity'/>
    </class-type>

    <class-type type-name='history_event_hf_ransomedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='ransomed_hf' ref-target='historical_figure'/>
      <int32_t name='ransomer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hf_enslavedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='enslaved_hf' ref-target='historical_figure'/>
      <int32_t name='seller_hf' ref-target='historical_figure'/>
      <int32_t name='payer_entity' ref-target='historical_entity'/>
      <int32_t name='moved_to_site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_sabotagest' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='saboteur_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_entity' ref-target='historical_entity'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_entity_overthrownst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='overthrown_hf' ref-target='historical_figure'/>
      <int32_t name='position_taker_hf' ref-target='historical_figure'/>
      <int32_t name='instigator_hf' ref-target='historical_figure'/>
      <int32_t name='entity' ref-target='historical_entity'/>
      <int32_t name='position_profile_id'/>
      <stl-vector name='conspirator_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hfs_formed_intrigue_relationshipst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity'/>
      <int32_t name='target_role' ref-target='plot_role_type'/>
      <int32_t name='corruptor_role' ref-target='plot_role_type'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_failed_intrigue_corruptionst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='corruptor_hf' ref-target='historical_figure'/>
      <int32_t name='corruptor_identity'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='target_identity'/>
      <int32_t name='site' ref-target='world_site'/>
      <int32_t name='region' ref-target='world_region' since='v0.47.02'/>
      <int32_t name='layer' ref-target='world_underground_region' since='v0.47.02'/>
    </class-type>

    <class-type type-name='history_event_hf_convictedst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='convicted_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_entity' ref-target='historical_entity'/>
      <int32_t name='recognized_by_hf' ref-target='historical_figure'/>
      <stl-vector name='implicated_hfs' type-name='int32_t' ref-target='historical_figure'/>
      <int32_t name='corrupt_hf' ref-target='historical_figure'/>
      <int32_t name='behest_of_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='surveillance_hf' ref-target='historical_figure'/>
      <int32_t name='co_conspirator_hf' ref-target='historical_figure'/>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='crime' comment='references crime::T_mode'/>
      <int32_t name='hammerstrokes'/>
      <int32_t name='prison_months'/>
      <bitfield name='punishment_flags' base-type='uint32_t'>
        <flag-bit name='beaten'/>
        <flag-bit name='exiled'/>
        <flag-bit name='death_sentence' comment='sentenced to death'/>
        <flag-bit name='no_prison_available' comment='would have been imprisoned but for lack of accommodations'/>
      </bitfield>
      <bitfield name='plot_flags' base-type='uint32_t'>
        <flag-bit name='wrongful' comment='wrongful conviction'/>
        <flag-bit name='plot_surveillance' comment='due to ongoing surveillance as the plot unfolded'/>
        <flag-bit name='target_surveillance' comment='due to ongoing surveillance on the target'/>
        <flag-bit name='implicated_others' comment='implicated others during interrogation'/>
        <flag-bit name='co_conspirator_surveillance' comment='due to ongoing surveillance on a coconspirator'/>
        <flag-bit name='go_between' comment='convicted as go-between'/>
        <flag-bit name='revealed_nothing' comment='revealed nothing during interrogation'/>
      </bitfield>
    </class-type>

    <class-type type-name='history_event_failed_frame_attemptst' inherits-from='history_event' since='v0.47.01'>
      <int32_t name='target_hf' ref-target='historical_figure'/>
      <int32_t name='convicter_entity' ref-target='historical_entity'/>
      <int32_t name='plotter_hf' ref-target='historical_figure'/>
      <int32_t name='fooled_hf' ref-target='historical_figure'/>
      <int32_t name='framer_hf' ref-target='historical_figure'/>
      <int32_t name='crime' comment='references crime::T_mode'/>
    </class-type>

    <class-type type-name='history_event_hf_interrogatedst' inherits-from='history_event' since='v0.47.01'>
        <int32_t name='target_hf' ref-target='historical_figure'/>
        <int32_t name='arresting_entity' ref-target='historical_entity'/>
        <int32_t name='interrogator_hf' ref-target='historical_figure'/>
        <stl-vector name='implicated_hfs' ref-target='historical_figure' type-name='int32_t' />
        <bitfield name='interrogation_flags' base-type='uint32_t'>
            <flag-bit name='recognized'/>
            <flag-bit name='refused_to_reveal'/>
        </bitfield>
    </class-type>

    <enum-type type-name='history_event_collection_type'>
        <enum-item name='WAR'/>
        <enum-item name='BATTLE'/>
        <enum-item name='DUEL'/>
        <enum-item name='SITE_CONQUERED'/>
        <enum-item name='ABDUCTION'/>
        <enum-item name='THEFT'/>
        <enum-item name='BEAST_ATTACK'/>
        <enum-item name='JOURNEY'/>
        <enum-item name='INSURRECTION'/>
        <enum-item name='OCCASION'/>
        <enum-item name='PERFORMANCE'/>
        <enum-item name='COMPETITION'/>
        <enum-item name='PROCESSION'/>
        <enum-item name='CEREMONY'/>
        <enum-item name='PURGE'/>
        <enum-item name='RAID'/>
        <enum-item name='PERSECUTION'/>
        <enum-item name='ENTITY_OVERTHROWN'/>
    </enum-type>

    <class-type type-name='history_event_collection' original-name='history_event_collectionst'
                instance-vector='$global.world.history.event_collections.all' key-field='id'>
        <stl-vector name='events' type-name='int32_t' ref-target='history_event'/>
        <stl-vector name='collections' type-name='int32_t' ref-target='history_event_collection'/>
        <int32_t name='start_year'/>
        <int32_t name='end_year'/>
        <int32_t name='start_seconds'/>
        <int32_t name='end_seconds'/>
        <df-flagarray name='flags'/>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='history_event_collection_type' name='getType'/>
            <vmethod name='generate_xml'>
                <pointer type-name='stl-fstream'/>
                <int32_t name='indent'/>
            </vmethod>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod name='categorize'/>

            <vmethod name='uncategorize'/>
            <vmethod name='getName'><pointer name='string' type-name='stl-string'/></vmethod>
            <vmethod name='getRegionCoords'><pointer name='x' type-name='int16_t'/><pointer name='y' type-name='int16_t'/></vmethod>
            <vmethod name='getParent' ret-type='int32_t'/>
            <vmethod ret-type='int32_t'/>

            -- 10

            <vmethod name='isBetweenEntities' ret-type='int32_t'><int32_t name='defender_civ'/><int32_t name='attacker_civ'/></vmethod>
            <vmethod name='updateEndTime'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_collection_warst' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='unk_1' type-name='int32_t' ref-target='historical_entity' comment="when length 2 attacker/defender entity. When longer seems to contain unrelated civs at varying locations"/>
        <compound name='unk'>
            <stl-vector name='unk_1' type-name='int16_t' init-value='0' comment="These 5 vectors are the same length,0 or 1. Only 0 seen"/>
            <stl-vector name='attacker_entity_leader' type-name='int32_t' ref-target='historical_figure'/>
            <stl-vector name='unk_2' type-name='int32_t' init-value='-1' comment="25, 25, 46 seen. All on the first few (oldest) collections."/>
            <stl-vector name='unk_3' type-name='int32_t' init-value='-1' comment="only -1 seen"/>
            <stl-vector name='unk_4' type-name='int32_t' comment="-5,-6, -14 -15 seen"/>
            <int32_t name='unk_5' comment="same as previous vector single element or zero. Sum?"/>

            <stl-vector name='ethics_unk1' type-name='int16_t' comment="these three vectors are of the same length"/>
            <stl-vector name='disputed_ethics' type-name='int32_t' comment='can be ethic_type, or other values'/>
            <stl-vector name='ethics_unk3' type-name='int32_t' init-value='-1' comment="not seen other value"/>
            <stl-vector name='dispute_severities' type-name='int32_t'/>
            <int32_t name='accumulated_ethics_severity'/>

            <stl-vector name='event_unk' type-name='int16_t' comment="values 5 and 10 seen. These three vectors are the same length"/>
            <stl-vector name='negative_events' ref-target='history_event' type-name='int32_t' comment="Site dispute, war attack site, created site, and culled seen"/>
            <stl-vector name='event_severities' type-name='int32_t' comment="Site dispute:-9/-10, war attack site:-2/-4/-5, created site: -20, culled: -20 (guess failed settlement)"/>
            <int32_t name='accumulated_event_severity' comment="sum of previous vector values"/>
        </compound>
    </class-type>

    <class-type type-name='history_event_collection_battlest' inherits-from='history_event_collection'>
        <compound type-name='language_name' name='name'/>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='attacker_role' type-name='int32_t' comment="Tentatively 0: regular, 1/2 merc"/>
        <stl-vector name='defender_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='defender_role' type-name='int32_t' comment="same as for attacker role, i.e. 0-2, with 1/2 being mercs"/>
        <stl-vector name='noncombat_hf' type-name='int32_t' ref-target='historical_figure' comment="saw being beheaded, but that's only one checked"/>
        <bitfield name='merc_roles' type-name='merc_role_type'/>
        <int32_t name='attacker_mercs' ref-target='historical_entity'/>
        <int32_t name='defender_mercs' ref-target='historical_entity'/>
        <stl-vector name='attacker_merc_hfs' ref-target='historical_figure' type-name='int32_t'/>
        <stl-vector name='defender_merc_hfs' ref-target='historical_figure' type-name='int32_t'/>

        <stl-vector name='attacker_squad_entity_pop' type-name='int32_t' ref-target='entity_population'/>
        <stl-vector name='attacker_squad_counts' type-name='int32_t'/>
        <stl-vector name='attacker_squad_deaths' type-name='int32_t'/>
        <stl-vector name='attacker_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='attacker_squad_sites' type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='unk_3' type-name='int32_t' comment="probably a boolean, as only 0/1 seen"/>

        <stl-vector name='defender_squad_entity_pops' type-name='int32_t' ref-target='entity_population'/>
        <stl-vector name='defender_squad_counts' type-name='int32_t'/>
        <stl-vector name='defender_squad_deaths' type-name='int32_t'/>
        <stl-vector name='defender_squad_races' type-name='int32_t' ref-target='creature_raw'/>
        <stl-vector name='defender_squad_sites' type-name='int32_t' ref-target='world_site'/>
        <stl-vector name='unk_4' type-name='int32_t' comment="probably a boolean, as only 0/1 seen"/>
        <int16_t name='outcome' comment='0 = attacker won, 1 = defender won'/>
    </class-type>

    <class-type type-name='history_event_collection_duelst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_hf' ref-target='historical_figure'/>
        <int32_t name='defender_hf' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
        <int8_t name='unk_1' comment="probably boolean. Only 0/1 seen. Looks like winner, with all '1' examined showing defeat of defender, from unscathed to death, and '0' showing no result at all or death of attacker"/>
    </class-type>

    <class-type type-name='history_event_collection_site_conqueredst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='site' ref-target='world_site'/>

        <stl-vector name='attacker_civ' type-name='int32_t' ref-target='historical_entity'/>
        <stl-vector name='defender_civ' type-name='int32_t' ref-target='historical_entity'/>
        <int16_t name='unk_1' comment='uninitialized'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_abductionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>

        <stl-vector name='snatcher_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='victim_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='unk_1' type-name='int32_t'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_theftst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='thief_civ' ref-target='historical_entity'/>
        <int32_t name='victim_civ' ref-target='historical_entity'/>

        <stl-vector name='thief_hf' type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name='stolen_item_types'><enum base-type='int16_t' type-name='item_type'/></stl-vector>
        <stl-vector name='stolen_item_subtypes'><int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent._parent.stolen_item_types[$$._key] $)'/></stl-vector>
        <stl-vector name='stolen_mat_types'><int16_t ref-target='material' aux-value='$$._parent.stolen_mat_indices[$._key]'/></stl-vector>
        <stl-vector name='stolen_mat_indices' type-name='int32_t'/>
        <stl-vector name='stolen_item_ids' type-name='int32_t' ref-target='item'/>

        <stl-vector name='unk_1' type-name='int32_t'/> most likely the same format as above
        <stl-vector name='unk_2' type-name='int16_t'/>
        <stl-vector name='unk_3' type-name='int16_t'/>
        <stl-vector name='unk_4' type-name='int16_t'/>
        <stl-vector name='unk_5' type-name='int32_t'/>
        <stl-vector name='unk_6' type-name='int32_t'/>

        <stl-vector name='unk_7' type-name='int32_t'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_beast_attackst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>

        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector name='attacker_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_journeyst' inherits-from='history_event_collection'>
        <stl-vector name='traveler_hf' type-name='int32_t' ref-target='historical_figure'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_insurrectionst' inherits-from='history_event_collection'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='target_civ' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_occasionst' inherits-from='history_event_collection'>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='occasion'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_performancest' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='unk_1' comment="0-11 seen"/>
        <int32_t name='unk_2' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_competitionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='unk_1' comment="0-13 seen"/>
        <int32_t name='unk_2' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_processionst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='unk_1' comment="0-14 seen"/>
        <int32_t name='unk_2' comment="0-9 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_ceremonyst' inherits-from='history_event_collection'>
        <int32_t name='parent_collection' ref-target='history_event_collection' comment="all seen were occasions"/>
        <int32_t name='civ' ref-target='historical_entity'/>
        <int32_t name='unk_1' comment="0-14 seen"/>
        <int32_t name='unk_2' comment="0-10 seen"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_purgest' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='site' ref-target='world_site'/>
        <stl-string name='adjective'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_raidst' inherits-from='history_event_collection' since='v0.42.04'>
        <int32_t name='parent_collection' ref-target='history_event_collection'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region'/>
        <int32_t name='site' ref-target='world_site'/>
        <compound name='region_pos' type-name='coord2d'/>
        <int32_t name='attacker_civ' ref-target='historical_entity'/>
        <int32_t name='defender_civ' ref-target='historical_entity'/>
        <stl-vector name='thieves' type-name='int32_t' ref-target='historical_figure' comment="all of the ones examined were mentioned stealing things during the same raid on the site"/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_persecutionst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <class-type type-name='history_event_collection_entity_overthrownst' inherits-from='history_event_collection' since='v0.47.01'>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int32_t name='ordinal'/>
    </class-type>

    <enum-type type-name='era_type' base-type='int16_t'>
        <enum-item name='ThreePowers'/>
        <enum-item name='TwoPowers'/>
        <enum-item name='OnePower'/>
        <enum-item name='Myth'/>
        <enum-item name='Legends'/>
        <enum-item name='Twilight'/>
        <enum-item name='FairyTales'/>
        <enum-item name='Race'/>
        <enum-item name='Heroes'/>
        <enum-item name='Golden'/>
        <enum-item name='Death'/>
        <enum-item name='Civilization'/>
        <enum-item name='Emptiness'/>
    </enum-type>

    <struct-type type-name='history_era'>
        <int32_t name='year'/>
        <compound name='title'>
            <enum type-name='era_type' name='type'/>
            <int32_t name='histfig_1' ref-target='historical_figure'/>
            <int32_t name='histfig_2' ref-target='historical_figure'/>
            <int32_t name='ordinal'/>
            <stl-string name='name'/>
            <int32_t name='percent' comment='either percentage of single race or percentage of mundane'/>
        </compound>
        <compound name='details'>
            <int32_t name='living_powers'/>
            <int32_t name='living_megabeasts'/>
            <int32_t name='living_semimegabeasts'/>
            <int32_t name='power_hf1' ref-target='historical_figure'/>
            <int32_t name='power_hf2' ref-target='historical_figure'/>
            <int32_t name='power_hf3' ref-target='historical_figure'/>
            <stl-vector name='civilized_races' type-name='int32_t' index-refers-to='(find-creature $)'/>
            <int32_t name='civilized_total'/>
            <int32_t name='civilized_mundane'/>
        </compound>
    </struct-type>

    <struct-type type-name='relationship_event' original-name='history_relationship_event_blockst'>
        <static-array name='event' type-name='int32_t' count='1024' comment="not included in the main list"/>
        <static-array name='relationship' type-name='vague_relationship_type' count='1024'/>
        <static-array name='source_hf' type-name='int32_t' count='1024' ref-target='historical_figure' comment='bay12: hfid_1'/>
        <static-array name='target_hf' type-name='int32_t' count='1024' ref-target='historical_figure' comment='bay12: hfid_2'/>
        <static-array name='year' type-name='int32_t' count='1024'/>
        <int32_t name='next_element' comment="bay12: number; 1024 for all vectors except the last one"/>
        <int32_t name='start_year' comment="first year of the events contained in the element"/>
    </struct-type>

    <struct-type type-name='relationship_event_supplement' original-name='history_relationship_eventst'>
        <int32_t name='event' comment="bay12: global_id; can be found in the relationship_events"/>
        <int32_t name='occasion_type' comment="bay12: Circumstance circumstance; only 245/246 seen. 245:scholarly lecture, 246: performance"/>
        <int32_t name='site' ref-target='world_site' comment='bay12: circumstance_id'/>
        <enum name='reason' type-name='history_event_reason' comment="only 81 seen"/>
        <enum name='profession' type-name='profession' comment='bay12: reason_id'/>
    </struct-type>

    <struct-type type-name='world_history' original-name='historyst'>
        dtor 8532fa0

        <stl-vector name='events' pointer-type='history_event'/>
        <stl-vector name='events_death' pointer-type='history_event'/>

        <stl-vector name='relationship_events' pointer-type='relationship_event' since='v0.47.01'/>
        <stl-vector name='relationship_event_supplements' pointer-type='relationship_event_supplement' since='v0.47.01' comment="supplemental info for artistic/scholar buddies"/>

        <stl-vector name='figures' pointer-type='historical_figure'/>

        <compound name='event_collections'>
            <stl-vector name='all' pointer-type='history_event_collection'/>
            <static-array name='other' count='18' index-enum='history_event_collection_type'>
                <stl-vector pointer-type='history_event_collection'/>
            </static-array>
        </compound>

        <stl-vector name='eras' pointer-type='history_era'/>
        <stl-vector name='discovered_art_image_id' type-name='int32_t' ref-target='art_image_chunk'/>
        <stl-vector name='discovered_art_image_subid' type-name='int16_t' ref-target='art_image' aux-value='$$.discovered_art_image_id[$._key]'/>

        <int32_t name='total_art'/> some value during worldgen, and at the end equals to the number of entities plus that value
        <int32_t name='total_powers' comment='also includes megabeasts'/>
        <int32_t name='total_megabeasts'/>
        <int32_t name='total_semimegabeasts'/>
        <stl-vector name='secret_heid'/>
        <uint32_t name='first_philosophy_flag'/>
        <uint32_t name='first_philosophy_flag2'/>
        <uint32_t name='first_mathematics_flag'/>
        <uint32_t name='first_mathematics_flag2'/>
        <uint32_t name='first_history_flag'/>
        <uint32_t name='first_astronomy_flag'/>
        <uint32_t name='first_naturalist_flag'/>
        <uint32_t name='first_chemistry_flag'/>
        <uint32_t name='first_geography_flag'/>
        <uint32_t name='first_medicine_flag'/>
        <uint32_t name='first_medicine_flag2'/>
        <uint32_t name='first_medicine_flag3'/>
        <uint32_t name='first_engineering_flag'/>
        <uint32_t name='first_engineering_flag2'/>

        <stl-vector name='intrigues' since='v0.47.01' pointer-type='intrigue' comment='bay12: history_support_event'/>
        <stl-vector name='live_megabeasts' pointer-type='historical_figure'/>
        <stl-vector name='live_semimegabeasts' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_3' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_4' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_5' pointer-type='historical_figure'/>
        <stl-vector name='unk_1' pointer-type='historical_figure' since='v0.47.01'/>

        11 - necromancers
        <static-array name='unk_v40_1' since='v0.40.01' count='15'>
            <stl-vector pointer-type='historical_figure'/>
        </static-array>

        <stl-vector name='unk_histfig_6' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_7' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_8' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_9' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_10' since='v0.42.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_11' since='v0.40.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_12' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_histfig_13' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_3' since='v0.44.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_4' since='v0.47.01'/>
        <stl-vector name='unk_5' since='v0.47.01' pointer-type='historical_figure'/>
        <stl-vector name='unk_6' since='v0.47.01'/>
        <stl-vector type-name='int32_t' name='unk_7' since='v0.47.01'/>
        <int8_t name='unk_8'/>
        <stl-vector name='active_event_collections' pointer-type='history_event_collection'/>
        <int8_t name='unk_10'/>
        <int32_t name='unk_11'/>
        <int32_t name='unk_12'/>
        <pointer name='active_mission' type-name='mission_report'/>
    </struct-type>

    <struct-type type-name='intrigue' instance-vector='$global.world.history.intrigues' key-field='event_id' original-name='history_support_eventst'>
        <int32_t name='event_id' ref-target='history_event' comment="NOTE: can be culled. Seen: failed_intrigue_corruption, event_agreement_formed, hfs_formed_intrigue_relationship"/>
        <pointer name='corruption' type-name='intrigue_corruption' comment="Mutually exclusive with circumstance. Exactly one is present. Presumably 'bring into network' action doesn't provide membership"/>
        <compound name='reason' type-name='history_event_reason_info'/>
        <compound name='circumstance' type-name='history_event_circumstance_info'/>
    </struct-type>

    <struct-type type-name='intrigue_corruption'>
        <enum name='crime' type-name='evidence_type'/>
        <int32_t name='corruptor_id' ref-target='historical_figure'/>
        <int32_t name='target_id' ref-target='historical_figure'/>
        <enum name='target_relationship' type-name='vague_relationship_type' comment="set if and only if action = BringIntoNetwork"/>
        <int32_t name='target_relationship_entity_id' ref-target='historical_entity' comment="Only set when relation = CommonEntity. Common Religion/PerformanceTroupe/MerchantCompany/Guild seen."/>
        <int32_t name='lurer_id' ref-target='historical_figure' comment="Can be set with action = CorruptInPlace, not otherwise"/>

        <enum name='manipulation_type'>
            <enum-item name='Threat'/>
            <enum-item name='Flattery'/>
            <enum-item name='Authority'/>
            <enum-item name='BlackmailForEmbezzlement'/>
            <enum-item name='Bribery'/>
            <enum-item name='Sympathy'/>
            <enum-item name='Revenge'/>
            <enum-item name='Immortality'/>
        </enum>
        <int32_t name='unk_4' comment="-16 to 315 seen"/>
        <int32_t name='unk_5' comment="-141 to 351 seen"/>

        <enum name='manipulated_facet' type-name='personality_facet_type'/>
        <int32_t name='facet_rating'/>
        <int32_t name='facet_roll'/>

        <enum name='manipulated_value' type-name='value_type'/>
        <int32_t name='value_rating'/>
        <int32_t name='value_roll'/>

        <enum name='manipulated_emotion'>
            <enum-item name='NONE' value='-1'/>
            <enum-item name='Trust'/>
            <enum-item name='Loyalty'/>
            <enum-item name='Love'/>
            <enum-item name='Fear'/>
            <enum-item name='Respect'/>
        </enum>
        <int32_t name='emotion_rating' comment="-100 to 125 seen"/>
        <int32_t name='emotion_roll' comment="-10 to 12 seen"/>

        <bitfield name='flags'>
            <flag-bit name='succeeded'/>
            <flag-bit name='misread_target'/>
        </bitfield>

        <int32_t name='position_entity_id' ref-target='historical_entity' comment="Used to pull rank"/>
        <int32_t name='position_assignment_id' ref-target='entity_position_assignment' aux-value='$$.position_entity_id'/>

        <int32_t name='offered_id' ref-target='historical_figure' comment='deity or revenge target'/>
        <enum name='offered_relationship' type-name='vague_relationship_type' base-type='int32_t'/>

        <int32_t name='corruptor_ally_roll'/>
        <int32_t name='target_ally_roll'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
