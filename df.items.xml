<data-definition>
    -- MISC TYPES

    <bitfield-type type-name='item_flags'>
        <flag-bit name='on_ground' comment='Item on ground'/>
        <flag-bit name='in_job' comment='Item currently being used in a job'/>
        <flag-bit name='hostile' comment='Item owned by hostile'/>
        <flag-bit name='in_inventory' comment='Item in a creature, workshop or container inventory'/>

        <flag-bit name='removed' comment='completely invisible and with no position'/>
        <flag-bit name='in_building' comment='Part of a building (including mechanisms, bodies in coffins)'/>
        <flag-bit name='container' comment='Set on anything that contains or contained items?'/>
        <flag-bit name='dead_dwarf' comment='Dwarfs dead body or body part'/>

        <flag-bit name='rotten' comment='Rotten food'/>
        <flag-bit name='spider_web' comment='Thread in spider web'/>
        <flag-bit name='construction' comment='Material used in construction'/>
        <flag-bit name='encased' comment='Item encased in ice or obsidian'/>

        <flag-bit name='unk12' comment='unknown, unseen'/>
        <flag-bit name='murder' comment='Implies murder - used in fell moods'/>
        <flag-bit name='foreign' comment='Item is imported'/>
        <flag-bit name='trader' comment='Item ownwed by trader'/>

        <flag-bit name='owned' comment='Item is owned by a dwarf'/>
        <flag-bit name='garbage_collect' comment='Marked for deallocation by DF it seems'/>
        <flag-bit name='artifact' comment='Artifact'/>
        <flag-bit name='forbid' comment='Forbidden item'/>

        <flag-bit name='already_uncategorized' comment='unknown, unseen'/>
        <flag-bit name='dump' comment='Designated for dumping'/>
        <flag-bit name='on_fire' comment='Indicates if item is on fire, Will Set Item On Fire if Set!'/>
        <flag-bit name='melt' comment='Designated for melting, if applicable'/>

        <flag-bit name='hidden' comment='Hidden item'/>
        <flag-bit name='in_chest' comment='Stored in chest/part of well?'/>
        <flag-bit name='use_recorded' comment='transient in unit.used_items update'/>
        <flag-bit name='artifact_mood' comment='created by mood/named existing item'/>

        <flag-bit name='temps_computed' comment='melting/boiling/ignite/etc. points'/>
        <flag-bit name='weight_computed'/>
        <flag-bit name='unk30' comment='unknown, unseen'/>
        <flag-bit name='from_worldgen' comment='created by underground critters?'/>
    </bitfield-type>

    <bitfield-type type-name='item_flags2'>
        <flag-bit name='has_rider' comment='vehicle with a rider'/>
        <flag-bit name='unk1'/>
        <flag-bit name='grown'/>
        <flag-bit name='unk_book' comment='possibly book/written-content-related'/>
        <flag-bit/>
    </bitfield-type>

    <enum-type type-name='item_magicness_type' base-type='int16_t'>
        <enum-item name='Sparkle'/>
        <enum-item name='AirWarped'/>
        <enum-item name='Whistle'/>
        <enum-item name='OddlySquare'/>
        <enum-item name='SmallBumps'/>
        <enum-item name='EarthSmell'/>
        <enum-item name='Lightning'/>
        <enum-item name='GrayHairs' comment='with value of 10 or higher, creatures that look at the item cannot think negative thoughts'/>
        <enum-item name='RustlingLeaves'/>
    </enum-type>

    <struct-type type-name='item_magicness'>
        <enum base-type='int16_t' name="type" type-name='item_magicness_type'/>
        <int16_t name='value' comment='boosts item value by 50*this'/>
        <int16_t name='unk_1'/>
        <int32_t name='flags' comment='1=does not show up in item description or alter item value'/>
    </struct-type>

    <struct-type type-name='temperaturest'> seems like a convenient name
        <uint16_t name='whole' init-value='10050'/>
        <int16_t name='fraction' init-value='0'/>
    </struct-type>

    <struct-type type-name='spatter_common'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <enum type-name='matter_state' base-type='int16_t' name='mat_state'/>
        <compound name='temperature' type-name='temperaturest'/>
        <int32_t name='size' comment='1-24=spatter, 25-49=smear, 50-* = coating'/>
        <bitfield base-type='uint16_t' name='base_flags' since='v0.40.13'>
            <flag-bit name='evaporates' comment='does not contaminate tile when washed away'/>
        </bitfield>
        <padding name='pad_1' size='2' comment='needed for proper alignment of spatter on gcc'/>
    </struct-type>

    <struct-type type-name='spatter' inherits-from='spatter_common'>
        <int16_t name='body_part_id'
                 refers-to='$$._global._parent._global.body.body_plan.body_parts[$]'/>
        <bitfield base-type='uint16_t' name='flags'>
            <flag-bit name='water_soluble'/>
        </bitfield>
    </struct-type>

    <enum-type type-name='item_quality' base-type='int16_t'>
        <enum-item name='Ordinary'/>
        <enum-item name='WellCrafted'/>
        <enum-item name='FinelyCrafted'/>
        <enum-item name='Superior'/>
        <enum-item name='Exceptional'/>
        <enum-item name='Masterful'/>
        <enum-item name='Artifact'/>
    </enum-type>

    <enum-type type-name='slab_engraving_type' base-type='int16_t'>
        <enum-item name='Slab' value='-1'/>
        <enum-item name='Memorial'/>
        <enum-item name='CraftShopSign'/>
        <enum-item name='WeaponsmithShopSign'/>
        <enum-item name='ArmorsmithShopSign'/>
        <enum-item name='GeneralStoreSign'/>
        <enum-item name='FoodShopSign'/>
        <enum-item name='Secrets' comment='from the gods?'/>
        <enum-item name='FoodImportsSign'/>
        <enum-item name='ClothingImportsSign'/>
        <enum-item name='GeneralImportsSign'/>
        <enum-item name='ClothShopSign'/>
        <enum-item name='LeatherShopSign'/>
        <enum-item name='WovenClothingShopSign'/>
        <enum-item name='LeatherClothingShopSign'/>
        <enum-item name='BoneCarverShopSign'/>
        <enum-item name='GemCutterShopSign'/>
        <enum-item name='WeaponsmithShopSign2'/>
        <enum-item name='BowyerShopSign'/>
        <enum-item name='BlacksmithShopSign'/>
        <enum-item name='ArmorsmithShopSign2'/>
        <enum-item name='MetalCraftShopSign'/>
        <enum-item name='LeatherGoodsShopSign'/>
        <enum-item name='CarpenterShopSign'/>
        <enum-item name='StoneFurnitureShopSign'/>
        <enum-item name='MetalFurnitureShopSign'/>
        <enum-item name='DemonIdentity' comment='when a demon assumes identity?'/>
        <enum-item name='TavernSign'/>
    </enum-type>

    -- CORE ITEM

    <class-type type-name='item' original-name='itemst'
                instance-vector='$global.world.items.all' key-field='id'>
        <compound name='pos' type-name='coord'/>

        <bitfield name='flags' type-name='item_flags'/>
        <bitfield name='flags2' type-name='item_flags2' since='v0.34.08'/>

        <uint32_t name='age'/>
        <int32_t name='id'/>

        <stl-vector name='specific_refs' pointer-type='specific_ref'/>
        <stl-vector name='general_refs' pointer-type='general_ref'/>

        <int32_t name='world_data_id' ref-target='world_object_data' since='v0.34.01'/>
        <int32_t name='world_data_subid' init-value='-1' since='v0.34.01'/>

        <uint8_t name='stockpile_countdown' comment='-1 per 50 frames; then check if needs moving'/>
        <uint8_t name='stockpile_delay' comment='used to reset countdown; randomly varies'/>

        <int16_t name='unk2'/>
        <int32_t name='base_uniform_score'/>
        <int16_t name='walkable_id' comment='from map_block.walkable'/>
        <uint16_t name='spec_heat'/>
        <uint16_t name='ignite_point'/>
        <uint16_t name='heatdam_point'/>
        <uint16_t name='colddam_point'/>
        <uint16_t name='boiling_point'/>
        <uint16_t name='melting_point'/>
        <uint16_t name='fixed_temp'/>

        <int32_t name='weight' comment='if flags.weight_computed'/>
        <int32_t name='weight_fraction' comment='1e-6'/>

        <virtual-methods>
            <vmethod ret-type='item_type' name='getType'/>
            <vmethod ret-type='int16_t' name='getSubtype'/>
            <vmethod ret-type='int16_t' name='getMaterial'/>
            <vmethod ret-type='int32_t' name='getMaterialIndex'/>
            <vmethod name='setSubtype'> <int16_t/> </vmethod>

            <vmethod name='setMaterial'> <int16_t/> </vmethod>
            <vmethod name='setMaterialIndex'> <int32_t/> </vmethod>
            <vmethod ret-type='int16_t' name='getActualMaterial'
                    comment='returns an actual material type, never a race'/>
            <vmethod ret-type='int32_t' name='getActualMaterialIndex'
                    comment='returns an actual material index, never a caste'/>
            <vmethod ret-type='int16_t' name='getRace'
                    comment='only if the object is made of a "specific creature mat"'/>

            -- 10

            <vmethod ret-type='int16_t' name='getCaste'
                    comment='only if the object is made of a "specific creature mat"'/>
            <vmethod ret-type='int16_t' name='getPlantID'
                    comment='only if the object is made of a plant material'/>
            <vmethod ret-type='int32_t' name='getGrowthPrint' since='v0.40.01'/>
            <vmethod name='setGrowthPrint' since='v0.40.01'><int32_t name='print'/></vmethod>
            <vmethod ret-type='int32_t' name='getDimension' since='v0.40.01'/>

            <vmethod ret-type='int32_t' name='getTotalDimension'/>
            <vmethod name='setDimension'> <int32_t name='amount'/> </vmethod>
            <vmethod ret-type='bool' name='subtractDimension'> <int32_t name='amount'/> </vmethod>

            <vmethod ret-type='bool' name='isFoodStorage'/>
            <vmethod ret-type='bool' name='isTrackCart'/>
            <vmethod ret-type='bool' name='isWheelbarrow'/>
            <vmethod ret-type='int32_t' name='getVehicleID'/>
            <vmethod ret-type='bool' name='isAmmo'/>
            <vmethod name='getStockpile'>
                <ret-type><pointer type-name='item_stockpile_ref'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='containsPlaster'/>
            <vmethod ret-type='bool' name='isPlaster'/>
            <vmethod ret-type='bool' name='getColorOverride'> <pointer/> </vmethod>

            -- 26

            <vmethod name='getHistoryInfo'>
                <ret-type><pointer><pointer type-name='item_history_info'/></pointer></ret-type>
            </vmethod>
            <vmethod ret-type='bool' name='hasToolUse'> <enum base-type='int16_t' type-name='tool_uses' name='use'/> </vmethod>
            <vmethod ret-type='bool' name='hasInvertedTile'/>
            <vmethod name='becomePaste'/>
            <vmethod name='becomePressed'/>
            <vmethod name='calculateWeight'/>

            <vmethod ret-type='bool' name='isSharpStone'/>
            <vmethod ret-type='bool' name='isCrystalGlassable'/>
            <vmethod ret-type='bool' name='isMetalOre'> <int16_t name='matIndex'/> </vmethod>
            <vmethod name='clearLastTempUpdateTS'/>
            <vmethod name='listNotableKills'> <pointer type-name='stl-string' name='string_ptr'/> </vmethod>

            -- 37

            <vmethod ret-type='uint16_t' name='getSpecHeat'/>
            <vmethod ret-type='uint16_t' name='getIgnitePoint'/>
            <vmethod ret-type='uint16_t' name='getHeatdamPoint'/>
            <vmethod ret-type='uint16_t' name='getColddamPoint'/>
            <vmethod ret-type='uint16_t' name='getBoilingPoint'/>

            <vmethod ret-type='uint16_t' name='getMeltingPoint'/>
            <vmethod ret-type='uint16_t' name='getFixedTemp'/>
            <vmethod ret-type='int32_t' name='getSolidDensity'/>
            <vmethod ret-type='bool' name='materialRots'/>
            <vmethod ret-type='uint16_t' name='getTemperature'/>

            -- 47

            <vmethod ret-type='bool' name='adjustTemperature'>
                <uint16_t name='target'/>
                <int32_t name='unk'/>
            </vmethod>
            <vmethod/>
            <vmethod name='extinguish'/>
            <vmethod ret-type='int8_t' name='getGloveHandedness'/>
            <vmethod name='setGloveHandedness'> <int8_t/> </vmethod>

            <vmethod ret-type='bool' name='isSpike'/>
            <vmethod ret-type='bool' name='isScrew'/>
            <vmethod ret-type='bool' name='isBuildMat'/>
            <vmethod ret-type='bool' name='isTemperatureSafe'> <int8_t comment='1 fire, 2 magma'/> </vmethod>
            <vmethod name='setRandSubtype'> <int32_t name='entity_id'/> </vmethod>

            -- 57

            <vmethod ret-type='int8_t' name='getWeaponSize' comment='weapon racks have capacity 5'/>
            <vmethod ret-type='int16_t' name='getWear'/>
            <vmethod name='setWear'> <int16_t/> </vmethod>
            <vmethod ret-type='int32_t' name='getMaker'/>
            <vmethod name='setMaker'> <int32_t name='unit_id'/> </vmethod>

            <vmethod name='getCorpseInfo'>
                <pointer type-name='int16_t' name='prace'/>
                <pointer type-name='int16_t' name='pcaste'/>
                <pointer name='phfig'> <pointer type-name='historical_figure'/> </pointer>
                <pointer name='punit'> <pointer type-name='unit'/> </pointer>
            </vmethod>
            <vmethod/>
            <vmethod name='getGloveFlags'>
                <ret-type><pointer><df-flagarray/></pointer></ret-type>
            </vmethod>
            <vmethod name='getItemShapeDesc' comment='a statue/figurine of "string goes here"'>
                <ret-type><pointer type-name='stl-string'/></ret-type>
            </vmethod>
            <vmethod/>?
            <vmethod/>?
            <vmethod ret-type='bool' name='isMatchingAmmoItem'> <pointer type-name='item_filter_spec'/> </vmethod>

            -- 67

            <vmethod name='getImageRef'>
                <pointer name='id'><pointer type-name='int32_t'/></pointer>
                <pointer name='subid'><pointer type-name='int16_t'/></pointer>
            </vmethod>
            <vmethod name='getImageCivSite'>
                <pointer type-name='int32_t' name='civ_id' ref-target='historical_entity'/>
                <pointer type-name='int32_t' name='site_id' ref-target='world_site'/>
            </vmethod>
            <vmethod name='setImageCivSite'>
                <int32_t name='civ_id' ref-target='historical_entity'/>
                <int32_t name='site_id' ref-target='world_site'/>
            </vmethod>
            <vmethod name='setSeedsPlantSkillLevel'> <int32_t name='level'/> </vmethod>
            <vmethod ret-type='int16_t' name='getCorpseSize' comment='size_info.size_cur'/>

            <vmethod ret-type='bool' name='ageItem'><int32_t name='amount'/></vmethod>
            <vmethod ret-type='int32_t' name='getCritterAirdrownTimer'/>
            <vmethod name='setCritterAirdrownTimer'> <int32_t/> </vmethod>
            <vmethod name='incrementCritterAirdrownTimer'/>
            <vmethod ret-type='int32_t' name='getRotTimer'/>

            -- 77

            <vmethod name='setRotTimer'> <int32_t name='val'/> </vmethod>
            <vmethod name='incrementRotTimer'/>
            <vmethod ret-type='bool' name='isBogeymanCorpse'/>
            <vmethod ret-type='bool' name='testMaterialFlag' comment='return true if item satisfies flag'/>
                <enum base-type='int32_t' type-name='material_flags' name='mat_flag'/>
            </vmethod>
            <vmethod name='getAmmoType'>
                <ret-type><pointer type-name='stl-string'/></ret-type>
                <pointer type-name='stl-string'/>
            </vmethod>

            <vmethod ret-type='bool' name='isLiquidPowder'/>
            <vmethod ret-type='bool' name='isLiquid'/>
            <vmethod ret-type='bool' name='isLiveAnimal' comment='vermin, pet, or critter'/>
            <vmethod ret-type='int32_t' name='getVolume' comment='for putting in containers, building clutter'/>
            <vmethod name='addImprovementFromJob'>
                <ret-type><pointer type-name='itemimprovement'/></ret-type>
                <enum base-type='int32_t' type-name='improvement_type' name='imp_type'/>
                <pointer type-name='job' name='job'/>
                <pointer type-name='unit' name='unit'/>
                <int16_t name='mat_type'/>
                <int32_t name='mat_index'/>
                <int32_t name='shape' ref-target='descriptor_shape'/>
                <int16_t name='forced_quality'/>
                <pointer type-name='historical_entity' name='entity'/>
                <pointer type-name='world_site' name='site'/>
                <int16_t name='unk' comment='used to compute quality if !job||!unit'/>
                <bool name='unshaped' comment='glazed'/>
                <bool/>
                <int32_t/>
            </vmethod>
            <vmethod ret-type='bool' name='isWeapon'/>

            -- 88

            <vmethod ret-type='bool' name='isArmorNotClothing'/>
            <vmethod ret-type='bool' name='isMillable'/>
            <vmethod ret-type='bool' name='isProcessableThread'/>
            <vmethod ret-type='bool' name='isProcessableVial'/>

            <vmethod ret-type='bool' name='isProcessableBarrel'/>
            <vmethod ret-type='bool' name='isEdiblePlant'/>
            <vmethod ret-type='bool' name='isEdibleRaw'> <int32_t name='hunger'/> </vmethod>
            <vmethod ret-type='bool' name='isEdibleCarnivore'>
                <comment>In item_foodst, requires MEAT or FISH ingredient.</comment>
                <int32_t name='hunger'/>
            </vmethod>
            <vmethod ret-type='bool' name='isEdibleBonecarn'>
                <comment>In item_foodst, requires CORPSEPIECE, MEAT or FISH ingredient.</comment>
                <int32_t name='hunger'/>
            </vmethod>

            -- 97

            <vmethod ret-type='bool' name='moveToGround'>
                <int16_t name='x'/> <int16_t name='y'/> <int16_t name='z'/>
            </vmethod>
            <vmethod name='categorize' comment='Add item to world.items.other.*'> <bool name='in_play'/> </vmethod>
            <vmethod name='uncategorize' comment='Remove item from world.items.other.*'/>
            <vmethod ret-type='bool' name='isFurniture'> <bool name='empty'/> </vmethod>
            <vmethod ret-type='bool' name='isPressed'/>
            <vmethod ret-type='bool' name='isAnimal' comment='stored in Animal stockpiles'/>

            <vmethod name='assignQuality'>
                <pointer name='maker' type-name='unit'/>
                <enum base-type='int16_t' name='job_skill' type-name='job_skill'/>
            </vmethod>
            <vmethod><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod name='notifyCreatedMasterwork'>
                <pointer name='maker' type-name='unit'/>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='notifyLostMasterwork'/>
            <vmethod name='addMagic'><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod name='magic_unk1'><int32_t/><int32_t/></vmethod>
            <vmethod name='magic_unk2'><int32_t/><int32_t/></vmethod>

            -- 110

            <vmethod name='magic_unk3'><int32_t/></vmethod>
            <vmethod name='magic_unk4'><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod name='setDisplayColor'><pointer/></vmethod>
            <vmethod ret-type='bool' name='isDamagedByHeat'/>
            <vmethod ret-type='bool' name='needTwoHandedWield'> <int32_t/> </vmethod>

            <vmethod name='splitStack'>
                <ret-type><pointer type-name='item'/></ret-type>
                <int32_t name='stack_size'/>
                <bool name='preserve_containment'/>
            </vmethod>
            <vmethod ret-type='bool' name='isTameableVermin'/>
            <vmethod ret-type='bool' name='isDye'/>
            <vmethod ret-type='bool' name='isMilkable'><int32_t/><int32_t/></vmethod>

            -- 119

            <vmethod ret-type='bool' name='isSandBearing'/>
            <vmethod ret-type='bool' name='isLyeBearing'/>
            <vmethod ret-type='bool' name='isAnimalProduct'/>
            <vmethod name='getStorageInfo'>
                <pointer type-name='int16_t' name='item_type'/>
                <pointer type-name='int16_t' name='material_category'/>
            </vmethod>
            <vmethod ret-type='bool' name='addWear'>
                <int32_t name='delta'/> <bool name='simple'/> <bool name='lose_masterwork'/>
            </vmethod>

            <vmethod ret-type='bool' name='incWearTimer'> <int32_t name='delta'/> </vmethod>
            <vmethod ret-type='bool' name='checkWearDestroy'>
                <bool name='simple'/> <bool name='lose_masterwork'/>
            </vmethod>
            <vmethod name='addContaminant'>
                <int16_t name='mat_type'/> <int32_t name='mat_index'/>
                <enum type-name='matter_state' base-type='int16_t' name='mat_state'/>
                <uint16_t name='temp'/> <int32_t name='size'/>
                <int16_t name='body_part_id'/> <uint16_t name='flags'/>
            </vmethod>
            <vmethod name='removeContaminantByIdx'>
                <int32_t name='index'/> <int32_t name='amount'/>
            </vmethod>
            <vmethod name='removeContaminant'>
                <int16_t name='mat_type'/> <int32_t name='mat_index'/>
                <int32_t name='amount'/>
            </vmethod>

            -- 129

            <vmethod name='tradeUnitContaminants'>
                <pointer type-name='unit'/> <int16_t name='body_part_id'/>
            </vmethod>
            <vmethod name='tradeItemContaminants' comment='calls item.tIC2(this)'>
                <pointer type-name='item'/>
            </vmethod>
            <vmethod name='tradeItemContaminants2'>
                <pointer type-name='item_actual'/>
            </vmethod>
            <vmethod name='contaminateWound'>
                <pointer type-name='unit'/> <pointer type-name='unit_wound'/>
                <uint8_t name='shift'/> <int16_t name='body_part_id'/>
            </vmethod>
            <vmethod name='write_file'> <pointer name='file' type-name='file_compressorst'/> </vmethod>

            <vmethod name='read_file'>
                <pointer name='file' type-name='file_compressorst'/>
                <enum name='loadversion' type-name='save_version'/>
            </vmethod>
            <vmethod name='getWeaponAttacks'>
                <ret-type><pointer><stl-vector type-name='pointer'/></pointer></ret-type>
            </vmethod>
            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool' name='isSplittable' comment='if false, you throw the entire stack at once'/>
            <vmethod name='addDefaultThreadImprovement'><pointer type-name='historical_entity' comment='add default thread improvement to items made of cloth'/></vmethod>

            -- 139

            <vmethod name='addThreadImprovement'><pointer type-name='item'/><pointer type-name='historical_entity' comment='add a specific thread improvement to items made of cloth'/></vmethod>
            <vmethod name='propagateUnitRefs'/> add to unit.owned_items/traded_items
            <vmethod ret-type='bool' name='isSand'/>
            <vmethod ret-type='int32_t' comment='returns item_actual.unk_1'/>

            <vmethod ret-type='int32_t' name='getStackSize'/>
            <vmethod name='addStackSize'> <int32_t name='amount'/> </vmethod>
            <vmethod name='setStackSize'> <int32_t name='amount'/> </vmethod>
            <vmethod ret-type='bool' name='isAmmoClass'> <pointer type-name='stl-string'/> </vmethod>
            <vmethod ret-type='bool' name='isAutoClean'
                     comment='delete on_ground every season when in ANY_AUTO_CLEAN; default true'/>

            -- 149

            <vmethod ret-type='bool' name='setTemperatureFromMapTile'>
                <int32_t name='x'/> <int32_t name='y'/> <int32_t name='z'/>
                <bool name='local'/> <bool name='contained'/>
            </vmethod>
            <vmethod ret-type='bool' name='setTemperatureFromMap'>
                <bool name='local'/> <bool name='contained'/>
            </vmethod>
            <vmethod ret-type='bool' name='setTemperature'>
                <uint16_t name='temp'/> <bool name='local'/> <bool name='contained'/>
            </vmethod>
            <vmethod ret-type='bool' name='updateTempFromMap'>
                <bool name='local'/> <bool name='contained'/> <bool name='adjust'/>
                <int32_t name='multiplier'/>
            </vmethod>
            <vmethod ret-type='bool' name='updateTemperature'>
                <uint16_t name='temp'/> <bool name='local'/>
                <bool name='contained'/> <bool name='adjust'/>
                <int32_t name='multiplier'/>
            </vmethod>

            <vmethod ret-type='bool' name='updateFromWeather'/>
            <vmethod ret-type='bool' name='updateContaminants'/>
            <vmethod ret-type='bool' name='checkTemperatureDamage'/>
            <vmethod ret-type='bool' name='checkHeatColdDamage'/>
            <vmethod ret-type='bool' name='checkMeltBoil'/>

            -- 159

            <vmethod ret-type='int16_t' name='getMeleeSkill'/>
            <vmethod ret-type='int16_t' name='getRangedSkill'/>
            <vmethod name='setQuality'> <int16_t name='quality'/> </vmethod>
            <vmethod ret-type='int16_t' name='getQuality'/>
            <vmethod ret-type='int16_t' name='getOverallQuality'/>

            <vmethod ret-type='int16_t' name='getImprovementQuality'/>
            <vmethod ret-type='int32_t' name='getProjectileSize'/>
            <vmethod ret-type='bool' name='isImprovable'>
                <pointer type-name='job'/>
                <int16_t name='mat_type'/> <int32_t name='mat_index'/>
            </vmethod>
            <vmethod name='setSharpness'>
                <int32_t name='unk1'/>
                <int32_t name='unk2'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getSharpness'/>

            -- 169

            <vmethod ret-type='bool' name='isTotemable'/>
            <vmethod ret-type='bool' name='isDyeable'/>
            <vmethod ret-type='bool' name='isNotDyed'/>
            <vmethod ret-type='bool' name='isDyed'/>
            <vmethod ret-type='bool' name='canSewImage'/>

            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool' name='isProcessableVialAtStill'/>
            <vmethod ret-type='bool' name='isSimilarToItem'>
                <enum base-type='int16_t' name='item_type' type-name='item_type'/>
                <int16_t name='item_subtype'/>
                <int16_t name='mat_type'/>
                <int32_t name='mat_index'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getBlockChance'/>
            <vmethod ret-type='int32_t' comment='returns 10 for tools and weapons, 0 for most other item types'/>

            -- 179

            <vmethod ret-type='int16_t' name='getMakerRace'/>
            <vmethod name='setMakerRace'> <int16_t/> </vmethod>
            <vmethod ret-type='int8_t' name='getEffectiveArmorLevel'
                    comment="adds 1 if it has [METAL_ARMOR_LEVELS] and it's made of an inorganic mat"/>
            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool' name='isItemOrganicCloth'/> only for item_cloth

            <vmethod ret-type='bool' name='isMadeOfOrganicCloth'/> for all constructed items
            <vmethod name='coverWithContaminant' comment='also stops fire; used for rain'>
                <int16_t name='mat_type'/> <int32_t name='mat_index'/>
                <enum type-name='matter_state' base-type='int16_t' name='mat_state'/>
                <uint16_t name='temperature'/>
            </vmethod>
            <vmethod ret-type='bool' name='hasSpecificImprovements'>
                <enum type-name='improvement_type' name='imp_type'/>
            </vmethod>
            <vmethod ret-type='bool' name='hasImprovements'/> any at all
            <vmethod ret-type='bool' name='isImproved'/>
            <vmethod name='getMagic'>
                <ret-type><pointer><stl-vector pointer-type='item_magicness'/></pointer></ret-type>
            </vmethod>

            -- 189

            <vmethod name='getItemDescription'>
                <pointer type-name='stl-string'/>
                <int8_t name='plurality' comment="0 = prickle berries [2], 1 = prickle berry, 2 = prickle berries"/>
            </vmethod>
            <vmethod name='getItemDescriptionPrefix' comment='"a " or "the "'>
                <pointer type-name='stl-string'/>
                <int8_t name='mode'/>
            </vmethod>
            <vmethod name='getItemBasicName' comment='usually just "item"'>
                <pointer type-name='stl-string'/>
            </vmethod>
            <vmethod ret-type='int32_t' name='getImprovementsValue'> <pointer type-name='caravan_state' name='caravan'/> </vmethod>
            <vmethod ret-type='bool' name='isExtractBearingFish'/>

            <vmethod ret-type='bool' name='isExtractBearingVermin'/>
            <vmethod ret-type='int32_t' comment='for armor, clothing, weapons, and tools, returns material size from the corresponding itemdef'/>
            <vmethod ret-type='int32_t' name='getBaseWeight'/>
            <vmethod ret-type='int32_t' name='getWeightShiftBits'/>
            <vmethod ret-type='bool' name='isCollected'/>

            -- 199

            <vmethod ret-type='bool' name='isEdibleVermin'/>
            <vmethod ret-type='uint8_t' name='drawSelf'/>
            <vmethod ret-type='bool' name='isRangedWeapon'/>
            <vmethod ret-type='bool' name='isClothing'/>

            <vmethod ret-type='bool' name='isWet'/>
            <vmethod ret-type='int32_t' name='getCurrencyValue' comment='that is, value of coins'>
                <pointer type-name='historical_entity' name='appraiser'/>
            </vmethod>
            <vmethod ret-type='bool' name='isAssignedToStockpile'/>
            <vmethod ret-type='bool' name='isAssignedToThisStockpile'> <int32_t/> </vmethod>
            <vmethod name='detachStockpileAssignment' comment='also removes links from the pile'/>

            -- 208

            <vmethod name='removeStockpileAssignment' comment='just wipes the fields'/>
            <vmethod name='getStockpile2'>
                <ret-type><pointer type-name='item_stockpile_ref'/></ret-type>
            </vmethod>
            <vmethod><int32_t/><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod><int32_t/></vmethod>

            <vmethod ret-type='int32_t' name='getThreadDyeValue'> <pointer type-name='caravan_state' name='caravan'/> </vmethod>
            <vmethod name='getColorAndShape'>
                <pointer name='colors'><stl-vector type-name='int16_t'/></pointer>
                <pointer name='shapes'><stl-vector type-name='int16_t'/></pointer>
            </vmethod>
            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool' name='isArmor' comment='for armor user skill encumberance'/>
            <vmethod ret-type='int32_t' name='calcUniformScore'>
                <pointer type-name='squad_uniform_spec'/>
                <bool name='exact_match'/>
                <enum base-type='int16_t' type-name='job_skill' name='best_any'/>
                <enum base-type='int16_t' type-name='job_skill' name='best_melee'/>
                <enum base-type='int16_t' type-name='job_skill' name='best_ranged'/>
            </vmethod>

            -- 218

            <vmethod ret-type='int32_t' name='calcBaseUniformScore'/>
            <vmethod><int32_t/><int32_t/><int32_t/></vmethod>
            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool'/>
            <vmethod><int32_t/><int32_t/></vmethod> related to history_info

            <vmethod><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/><int32_t/></vmethod> also history_info
            <vmethod/> history_info
            <vmethod/> history_info
            <vmethod name='getSlabEngravingType'>
                <ret-type><enum base-type='int16_t' type-name='slab_engraving_type'/></ret-type>
            </vmethod>
            <vmethod ret-type='int32_t' name='getAbsorption'/>

            -- 228

            <vmethod ret-type='bool'/>
            <vmethod ret-type='bool' name='isGemMaterial'/>
            <vmethod name='setGemShape'> <int32_t name='shape' ref-target='descriptor_shape'/> </vmethod>
            <vmethod ret-type='bool' name='hasGemShape'/>
            <vmethod name='getGemShape'>
                <ret-type><int32_t ref-target='descriptor_shape'/></ret-type>
            </vmethod>
            <vmethod ret-type='bool' since='v0.40.01'/>
            <vmethod ret-type='bool' name='hasWriting'/>
            <vmethod ret-type='bool' since='v0.47.01'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    -- ACTUAL ITEM

    <struct-type type-name='item_kill_info'>
        <compound name='targets' type-name='historical_kills'/>

        -- Wielders

        <stl-vector name="slayers" type-name='int32_t' ref-target='historical_figure'/>
        <stl-vector name="slayer_kill_counts" type-name='int32_t'/> naming weight 1
    </struct-type>

    <struct-type type-name='item_history_info'>
        <pointer name='kills' type-name='item_kill_info'/>
        <int32_t name='attack_counter' comment='increments by 1 each time the item is fired, thrown or used in an attack'/> naming weight 0.001
        <int32_t name='defence_counter' comment='increments by 1 each time the item is used in an attempt to block or parry'/> naming weight 0.01
    </struct-type>

    <class-type type-name='item_actual' inherits-from='item' original-name='item_actualst'>
        <int32_t name='stack_size' init-value='1'/>

        <code-helper name='describe'>
            (if (> $.stack_size 1) (fmt "stack: ~A" $.stack_size))
            (if (> $.wear 0) (fmt "wear: ~A" $.wear))
        </code-helper>

        <pointer name='history_info'>
            <pointer type-name='item_history_info'/>
        </pointer>

        <pointer name='magic'>
            <stl-vector pointer-type='item_magicness'/>
        </pointer>

        <pointer name='contaminants'>
            <stl-vector pointer-type='spatter'/>
        </pointer>

        <compound name='temperature' type-name='temperaturest'/>

        <int16_t name='wear'/>
        <int32_t name='wear_timer' comment='counts up to 806400'/>

        <int32_t name='unk_1' init-value='-1' since='v0.34.01'/>
        <int32_t name='temp_updated_frame' init-value='-1'/>
    </class-type>

    -- CRAFTED ITEM

    <class-type type-name='item_crafted' inherits-from='item_actual'
                original-name='item_craftedst'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>

        <code-helper name='describe'>
            $.quality
            (describe-obj (material-by-id $.mat_type $.mat_index))
        </code-helper>

        <int16_t name='maker_race' ref-target='creature_raw'/>
        <enum base-type='int16_t' name='quality' type-name='item_quality'/>
        <enum base-type='int32_t' name="skill_rating" type-name='skill_rating'
              comment='at the moment of creation'/>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='masterpiece_event' ref-target='history_event'/>
    </class-type>

    -- CONSTRUCTED ITEM

    <class-type type-name='item_constructed' inherits-from='item_crafted'
                original-name='item_constructedst'>
        <stl-vector name='improvements' pointer-type='itemimprovement'/>
    </class-type>

    -- BODY COMPONENT

    <bitfield-type type-name='body_part_status'>
        <flag-bit name='on_fire'/>
        <flag-bit name='missing'/>
        <flag-bit name='organ_loss' comment='cyan'/>
        <flag-bit name='organ_damage' comment='yellow'/>

        <flag-bit name='muscle_loss' comment='red'/>
        <flag-bit name='muscle_damage' comment='yellow'/>
        <flag-bit name='bone_loss' comment='red'/>
        <flag-bit name='bone_damage' comment='yellow'/>

        <flag-bit name='skin_damage' comment='brown'/>
        <flag-bit name='motor_nerve_severed'/>
        <flag-bit name='sensory_nerve_severed'/>
        <flag-bit name='spilled_guts'/>

        <flag-bit name='has_splint'/>
        <flag-bit name='has_bandage'/>
        <flag-bit name='has_plaster_cast'/>
        <flag-bit name='grime' count='3'/>

        <flag-bit name='severed_or_jammed'
                  comment='seen e.g. on ribs smashed by blunt attack, but quickly disappeared'/>
        <flag-bit name='under_shell'/>

        <flag-bit name='is_shell'/>
        <flag-bit name='mangled' comment='a wounded body part is described as being mangled beyond recognition when this flag is set'/>
        <flag-bit name='unk20' comment='on zombified head'/>
        <flag-bit name='gelded' comment='set on GELDABLE body parts after a unit has been gelded'/>
    </bitfield-type>

    <bitfield-type type-name='body_layer_status'>
        <flag-bit name='gone'/>
        <flag-bit name='leaking'/>
    </bitfield-type>

    <struct-type type-name='body_component_info'>
        <stl-vector name='body_part_status' type-name='body_part_status'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.body_parts[$]'/>

        <stl-vector name='numbered_masks' type-name='uint32_t'
                    comment='1 bit per instance of a numbered body part'/>
        <stl-vector name='nonsolid_remaining' type-name='uint32_t' comment='0-100%'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.nonsolid_layers[$].refers-to'/>

        <stl-vector name='layer_status' type-name='body_layer_status'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.layer_idx[$].refers-to'/>
        <stl-vector name='layer_wound_area' type-name='uint32_t'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.layer_idx[$].refers-to'/>

        Surface percentages for cuts/fractures, dents and effects (such as
        bruises, burns, frostbite, melting, freezing, necrosis, and blistering)
        <stl-vector name='layer_cut_fraction' type-name='uint32_t' comment='0-10000'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.layer_idx[$].refers-to'/>
        <stl-vector name='layer_dent_fraction' type-name='uint32_t' comment='0-10000'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.layer_idx[$].refers-to'/>
        <stl-vector name='layer_effect_fraction' type-name='uint32_t' comment='0-1000000000'
                    index-refers-to='$$._global._upglobal.caste.ref-target.body_info.layer_idx[$].refers-to'/>
    </struct-type>

    <struct-type type-name='body_size_info'>
        <int32_t name='size_cur'/>
        <int32_t name='size_base'/>
        <int32_t name='area_cur' comment='size_cur^0.666'/>
        <int32_t name='area_base' comment='size_base^0.666'/>
        <int32_t name='length_cur' comment='(size_cur*10000)^0.333'/>
        <int32_t name='length_base' comment='(size_base*10000)^0.333'/>
    </struct-type>

    <enum-type type-name='corpse_material_type'>
        <enum-item name='Plant'/>
        <enum-item name='Silk'/>
        <enum-item name='Leather'/>
        <enum-item name='Bone'/>
        <enum-item name='Shell'/>

        <enum-item/>
        <enum-item name='Soap'/>
        <enum-item name='Tooth'/>
        <enum-item name='Horn'/>
        <enum-item name='Pearl'/>

        <enum-item name='HairWool'/>
        <enum-item name='Yarn'/>
    </enum-type>

    <class-type type-name='item_body_component' inherits-from='item_actual'
                original-name='item_body_componentst'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int32_t name='hist_figure_id' ref-target='historical_figure'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <enum name='sex' type-name='pronoun_type'/>

        <int16_t name='normal_race' ref-target='creature_raw' comment='unit.enemy.normal_race'/>
        <int16_t name='normal_caste' ref-target='caste_raw' aux-value='$$.normal_race' comment='unit.enemy.normal_caste'/>

        <int32_t name='rot_timer'/>
        <int8_t name='unk_8c'/>

        <compound name='body'>
            <stl-vector name='wounds' pointer-type='unit_wound'/>

            <static-array name='unk_100' type-name='int32_t' count='10' comment='unit.body.unk_39c'/>
            <int32_t name='wound_next_id'/>

            <compound name='components' type-name='body_component_info'/>

            <static-array type-name='int32_t' name='physical_attr_value'
                          count='6' index-enum='physical_attribute_type'/>
            <static-array type-name='int32_t' name='physical_attr_soft_demotion'
                          count='6' index-enum='physical_attribute_type'/>

            <compound name='size_info' type-name='body_size_info'/>

            <stl-vector name='body_part_relsize' type-name='int32_t' comment='=unit.enemy.body_part_relsize'/>
            <stl-vector name='body_modifiers' type-name='int32_t'
                        index-refers-to='$$._global.caste.ref-target.body_appearance_modifiers[$]'/>
            <stl-vector name='bp_modifiers' type-name='int32_t'
                        index-refers-to='$$._global.caste.ref-target.bp_appearance.modifier_idx[$].refers-to'/>
        </compound>

        <int32_t name="size_modifier" comment='=unit.appearance.size_modifier'/>
        <int32_t name="birth_year"/>
        <int32_t name="birth_time"/>
        <int32_t name='curse_year' since='v0.34.01'/>
        <int32_t name='curse_time' since='v0.34.01'/>
        <int32_t name='birth_year_bias' init-value='0' since='v0.34.01'/>
        <int32_t name='birth_time_bias' init-value='0' since='v0.34.01'/>
        <int32_t name="death_year"/>
        <int32_t name="death_time"/>

        <compound name='appearance'>
            <stl-vector name='colors' type-name='int32_t'/>

            <stl-vector name='tissue_style' type-name='int16_t'/>
            <stl-vector name='tissue_style_civ_id' type-name='int32_t'/>
            <stl-vector name='tissue_style_id' type-name='int32_t'/>
            <stl-vector name='tissue_style_type' type-name='int32_t'/>
        </compound>

        <int32_t name="blood_count"/>
        <int32_t name="stored_fat"/>

        <int32_t name='hist_figure_id2' ref-target='historical_figure'/>

        <int32_t name='undead_unit_id' ref-target='unit' since='v0.34.01'/>
        <int32_t name='unit_id2' ref-target='unit'/>

        <bitfield name='corpse_flags'>
            <flag-bit name='unbutchered'/>
            <flag-bit name='plant'/>
            <flag-bit name='silk'/>
            <flag-bit name='leather'/>
            <flag-bit name='bone'/>
            <flag-bit name='shell'/>
            <flag-bit/>
            <flag-bit name='soap'/>

            <flag-bit name='tooth'/>
            <flag-bit name='horn'/>
            <flag-bit name='pearl'/>
            <flag-bit name='skull1'/>
            <flag-bit name='skull2'/>
            <flag-bit name='separated_part' comment='?'/>
            <flag-bit name='hair_wool'/>
            <flag-bit name='yarn'/>
        </bitfield>

        <static-array name='material_amount' type-name='int32_t'
                      count='19' index-enum='corpse_material_type'/>

        <compound name='bone1'>
            <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
            <int32_t name='mat_index'/>
        </compound>
        <compound name='bone2'>
            <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
            <int32_t name='mat_index'/>
        </compound>
    </class-type>

    <class-type type-name='item_corpsest' inherits-from='item_body_component'>
        <pointer name='unused_380'/>
        <pointer name='unused_388'/>
        <pointer name='unused_390'/>
        <int32_t name='unused_398'/>
        <int16_t name='unused_39c'/>
        <int32_t name='unused_3a0'/>
    </class-type>

    <class-type type-name='item_corpsepiecest' inherits-from='item_body_component'/>

    -- CRITTER

    <class-type type-name='item_critter' inherits-from='item_actual' original-name='item_critterst'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='milk_timer'/>
        <int32_t name='airdrown_timer'/>
        <compound name='name' type-name='language_name'/>
    </class-type>

    -- LIQUID/POWER

    <bitfield-type type-name='item_matstate'>
        <flag-bit name='no_auto_clean' comment='isAutoClean returns false'/>
        <flag-bit name='pressed'/>
        <flag-bit name='paste'/>
    </bitfield-type>

    <class-type type-name='item_liquipowder' inherits-from='item_actual'
                original-name='item_liquipowderst'>
        <bitfield name='mat_state' type-name='item_matstate'/>
        <int32_t name='dimension' init-value='150'/>
    </class-type>

    <class-type type-name='item_liquid' inherits-from='item_liquipowder' original-name='item_liquidst'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>

    <class-type type-name='item_powder' inherits-from='item_liquipowder' original-name='item_powderst'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>

    -- MISC

    <class-type type-name='item_barst' inherits-from='item_actual'>
        <int16_t name='subtype'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='dimension' init-value='150'/>
    </class-type>

    <class-type type-name='item_smallgemst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='shape' ref-target='descriptor_shape'/>
    </class-type>
    <class-type type-name='item_blocksst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>
    <class-type type-name='item_roughst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>
    <class-type type-name='item_boulderst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>
    <class-type type-name='item_woodst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>
    <class-type type-name='item_branchst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
    </class-type>

    <class-type type-name='item_rockst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='sharpness'/>
        <int32_t name='unk_84'/>
    </class-type>

    <class-type type-name='item_seedsst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='grow_counter'/>
        <int32_t name='planting_skill'/>
    </class-type>

    <class-type type-name='item_skin_tannedst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='unk_80'/>
    </class-type>

    <class-type type-name='item_meatst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_plantst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_plant_growthst' inherits-from='item_actual'>
        <int16_t name='subtype'/>
        <int32_t name='growth_print'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_cheesest' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_globst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='rot_timer'/>
        <bitfield name='mat_state' type-name='item_matstate'/>
        <int32_t name='dimension'/>
    </class-type>
    <class-type type-name='item_remainsst' inherits-from='item_actual'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_fishst' inherits-from='item_actual'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='rot_timer'/>
    </class-type>
    <class-type type-name='item_fish_rawst' inherits-from='item_actual'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='rot_timer'/>
    </class-type>

    <class-type type-name='item_foodst' inherits-from='item_crafted'>
        <pointer name='subtype' type-name='itemdef_foodst'/>
        <int32_t name='entity' ref-target='historical_entity'/>
        <int16_t name='recipe_id'/>
        <stl-vector name='ingredients'>
            <pointer>
                <int16_t name='unk_1'/>
                <enum base-type='int16_t' name='item_type' type-name='item_type'/>
                <int16_t name='unk_4' init-value='-1'/>
                <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
                <int32_t name='mat_index' init-value='-1'/>
                <int32_t name='maker' ref-target='historical_figure'/>
                <enum base-type='int16_t' name='quality' type-name='item_quality'/>
                <int32_t name='unk_14'/>
                <int32_t name='unk_18'/>
            </pointer>
        </stl-vector>
        <int32_t name='rot_timer'/>
    </class-type>

    <class-type type-name='item_verminst' inherits-from='item_critter'/>
    <class-type type-name='item_petst' inherits-from='item_critter'>
        <int32_t name='owner_id' ref-target='unit'/>
        <bitfield name='pet_flags'>
            <flag-bit name='available_for_adoption'/>
        </bitfield>
    </class-type>

    <class-type type-name='item_drinkst' inherits-from='item_liquid'/>
    <class-type type-name='item_powder_miscst' inherits-from='item_powder'/>
    <class-type type-name='item_liquid_miscst' inherits-from='item_liquid'>
        <int32_t name='unk_88'/>
    </class-type>

    <class-type type-name='item_threadst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int16_t name='dye_mat_type' ref-target='material' aux-value='$$.dye_mat_index'/>
        <int32_t name='dye_mat_index'/>
        <int32_t name='dyer' ref-target='historical_figure'/>
        <int32_t name='dye_masterpiece_event' ref-target='history_event'/>
        <int16_t name='dye_quality'/>
        <int16_t name='unk_92'/>
        <int32_t name='unk_94'/>
        <int8_t name='unk_98'/>
        <int32_t name='dimension' init-value='15000'/>
    </class-type>

    <class-type type-name='item_eggst' inherits-from='item_actual'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='unk_7c'/>
        <compound name='egg_materials' type-name='material_vec_ref'/>

        <bitfield name='egg_flags'>
            <flag-bit name='fertile' comment='allows the incubation_counter to be checked/incremented'/>
        </bitfield>

        <int32_t name='incubation_counter' init-value='0'
                 comment='increments when fertile in unforbidden nestbox, hatch at >= 100800 (3 months)'/>

        <int32_t name='hatchling_civ_id' ref-target='historical_entity'
                 comment='hatchlings will have this civ_id'/>
        <int32_t name='hatchling_population_id' ref-target='entity_population'
                 comment='hatchlings will have this population_id'/>
        <int32_t name='hatchling_unit_unk_c0' init-value='-1'
                 comment='hatchlings will have this unit.unk_c0 value'/>

        <int32_t name='unk_2' since='v0.40.01'/> position uncertain

        <pointer name='mothers_genes' type-name='unit_genes' comment='object owned by egg item'/>
        <int16_t name='mothers_caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int32_t name='unk_3' since='v0.40.01'/>

        <pointer name='fathers_genes' type-name='unit_genes' comment='object owned by egg item'/>
        <int16_t name='fathers_caste' ref-target='caste_raw' aux-value='$$.race'
                 comment='-1 if no father genes'/>
        <int32_t name='unk_4' since='v0.40.01'/>

        <bitfield name='hatchling_flags1' type-name='unit_flags1'
                  comment='used primarily for bit_flag:tame'/>
        <bitfield name='hatchling_flags2' type-name='unit_flags2'
                  comment='used primarily for bit_flag:roaming_wilderness_population_source'/>
        <bitfield name='hatchling_flags3' type-name='unit_flags3'
                  comment='not normally used, most/all do not stick'/>

        <int32_t name='unk_v42_1' since='v0.42.01'/>

        <enum name='hatchling_training_level' base-type='int32_t'
              type-name='animal_training_level' init-value='WildUntamed'/>

        <compound name='hatchling_animal_population' type-name='world_population_ref'/>
        <int32_t name='hatchling_mother_id' ref-target='unit'/>
        <int32_t name='size'/>
    </class-type>

    -- CONSTRUCTED

    <class-type type-name='item_doorst' inherits-from='item_constructed'/>
    <class-type type-name='item_floodgatest' inherits-from='item_constructed'/>
    <class-type type-name='item_bedst' inherits-from='item_constructed'/>
    <class-type type-name='item_chairst' inherits-from='item_constructed'/>
    <class-type type-name='item_chainst' inherits-from='item_constructed'/>
    <class-type type-name='item_flaskst' inherits-from='item_constructed'/>
    <class-type type-name='item_gobletst' inherits-from='item_constructed'/>
    <class-type type-name='item_windowst' inherits-from='item_constructed'/>
    <class-type type-name='item_cagest' inherits-from='item_constructed'/>
    <class-type type-name='item_bucketst' inherits-from='item_constructed'/>
    <class-type type-name='item_animaltrapst' inherits-from='item_constructed'/>
    <class-type type-name='item_tablest' inherits-from='item_constructed'/>
    <class-type type-name='item_coffinst' inherits-from='item_constructed'/>
    <class-type type-name='item_bagst' inherits-from='item_constructed'/>
    <class-type type-name='item_boxst' inherits-from='item_constructed'/>
    <class-type type-name='item_armorstandst' inherits-from='item_constructed'/>
    <class-type type-name='item_weaponrackst' inherits-from='item_constructed'/>
    <class-type type-name='item_cabinetst' inherits-from='item_constructed'/>
    <class-type type-name='item_amuletst' inherits-from='item_constructed'/>
    <class-type type-name='item_scepterst' inherits-from='item_constructed'/>
    <class-type type-name='item_crownst' inherits-from='item_constructed'/>
    <class-type type-name='item_ringst' inherits-from='item_constructed'/>
    <class-type type-name='item_earringst' inherits-from='item_constructed'/>
    <class-type type-name='item_braceletst' inherits-from='item_constructed'/>
    <class-type type-name='item_anvilst' inherits-from='item_constructed'/>
    <class-type type-name='item_backpackst' inherits-from='item_constructed'/>
    <class-type type-name='item_quiverst' inherits-from='item_constructed'/>
    <class-type type-name='item_catapultpartsst' inherits-from='item_constructed'/>
    <class-type type-name='item_ballistapartsst' inherits-from='item_constructed'/>
    <class-type type-name='item_trappartsst' inherits-from='item_constructed'/>
    <class-type type-name='item_pipe_sectionst' inherits-from='item_constructed'/>
    <class-type type-name='item_hatch_coverst' inherits-from='item_constructed'/>
    <class-type type-name='item_gratest' inherits-from='item_constructed'/>
    <class-type type-name='item_quernst' inherits-from='item_constructed'/>
    <class-type type-name='item_millstonest' inherits-from='item_constructed'/>
    <class-type type-name='item_splintst' inherits-from='item_constructed'/>
    <class-type type-name='item_crutchst' inherits-from='item_constructed'/>
    <class-type type-name='item_traction_benchst' inherits-from='item_constructed'/>

    <class-type type-name='item_instrumentst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_instrumentst'/>
    </class-type>
    <class-type type-name='item_toyst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_toyst'/>
    </class-type>
    <class-type type-name='item_armorst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_armorst'/>
    </class-type>
    <class-type type-name='item_shoesst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_shoesst'/>
    </class-type>
    <class-type type-name='item_shieldst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_shieldst'/>
    </class-type>
    <class-type type-name='item_helmst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_helmst'/>
    </class-type>
    <class-type type-name='item_glovesst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_glovesst'/>
        <df-flagarray name='handedness' comment='1 right, 2 left'/>
    </class-type>
    <class-type type-name='item_pantsst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_pantsst'/>
    </class-type>
    <class-type type-name='item_siegeammost' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_siegeammost'/>
        <int32_t name='sharpness' init-value='10000' since='v0.40.15'/>
    </class-type>
    <class-type type-name='item_weaponst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_weaponst'/>
        <int32_t name='sharpness'/>
    </class-type>
    <class-type type-name='item_ammost' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_ammost'/>
        <int32_t name='sharpness'/>
    </class-type>
    <class-type type-name='item_trapcompst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_trapcompst'/>
        <int32_t name='sharpness'/>
    </class-type>
    <class-type type-name='item_toolst' inherits-from='item_constructed'>
        <pointer name='subtype' type-name='itemdef_toolst'/>
        <int32_t name='sharpness'/>
        <compound name='stockpile' type-name='item_stockpile_ref'/>
        <int32_t name='vehicle_id' ref-target='vehicle' since='v0.34.08'/>
        <int32_t name='unk_2' since='v0.47.01' init-value='-1'/>
        <int32_t name='unk_3' since='v0.47.01' init-value='-1'/>
    </class-type>

    <struct-type type-name='item_stockpile_ref'>
        <int32_t name='id' ref-target='building'/>
        <int16_t name='x'/>
        <int16_t name='y'/>
    </struct-type>

    <class-type type-name='item_barrelst' inherits-from='item_constructed'>
        <compound name='stockpile' type-name='item_stockpile_ref'/>
    </class-type>
    <class-type type-name='item_binst' inherits-from='item_constructed'>
        <compound name='stockpile' type-name='item_stockpile_ref'/>
    </class-type>

    <class-type type-name='item_gemst' inherits-from='item_constructed'>
        <int32_t name='shape' ref-target='descriptor_shape'/>
    </class-type>

    <class-type type-name='item_statuest' inherits-from='item_constructed'>
        <compound name='image' type-name='art_image_ref'/>
        <stl-string name='description'/>
        <int32_t name='unk_110'/>
        <int32_t name='unk_114'/>
    </class-type>
    <class-type type-name='item_figurinest' inherits-from='item_constructed'>
        <compound name='image' type-name='art_image_ref'/>
        <stl-string name='description'/>
    </class-type>

    <class-type type-name='item_slabst' inherits-from='item_constructed'>
        <stl-string name='description'/>
        <int32_t name='topic' ref-target='historical_figure' comment='or interaction id for secrets?'/>
        <enum base-type='int16_t' type-name='slab_engraving_type' name='engraving_type'/>
    </class-type>

    <class-type type-name='item_orthopedic_castst' inherits-from='item_constructed'>
        <stl-string name='body_part'/>
        <stl-string name='material'/>
    </class-type>

    <class-type type-name='item_coinst' inherits-from='item_constructed'>
        <int16_t name='coin_batch' ref-target='coin_batch'/>
    </class-type>

    <class-type type-name='item_totemst' inherits-from='item_constructed'>
        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
        <int16_t name='body_part_idx'/>
    </class-type>

    <class-type type-name='item_clothst' inherits-from='item_constructed'>
        <int32_t name='dimension' init-value='10000'/>
    </class-type>

    <class-type type-name='item_bookst' inherits-from='item_constructed'>
        <stl-string name='title'/>
    </class-type>

    <class-type type-name='item_ballistaarrowheadst' inherits-from='item_actual'>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int32_t name='mat_index'/>
        <int32_t name='sharpness' init-value='10000' since='v0.40.15'/>
    </class-type>

    <class-type type-name='item_sheetst' inherits-from='item_constructed'>
        <int32_t name='dimension'/>
        <int32_t name='unk_2'/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
