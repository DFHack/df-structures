<data-definition>
    <enum-type type-name='announcement_type' base-type='int16_t'>
        <enum-item name='REACHED_PEAK'/>
        <enum-item name='ERA_CHANGE'/>
        <enum-item name='FEATURE_DISCOVERY'/>
        <enum-item name='STRUCK_DEEP_METAL'/>
        <enum-item name='STRUCK_MINERAL'/>
        <enum-item name='STRUCK_ECONOMIC_MINERAL'/>
        <enum-item name='COMBAT_TWIST_WEAPON'/>
        <enum-item name='COMBAT_LET_ITEM_DROP'/>
        <enum-item name='COMBAT_START_CHARGE'/>
        <enum-item name='COMBAT_SURPRISE_CHARGE'/>
        <enum-item name='COMBAT_JUMP_DODGE_PROJ'/>
        <enum-item name='COMBAT_JUMP_DODGE_STRIKE'/>
        <enum-item name='COMBAT_DODGE'/>
        <enum-item name='COMBAT_COUNTERSTRIKE'/>
        <enum-item name='COMBAT_BLOCK'/>
        <enum-item name='COMBAT_PARRY'/>
        <enum-item name='COMBAT_CHARGE_COLLISION'/>
        <enum-item name='COMBAT_CHARGE_DEFENDER_TUMBLES'/>
        <enum-item name='COMBAT_CHARGE_DEFENDER_KNOCKED_OVER'/>
        <enum-item name='COMBAT_CHARGE_ATTACKER_TUMBLES'/>
        <enum-item name='COMBAT_CHARGE_ATTACKER_BOUNCE_BACK'/>
        <enum-item name='COMBAT_CHARGE_TANGLE_TOGETHER'/>
        <enum-item name='COMBAT_CHARGE_TANGLE_TUMBLE'/>
        <enum-item name='COMBAT_CHARGE_RUSH_BY'/>
        <enum-item name='COMBAT_CHARGE_MANAGE_STOP'/>
        <enum-item name='COMBAT_CHARGE_OBSTACLE_SLAM'/>
        <enum-item name='COMBAT_WRESTLE_LOCK'/>
        <enum-item name='COMBAT_WRESTLE_CHOKEHOLD'/>
        <enum-item name='COMBAT_WRESTLE_TAKEDOWN'/>
        <enum-item name='COMBAT_WRESTLE_THROW'/>
        <enum-item name='COMBAT_WRESTLE_RELEASE_LOCK'/>
        <enum-item name='COMBAT_WRESTLE_RELEASE_CHOKE'/>
        <enum-item name='COMBAT_WRESTLE_RELEASE_GRIP'/>
        <enum-item name='COMBAT_WRESTLE_STRUGGLE'/>
        <enum-item name='COMBAT_WRESTLE_RELEASE_LATCH'/>
        <enum-item name='COMBAT_WRESTLE_STRANGLE_KO'/>
        <enum-item name='COMBAT_WRESTLE_ADJUST_GRIP'/>
        <enum-item name='COMBAT_GRAB_TEAR'/>
        <enum-item name='COMBAT_STRIKE_DETAILS'/>
        <enum-item name='COMBAT_STRIKE_DETAILS_2'/>
        <enum-item name='COMBAT_EVENT_ENRAGED'/>
        <enum-item name='COMBAT_EVENT_STUCKIN'/>
        <enum-item name='COMBAT_EVENT_LATCH_BP'/>
        <enum-item name='COMBAT_EVENT_LATCH_GENERAL'/>
        <enum-item name='COMBAT_EVENT_PROPELLED_AWAY'/>
        <enum-item name='COMBAT_EVENT_KNOCKED_OUT'/>
        <enum-item name='COMBAT_EVENT_STUNNED'/>
        <enum-item name='COMBAT_EVENT_WINDED'/>
        <enum-item name='COMBAT_EVENT_NAUSEATED'/>
        <enum-item name='MIGRANT_ARRIVAL_NAMED'/>
        <enum-item name='MIGRANT_ARRIVAL'/>
        <enum-item name='DIG_CANCEL_WARM'/>
        <enum-item name='DIG_CANCEL_DAMP'/>
        <enum-item name='AMBUSH_DEFENDER'/>
        <enum-item name='AMBUSH_RESIDENT'/>
        <enum-item name='AMBUSH_THIEF'/>
        <enum-item name='AMBUSH_THIEF_SUPPORT_SKULKING'/>
        <enum-item name='AMBUSH_THIEF_SUPPORT_NATURE'/>
        <enum-item name='AMBUSH_THIEF_SUPPORT'/>
        <enum-item name='AMBUSH_MISCHIEVOUS'/>
        <enum-item name='AMBUSH_SNATCHER'/>
        <enum-item name='AMBUSH_SNATCHER_SUPPORT'/>
        <enum-item name='AMBUSH_AMBUSHER_NATURE'/>
        <enum-item name='AMBUSH_AMBUSHER'/>
        <enum-item name='AMBUSH_INJURED'/>
        <enum-item name='AMBUSH_OTHER'/>
        <enum-item name='AMBUSH_INCAPACITATED'/>
        <enum-item name='CARAVAN_ARRIVAL'/>
        <enum-item name='NOBLE_ARRIVAL'/>
        <enum-item name='D_MIGRANTS_ARRIVAL'/>
        <enum-item name='D_MIGRANT_ARRIVAL'/>
        <enum-item name='D_MIGRANT_ARRIVAL_DISCOURAGED'/>
        <enum-item name='D_NO_MIGRANT_ARRIVAL'/>
        <enum-item name='ANIMAL_TRAP_CATCH'/>
        <enum-item name='ANIMAL_TRAP_ROBBED'/>
        <enum-item name='MISCHIEF_LEVER'/>
        <enum-item name='MISCHIEF_PLATE'/>
        <enum-item name='MISCHIEF_CAGE'/>
        <enum-item name='MISCHIEF_CHAIN'/>
        <enum-item name='DIPLOMAT_ARRIVAL'/>
        <enum-item name='LIAISON_ARRIVAL'/>
        <enum-item name='TRADE_DIPLOMAT_ARRIVAL'/>
        <enum-item name='CAVE_COLLAPSE'/>
        <enum-item name='BIRTH_CITIZEN'/>
        <enum-item name='BIRTH_ANIMAL'/>
        <enum-item name='STRANGE_MOOD'/>
        <enum-item name='MADE_ARTIFACT'/>
        <enum-item name='NAMED_ARTIFACT'/>
        <enum-item name='ITEM_ATTACHMENT'/>
        <enum-item name='VERMIN_CAGE_ESCAPE'/>
        <enum-item name='TRIGGER_WEB'/>
        <enum-item name='MOOD_BUILDING_CLAIMED'/>
        <enum-item name='ARTIFACT_BEGUN'/>
        <enum-item name='MEGABEAST_ARRIVAL'/>
        <enum-item name='BERSERK_CITIZEN'/>
        <enum-item name='MAGMA_DEFACES_ENGRAVING'/>
        <enum-item name='ENGRAVING_MELTS'/>
        <enum-item name='MASTERPIECE_ARCHITECTURE'/>
        <enum-item name='MASTERPIECE_CONSTRUCTION'/>
        <enum-item name='MASTER_ARCHITECTURE_LOST'/>
        <enum-item name='MASTER_CONSTRUCTION_LOST'/>
        <enum-item name='ADV_AWAKEN'/>
        <enum-item name='ADV_SLEEP_INTERRUPTED'/>
        <enum-item name='CANCEL_JOB'/>
        <enum-item name='ADV_CREATURE_DEATH'/>
        <enum-item name='CITIZEN_DEATH'/>
        <enum-item name='PET_DEATH'/>
        <enum-item name='ENDGAME_EVENT_1'/>
        <enum-item name='ENDGAME_EVENT_2'/>
        <enum-item name='FALL_OVER'/>
        <enum-item name='CAUGHT_IN_FLAMES'/>
        <enum-item name='CAUGHT_IN_WEB'/>
        <enum-item name='UNIT_PROJECTILE_SLAM_BLOW_APART'/>
        <enum-item name='UNIT_PROJECTILE_SLAM'/>
        <enum-item name='UNIT_PROJECTILE_SLAM_INTO_UNIT'/>
        <enum-item name='VOMIT'/>
        <enum-item name='LOSE_HOLD_OF_ITEM'/>
        <enum-item name='REGAIN_CONSCIOUSNESS'/>
        <enum-item name='FREE_FROM_WEB'/>
        <enum-item name='PARALYZED'/>
        <enum-item name='OVERCOME_PARALYSIS'/>
        <enum-item name='NOT_STUNNED'/>
        <enum-item name='EXHAUSTION'/>
        <enum-item name='PAIN_KO'/>
        <enum-item name='BREAK_GRIP'/>
        <enum-item name='NO_BREAK_GRIP'/>
        <enum-item name='BLOCK_FIRE'/>
        <enum-item name='BREATHE_FIRE'/>
        <enum-item name='SHOOT_WEB'/>
        <enum-item name='PULL_OUT_DROP'/>
        <enum-item name='STAND_UP'/>
        <enum-item name='MARTIAL_TRANCE'/>
        <enum-item name='MAT_BREATH'/>
        <enum-item name='ADV_REACTION_PRODUCTS'/>
        <enum-item name='NIGHT_ATTACK_STARTS'/>
        <enum-item name='NIGHT_ATTACK_ENDS'/>
        <enum-item name='NIGHT_ATTACK_TRAVEL'/>
        <enum-item name='GHOST_ATTACK'/>
        <enum-item name='LAIR_HUNTER'/>
        <enum-item name='TRAVEL_SITE_DISCOVERY'/>
        <enum-item name='TRAVEL_SITE_BUMP'/>
        <enum-item name='ADVENTURE_INTRO'/>
        <enum-item name='CREATURE_SOUND'/>
        <enum-item name='CREATURE_STEALS_OBJECT'/>
        <enum-item name='FOUND_TRAP'/>
        <enum-item name='BODY_TRANSFORMATION'/>
        <enum-item name='INTERACTION_ACTOR'/>
        <enum-item name='INTERACTION_TARGET'/>
        <enum-item name='UNDEAD_ATTACK'/>
        <enum-item name='CITIZEN_MISSING'/>
        <enum-item name='PET_MISSING'/>
        <enum-item name='MARKET_CHATTER'/>
        <enum-item name='STRANGE_RAIN_SNOW'/>
        <enum-item name='STRANGE_CLOUD'/>
        <enum-item name='SIMPLE_ANIMAL_ACTION'/>
        <enum-item name='FLOUNDER_IN_LIQUID'/>
        <enum-item name='TRAINING_DOWN_TO_SEMI_WILD'/>
        <enum-item name='TRAINING_FULL_REVERSION'/>
        <enum-item name='ANIMAL_TRAINING_KNOWLEDGE'/>
        <enum-item name='SKIP_ON_LIQUID'/>
        <enum-item name='DODGE_FLYING_OBJECT'/>
    </enum-type>

    <bitfield-type type-name='announcement_flags'>
        <flag-bit name='DO_MEGA' comment='BOX'/>
        <flag-bit name='PAUSE' comment='P'/>
        <flag-bit name='RECENTER' comment='R'/>
        <flag-bit name='A_DISPLAY' comment='A_D'/>
        <flag-bit name='D_DISPLAY' comment='D_D'/>
        <flag-bit name='UNIT_COMBAT_REPORT' comment='UCR'/>
        <flag-bit name='UNIT_COMBAT_REPORT_ALL_ACTIVE' comment='UCR_A'/>
    </bitfield-type>

    <struct-type type-name='announcements'>
        <static-array name='flags' type-name='announcement_flags'
                      count='161' index-enum='announcement_type'/>
    </struct-type>

    <struct-type type-name='report'
                 instance-vector='$global.world.status.reports' key-field='id'>
        <enum base-type='int16_t' name='type' type-name='announcement_type'
              comment='valid only if coordinates are'/>

        <stl-string name='text'/>
        <code-helper name='describe'>$.text</code-helper>

        <int16_t name='color' init-value='7'/>
        <bool name='bright' init-value='true'/>

        <int32_t name='duration' init-value='100'/>

        <bitfield name='flags' base-type='uint8_t'>
            <flag-bit name='continuation'
                      comment='When split into multiple lines, set on all but the first'/>
            <flag-bit name='unk1'/>
            <flag-bit name='announcement'/>
        </bitfield>

        <int32_t name='repeat_count' comment='100 => displays: x101'/>

        <compound name='pos' type-name='coord'/>

        <int32_t name='id'/>
        <int32_t name='year'/>
        <int32_t name='time'/>
    </struct-type>

    <struct-type type-name='popup_message'>
        <stl-string name='text'/>

        <int16_t name='color' init-value='7'/>
        <bool name='bright' init-value='true'/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
